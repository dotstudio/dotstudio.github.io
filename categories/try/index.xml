<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Try on dotstudio（ドットスタジオ）</title><link>https://dotstud.io/categories/try/</link><description>Recent content in Try on dotstudio（ドットスタジオ）</description><generator>Hugo -- gohugo.io</generator><language>ja</language><copyright>© 2018 dotstudio inc.</copyright><lastBuildDate>Mon, 28 Jan 2019 00:51:35 +0900</lastBuildDate><atom:link href="/categories/try/" rel="self" type="application/rss+xml"/><item><title>ArduinoでTwitter連携！愛しのぬいぐるみトンピーちゃんに命を吹き込んでみた</title><link>https://dotstud.io/blog/arduino-nodejs-twitter-connect/</link><pubDate>Mon, 28 Jan 2019 00:51:35 +0900</pubDate><guid>https://dotstud.io/blog/arduino-nodejs-twitter-connect/</guid><description>
&lt;p&gt;皆さん、大好きなぬいぐるみが動き出したらいいなと思ったこと、ありませんか？&lt;/p&gt;
&lt;p&gt;今回は私の愛すべきお友達「トンピーちゃん」に命を吹き込むべく、プログラミング初心者の私がArduinoとTwitterの連携に挑戦してみました！&lt;/p&gt;
&lt;p&gt;&lt;font size=&#34;4&#34;&gt;こちらです！！&lt;/font&gt;
&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/309368/721a8190-3ffc-8bca-c4b3-774ee58d45e9.gif&#34; alt=&#34;ezgif.com-video-to-gif.gif&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;今回やること&#34;&gt;今回やること&lt;/h2&gt;
&lt;h3 id=&#34;実装の構成&#34;&gt;実装の構成&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://gyazo.com/a75b45dc702b385f5e32fcd3e39c5b64&#34;&gt;&lt;img src=&#34;https://i.gyazo.com/a75b45dc702b385f5e32fcd3e39c5b64.png&#34; alt=&#34;Image from Gyazo&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ざっくりの構成です。Node.jsでTwitterの「#tonpy」というハッシュタグを監視し、「move #tonpy」「stop #tonpy」というツイートがあったらArduinoを経由してトンピーちゃんが動いたり止まったりします。&lt;/p&gt;
&lt;h3 id=&#34;用意するもの&#34;&gt;用意するもの&lt;/h3&gt;
&lt;h4 id=&#34;こぐまのトンピーちゃん&#34;&gt;■こぐまのトンピーちゃん&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/309368/210df088-f5f0-6f8a-e9ee-2a63f06e2364.jpeg&#34; alt=&#34;トンピー.jpg&#34; /&gt;
愛用のトンピーちゃんです。乾電池を入れるとピーヒャラドンドンします。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;購入: &lt;a href=&#34;https://www.amazon.co.jp/%E3%82%A4%E3%83%AF%E3%83%A4-%E3%81%93%E3%81%90%E3%81%BE%E3%81%AE%E3%83%88%E3%83%B3%E3%83%94%E3%83%BC/dp/B0002U3OBA&#34;&gt;Amazon.co.jp&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;arduino-uno&#34;&gt;■Arduino Uno&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/309368/c26d230d-e320-b73d-f15f-32d813e1294f.jpeg&#34; alt=&#34;Arduino Uno.jpg&#34; /&gt;
Arduino Unoは2010年に発売されたArduinoで、&lt;a href=&#34;https://store.arduino.cc/usa/arduino-uno-rev3&#34;&gt;Arduinoの公式サイト&lt;/a&gt;にも「&lt;strong&gt;電子工作初心者に最適&lt;/strong&gt;」と書いてあったのでこちらに決めました。&lt;/p&gt;
&lt;p&gt;購入にあたっては「Arduino 初心者」と調べヒットした「&lt;a href=&#34;https://www.amazon.co.jp/%E3%82%B9%E3%82%A4%E3%83%83%E3%83%81%E3%82%B5%E3%82%A4%E3%82%A8%E3%83%B3%E3%82%B9-SSCI-GettingStartedArduinoKit-Arduino%E3%82%92%E3%81%AF%E3%81%98%E3%82%81%E3%82%88%E3%81%86%E3%82%AD%E3%83%83%E3%83%88/dp/B0025Y6C5G/ref=sr_1_fkmr1_2?ie=UTF8&amp;amp;qid=1544321570&amp;amp;sr=8-2-fkmr1&amp;amp;keywords=arduino+%E3%82%B9%E3%82%BF%E3%83%BC%E3%83%88%E3%82%AD%E3%83%83%E3%83%88&#34;&gt;Arduinoをはじめようキット&lt;/a&gt;」を購入しました。&lt;/p&gt;
&lt;p&gt;&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/309368/d7099cb0-97aa-8ff1-4e3d-b959e8139fb4.jpeg&#34;&gt;
─ Arduinoをはじめようキット
&lt;/center&gt;
Arduino Unoの他にブレッドボードや抵抗など電子工作を始めるにあたり必要なもの一式が揃っているため、すぐに始める事ができます。&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;fet-pch-mosfet-2sjs527l-e-60v5a&#34;&gt;■FET（Pch MOSFET 2SJS527L-E 60V5A）&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/309368/88510174-eed9-e286-5343-3deeb08a7884.jpeg&#34; alt=&#34;I-08315.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;FETはロードスイッチとも呼ばれ、簡単にいうと外部からの電圧によって電流の流れを制御できるスイッチのようなもののようです。小さな電力で動作させる事ができます。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://dotstud.io/#回路を作成&#34;&gt;回路を作成&lt;/a&gt;で説明しますが、FETには「Pチャネル」と「Nチャネル」の2種類あります。今回はNチャネルのFETを利用します。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;購入: &lt;a href=&#34;http://akizukidenshi.com/catalog/g/gI-07145/&#34;&gt;秋月電子&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;node-jsをインストールしたpc&#34;&gt;■Node.jsをインストールしたPC&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/309368/efcdf34b-504e-cc68-125a-0acadd815510.jpeg&#34; alt=&#34;IMG_9204.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;今回はNode.jsでプログラムを動かします。下記記事を参考にインストールしてみてください！&lt;/p&gt;
&lt;section class=&#34;link&#34; id=&#34;136&#34;&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;a href=&#34;https://dotstud.io/blog/nodejs-install-use-nodebrew/&#34;&gt;&lt;/a&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/136/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;div class=&#34;link_detail&#34;&gt;
&lt;div class=&#34;link_title&#34;&gt;
Node.jsを始めよう！nodebrewを使って5分で環境構築
&lt;/div&gt;
&lt;div class=&#34;link_date&#34;&gt;
2017-12-15
&lt;/div&gt;
&lt;div class=&#34;link_desc&#34;&gt;
nodebrewを使ったNode.jsのインストール方法をまとめました。
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;/section&gt;
&lt;ul&gt;
&lt;li&gt;筆者PC: mac OS HighSierra バージョン10.13.6&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Node.js: v10.10.0&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;その他&#34;&gt;■その他&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/309368/eb369434-a5ff-e44a-c7b9-02a065030098.jpeg&#34; alt=&#34;IMG_9206.jpg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://dotstud.io/docs/breadboard/&#34;&gt;ブレッドボード&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://localhost:1313/docs/jumperwire/#%E3%83%9F%E3%83%8E%E3%83%A0%E3%82%B7%E3%82%AF%E3%83%AA%E3%83%83%E3%83%97-%E3%83%AF%E3%83%8B%E5%8F%A3&#34;&gt;ワニ口クリップ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;抵抗（今回は220Ω）&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;トンピーちゃんを解体&#34;&gt;トンピーちゃんを解体&lt;/h2&gt;
&lt;p&gt;まずはトンピーちゃんの導線を確認するため、少し解体します。
&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/309368/69ccd688-afb6-0715-124a-44d886fe3178.jpeg&#34; alt=&#34;IMG_6786.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/309368/84c4fcd7-8c65-a0dc-1a84-ee75b5c2ef48.jpeg&#34; alt=&#34;IMG_9205.jpg&#34; /&gt;
電池の部分を取り外してみました。すると、導線は電池部分と本体でパックリ分かれている事が確認できました。今回はその部分にArduino Unoを繋げば回路の開/閉が制御できそうですね。&lt;/p&gt;
&lt;h2 id=&#34;arduino-unoとトンピーちゃんを連携&#34;&gt;Arduino Unoとトンピーちゃんを連携&lt;/h2&gt;
&lt;h3 id=&#34;回路を作成&#34;&gt;回路を作成&lt;/h3&gt;
&lt;p&gt;Arduino Unoから直接ON/OFFを制御しようとすると、電流が少なく回路を開/閉できませんでした。そこでArduino Unoとトンピーちゃんの間に&lt;strong&gt;FETを挿入&lt;/strong&gt;します。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/230/fet.png&#34; alt=&#34;fet&#34;&gt;
&lt;/center&gt;
&lt;p&gt;FETは、電圧の加え方の違いによって「Pチャネル」と「Nチャネル」の2種類に分かれます。今回はNチャネルのFETを利用します。&lt;/p&gt;
&lt;p&gt;また、回路の「+側」にFETを繋ぐことを「ハイサイド（スイッチ）」、-側に繋ぐことを「ローサイド（スイッチ）」と呼称します。今回はNチャネルなので、ローサイドにFETを繋ぎます。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/d32c3f6f4b1de908ceced242cc2ba7f4.png&#34; alt=&#34;Image from Gyazo&#34; /&gt;&lt;/p&gt;
&lt;p&gt;最終的に上記のような回路図になりました。&lt;/p&gt;
&lt;h3 id=&#34;arduino-unoにプログラムを書き込む&#34;&gt;Arduino Unoにプログラムを書き込む&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/309368/b544f541-a5ac-ee97-18a3-de3963210c92.png&#34; alt=&#34;スクリーンショット 2018-12-18 12.35.58.png&#34; /&gt;
ArduinoをUSBケーブルでPCに繋ぎ、アプリケーションでArduino IDEを開きます。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/309368/da16043a-121e-52e2-e395-3121a8a3e48f.png&#34; alt=&#34;スクリーンショット 2018-12-16 15.10.09.png&#34; /&gt;
ファイル→新規ファイルを選択します。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/309368/2a42d894-497d-a0c4-5573-6a4c148fc5fe.png&#34; alt=&#34;スクリーンショット 2018-12-16 15.09.45.png&#34; /&gt;
ツール→ボード→繋いだArduino（今回はArduino Uno）を選択します。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/309368/9f5d63e2-454b-c637-ef5d-07550cccf8d5.png&#34; alt=&#34;スクリーンショット 2018-12-16 15.11.33.png&#34; /&gt;
ツール→シリアルポート→接続したArduinoを選択します。&lt;/p&gt;
&lt;p&gt;下記コードを新規ファイルにコピー&amp;amp;ペーストします。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// pins
const int tonpyPin = 2;
void setup() {
// initialize serial:
Serial.begin(9600);
// make the pins outputs:
pinMode(tonpyPin, OUTPUT);
}
void loop() {
// if there&#39;s any serial available, read it:
while (Serial.available() &amp;gt; 0) {
char value = Serial.read();
if (value == &#39;p&#39;) {
digitalWrite(tonpyPin, HIGH);
} else if (value == &#39;q&#39;){
digitalWrite(tonpyPin, LOW);
} else{
digitalWrite(tonpyPin, LOW);
}
Serial.println(value);
}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/309368/8ec32eee-c610-137c-febd-9408f22db6e1.png&#34; alt=&#34;スクリーンショット 2018-12-10 9.25.26.png&#34; /&gt;
左上にある「→」ボタンを押してマイコンボードに書き込みます。&lt;/p&gt;
&lt;p&gt;これでArduino Unoからの信号（p: スイッチON、q: スイッチOFF）でトンピーちゃんが動く/止まるようになりました。&lt;/p&gt;
&lt;p&gt;これをツイートと連動できれば完成です！&lt;/p&gt;
&lt;h2 id=&#34;node-jsのプログラム&#34;&gt;Node.jsのプログラム&lt;/h2&gt;
&lt;p&gt;ハッシュタグ「#tonpy」を取得し、さらに「move」「stop」のツイートがあったらArduino Unoに送るプログラムを作成します。&lt;/p&gt;
&lt;h3 id=&#34;twitter-apiの準備&#34;&gt;Twitter APIの準備&lt;/h3&gt;
&lt;p&gt;API使用には&lt;a href=&#34;https://developer.twitter.com/&#34;&gt;Twitter Developer&lt;/a&gt;へ登録する必要があります。登録の際、用途など英文で書く部分がありました（筆者はGoogle翻訳を駆使しました）。&lt;/p&gt;
&lt;p&gt;手順については下記の記事に詳しく書かれており、そちらに沿って登録しました。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;参考: &lt;a href=&#34;https://qiita.com/kngsym2018/items/2524d21455aac111cdee&#34;&gt;Twitter API 登録 (アカウント申請方法) から承認されるまでの手順まとめ　※2018年9月時点の情報&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;tweetを取得するnode-jsのプログラムを作成&#34;&gt;Tweetを取得するNode.jsのプログラムを作成&lt;/h3&gt;
&lt;h4 id=&#34;ディレクトリを用意&#34;&gt;■ディレクトリを用意&lt;/h4&gt;
&lt;p&gt;任意の保存場所にフォルダを用意します。今回はDesktopにTonpyフォルダを作りました。&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;jsファイルを作成&#34;&gt;■JSファイルを作成&lt;/h4&gt;
&lt;p&gt;作成したフォルダに任意の名前のJSファイルを用意します。今回は「app.js」としました。&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;twitter-apiを使用するモジュールのインストール&#34;&gt;■Twitter APIを使用するモジュールのインストール&lt;/h4&gt;
&lt;p&gt;Node.jsでTwitter APIが使用できるよう&lt;a href=&#34;https://www.npmjs.com/package/twitter&#34;&gt;Twitterモジュール&lt;/a&gt;をnpmでインストールします。ターミナルで作成したフォルダを開き、下記コマンドを叩きます。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ npm install twitter
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;これでNode.jsでTwitter APIが使用できるようになりました。&lt;/p&gt;
&lt;p&gt;実際に使用する際はJSファイル内で最初に下記のように書くとTwitter APIが呼び出されます。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;const Twitter = require(&#39;twitter&#39;);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;ツイートを取得するプログラムを作成&#34;&gt;■ツイートを取得するプログラムを作成&lt;/h4&gt;
&lt;p&gt;TwitterAPIには「REST API」と「Streaming API」の2種類があります。&lt;/p&gt;
&lt;p&gt;REST APIはエンドポイントへリクエストして初めて結果が得られるものに対して、Streaming APIはレートのリミットなくツイートを受信し続ける事ができます。&lt;/p&gt;
&lt;p&gt;今回はツイートを常に監視し該当のツイートがあったら結果を取得する、という事がしたいので&lt;strong&gt;Streaming API&lt;/strong&gt;を使用します。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;const twitter = require(&amp;quot;twitter&amp;quot;);
const fs = require(&amp;quot;fs&amp;quot;);
const client = new twitter({
consumer_key: &#39;&#39;,//Dev Accountで取得したkeyを書く
consumer_secret: &#39;&#39;,
access_token_key: &#39;&#39;,
access_token_secret: &#39;&#39;,
});
let tweetText =&#39;w&#39;;
client.stream(&#39;statuses/filter&#39;, {track:&amp;quot;#tonpy &amp;quot;}, (stream) =&amp;gt; {//Streaming APIを呼び出す
stream.on(&#39;data&#39;, (tweet) =&amp;gt; {
tweetText = tweet.text;
(~tweetText.indexOf(&#39;move&#39;)) ? (tweetText = &#39;p&#39;) : (~tweetText.indexOf(&#39;stop&#39;)) ? (tweetText = &#39;q&#39;) : (tweetText = &#39;w&#39;);
});
stream.on(&#39;error&#39;, (error) =&amp;gt; {//エラー
console.error(`Error: ${error.message}`);
stream.destroy();
});
});
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ツイートを取得するNode.jsのプログラムが完成しました。&lt;/p&gt;
&lt;h3 id=&#34;arduinoに送るプログラムを作成&#34;&gt;Arduinoに送るプログラムを作成&lt;/h3&gt;
&lt;h4 id=&#34;シリアル通信をするモジュールのインストール&#34;&gt;■シリアル通信をするモジュールのインストール&lt;/h4&gt;
&lt;p&gt;PCとArduino間でシリアル通信をするために、シリアルポートでシリアル通信を行うモジュールもnpmでインストールします。&lt;/p&gt;
&lt;p&gt;シリアルポートとは&lt;strong&gt;シリアル通信を行う時の接続口&lt;/strong&gt;のことで、今回はArduinoと接続したPCのUSBポートにあたります。&lt;/p&gt;
&lt;p&gt;ターミナルで下記コマンドを叩きます。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ npm install serialport
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;これでNode.jsでシリアルポートを制御できるようになりました。&lt;/p&gt;
&lt;p&gt;使用する際はJSファイル内で最初に下記のように呼び出します。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;const Serialport = require(&#39;serialport&#39;);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;シリアルポートの名前を調べる&#34;&gt;■シリアルポートの名前を調べる&lt;/h4&gt;
&lt;p&gt;プログラム内では、USBポートに挿しているArduino Uno（ttyデバイス）を指定します。&lt;/p&gt;
&lt;p&gt;ターミナルで下記コマンドを打ち、PCのシリアルポートに接続されている機器を表示します。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ ls -l /dev/tty.*
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Auduino Unoを挿し、もう一度先ほどのコマンドを打ちます。新しく出てきたttyデバイス名がArduino Unoです。&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;arduino-unoに送るnode-jsのプログラムを作成&#34;&gt;■ Arduino Unoに送るNode.jsのプログラムを作成&lt;/h4&gt;
&lt;p&gt;下記がシリアル通信するためのコードです。ツイートを取得するためのJSファイルの続きに記述してください。&lt;/p&gt;
&lt;p&gt;1行目の&lt;code&gt;/dev/tty.xxx&lt;/code&gt;には上記のシリアルポート名を記入してください。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;const port = new SerialPort(&#39;/dev/tty.xxx&#39;,{
baudRate: 9600//baudRate:9600は1秒に最大9600ビットを送信するという意味
});
port.write(&#39;main screen turn on&#39;, function(err) {
if (err) {
return console.log(&#39;Error on write: &#39;, err.message);
}
console.log(&#39;message written&#39;);
});
port.on(&#39;open&#39;, () =&amp;gt; {
console.log(&#39;Serial open.&#39;);
setInterval(write, 1000);
});
const write = () =&amp;gt; {
console.log(`Input to Arduino: ${tweetText}`);
port.write(tweetText, (error) =&amp;gt; {
if(error) {
console.error(`Error: ${error.message}`);
}
});
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;これでツイート情報を取得し、Arduinoに信号を送る事ができるようになりました。&lt;/p&gt;
&lt;h3 id=&#34;完成コード&#34;&gt;完成コード&lt;/h3&gt;
&lt;p&gt;ツイートを取得するプログラム、Arduinoを制御するプログラムを合わせた完成コードは下記のようになります。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;//-----------------------------------------------
// twitterからツイートを取得
//-----------------------------------------------
const twitter = require(&amp;quot;twitter&amp;quot;);
const client = new twitter({
consumer_key: &#39;&#39;,//Dev Accountで取得したkeyを書く
consumer_secret: &#39;&#39;,
access_token_key: &#39;&#39;,
access_token_secret: &#39;&#39;,
});
let tweetText =&#39;w&#39;;
client.stream(&#39;statuses/filter&#39;, {track:&amp;quot;#tonpy &amp;quot;}, (stream) =&amp;gt; {
stream.on(&#39;data&#39;, (tweet) =&amp;gt; {
tweetText = tweet.text;
(~tweetText.indexOf(&#39;move&#39;)) ? (tweetText = &#39;p&#39;) : (~tweetText.indexOf(&#39;stop&#39;)) ? (tweetText = &#39;q&#39;) : (tweetText = &#39;w&#39;);
});
stream.on(&#39;error&#39;, (error) =&amp;gt; {
console.error(`Error: ${error.message}`);
stream.destroy();
});
});
//-----------------------------------------------
// Node.jsからArduinoに送信
//----------------------------------------------
const SerialPort = require(&#39;serialport&#39;);
const port = new SerialPort(&#39;/dev/tty.xxx&#39;,{
baudRate: 9600
});
port.on(&#39;open&#39;, () =&amp;gt; {
console.log(&#39;Serial open.&#39;);
setInterval(write, 1000);
});
port.on(&#39;data&#39;, (data) =&amp;gt; {
console.log(`Data from Arduino: ${data}`);
});
const write = () =&amp;gt; {
console.log(`Input to Arduino: ${tweetText}`);
port.write(tweetText, (error) =&amp;gt; {
if(error) {
console.error(`Error: ${error.message}`);
}
});
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;node-jsを実行する&#34;&gt;■Node.jsを実行する&lt;/h4&gt;
&lt;p&gt;Node.jsは、ファイルのある場所で下記コマンドで実行します。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ node app.js
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;app.js&lt;/code&gt;部分は、ご自身が作成したファイル名に置き換えてください。「Serial open」がターミナル上に表示されたら無事実行されています。&lt;/p&gt;
&lt;h2 id=&#34;動かしてみる&#34;&gt;動かしてみる&lt;/h2&gt;
&lt;p&gt;Node.jsを起動しながら、ツイートしてみましょう……。「&lt;strong&gt;#tonpy move&lt;/strong&gt;」!!!!!
&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/309368/9c8c2611-d9b2-e7dd-3710-8d2011c2b424.gif&#34; alt=&#34;ezgif.com-video-to-gif.gif&#34; /&gt;&lt;/p&gt;
&lt;p&gt;う、動いたーーーー！！！（少々タイムラグがありますが……。）&lt;/p&gt;
&lt;p&gt;初めてのIoTとっっても楽しかったです！電子工作やNode.jsの勉強にもなり一石二鳥ですね。&lt;/p&gt;
&lt;p&gt;これから色々作っていきたいです！&lt;/p&gt;
&lt;style&gt;
.caution {
border: 1px solid #BFBFBF;
padding: 1em 2em;
margin: 2em 0;
color: #474747;
background: whitesmoke;/*背景色*/
border-left: double 7px #0B0B61;/*左線*/
font-size: 90%;
}
.caution &gt; p {
font-weight: bold;
margin: 0 0 10px 0;
padding: 0;
}
blockquote {
font-size:80%;
}
.accbox {
margin: 2em 0;
padding: 0;
max-width: 710px;
}
.accbox label {
display: block;
margin: 1.5px 0;
padding : 11px 12px;
color :#ffffff;
font-weight: bold;
background :#2f2f2f;
cursor :pointer;
transition: all 0.5s;
}
.accbox label:hover {
background :#A4A4A4;
}
.accbox input {
display: none;
}
.accbox .accshow {
height: 0;
padding: 0;
overflow: hidden;
opacity: 0;
transition: 0.8s;
}
.cssacc:checked + .accshow {
height: auto;
padding: 5px;
background: #eaeaea;
opacity: 1;
}
&lt;/style&gt;</description></item><item><title>Moddable SDKを使ってJavaScriptでIoT開発してみた</title><link>https://dotstud.io/blog/developed-iot-using-moddable/</link><pubDate>Thu, 24 Jan 2019 00:51:35 +0900</pubDate><guid>https://dotstud.io/blog/developed-iot-using-moddable/</guid><description>
&lt;p&gt;どうも。&lt;a href=&#34;https://dotstud.io/members/horihiro&#34;&gt;ほりひろ&lt;/a&gt; です。
dotstudioブログでは、初めましてですね。&lt;/p&gt;
&lt;p&gt;JavaScript や IoT が好きな、でも実は半田付けも抵抗値の計算もろくにできないレベルの週末プログラマーです。
普段は某クラウドベンダーのサポートエンジニアをしています。
よろしくお願いします。&lt;/p&gt;
&lt;p&gt;Twitterアカウントは&lt;a href=&#34;https://twitter.com/hori__hiro&#34;&gt;こちら&lt;/a&gt;です。&lt;/p&gt;
&lt;p&gt;年末に自分の中で話題になっていた、&lt;u&gt;&lt;strong&gt;Moddable SDK&lt;/strong&gt;&lt;/u&gt;というものをようやく触ってみました。&lt;/p&gt;
&lt;h2 id=&#34;moddable-sdk-xs&#34;&gt;Moddable SDK &amp;amp; XS&lt;/h2&gt;
&lt;h3 id=&#34;moddable-sdk&#34;&gt;Moddable SDK&lt;/h3&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/237/1.png&#34; alt=&#34;1&#34;&gt;
&lt;/center&gt;
&lt;p&gt;Moddable SDK は、&lt;strong&gt;JavaScript コードを ESP32 や ESP8266 といったマイコン上で動作させるためのビルド環境やライブラリー群&lt;/strong&gt;のこと、、、だと思います。&lt;/p&gt;
&lt;p&gt;これは Moddable 社から提供されていますが、&lt;u&gt;下記 GitHub リポジトリで公開されているので、無料で手に入れられます。&lt;/u&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/Moddable-OpenSource/moddable&#34;&gt;https://github.com/Moddable-OpenSource/moddable&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;xs&#34;&gt;XS&lt;/h3&gt;
&lt;p&gt;XS は、&lt;strong&gt;Moddable SDK で生成される JavaScript ランタイム環境&lt;/strong&gt; （ドキュメントには &lt;strong&gt;virtual machine&lt;/strong&gt; と記載）で、なんと &lt;a href=&#34;https://github.com/Moddable-OpenSource/moddable#modern-software-development-for-microcontrollers&#34;&gt;ES2018 に 99% 以上準拠&lt;/a&gt;しているらしいです。すごいですね！&lt;/p&gt;
&lt;p&gt;※一部準拠していない部分は、注意事項として&lt;strong&gt;&lt;a href=&#34;https://github.com/Moddable-OpenSource/moddable/blob/public/documentation/xs/XS%20Conformance.md#caveat&#34;&gt;こちら&lt;/a&gt;&lt;/strong&gt;に記載されています。&lt;/p&gt;
&lt;p&gt;これは&lt;a href=&#34;http://www.moddable.com/XS7-TC-39.php&#34;&gt;公式ドキュメント&lt;/a&gt;にある画像です。「XS は一番小さい」って意味でしょうね。シャレてます。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/237/2.png&#34; alt=&#34;2&#34;&gt;
&lt;/center&gt;
&lt;p&gt;ざっくりとした理解ですが、Moddable SDK のビルドツールで、自分が書いた JavaScript や C のソースコードと組み込みのクラスが含まれた XS を、一つのバイナリーにビルドし、マイコンに書き込んでいるようです。&lt;/p&gt;
&lt;p&gt;これまで JavaScript でのマイコン制御というと、以前から ホスト PC とマイコンをシリアル接続し、ホストPC上の Node.js と Johnny-Five を使ってマイコンを制御する方法があり、最近では obniz の制御をネットワークを介して JavaScript などから行う方法がありますが、いずれもマイコンの外に JavaScript の実行環境を用意する必要があります。&lt;/p&gt;
&lt;p&gt;一方で、Moddable SDK では、&lt;u&gt;JavaScript 実行環境である XS がマイコン上で動作することができます。&lt;/u&gt;&lt;/p&gt;
&lt;p&gt;この点は、&lt;strong&gt;これまでの実行環境とは大きく違うところですね！&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;開発環境の構築&#34;&gt;開発環境の構築&lt;/h2&gt;
&lt;p&gt;基本的に、公式のリポジトリに記載された &lt;a href=&#34;https://github.com/Moddable-OpenSource/moddable/blob/public/documentation/Moddable%20SDK%20-%20Getting%20Started.md&#34;&gt;構築手順&lt;/a&gt;通りに実施することで、ビルド ツールなどの環境が構築できます。&lt;/p&gt;
&lt;p&gt;構築手順は macOS/Linux/Windows の各プラットフォーム向けにまとまっており、それぞれが、下記の 3 つのパートに分かれて記載されています。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;mcconfig&lt;/code&gt; や &lt;code&gt;xsbug&lt;/code&gt; などの開発ツールのビルド&lt;/li&gt;
&lt;li&gt;ESP8266 向けの開発環境の構築&lt;/li&gt;
&lt;li&gt;ESP32 向けの開発環境の構築&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;いずれのプラットフォームでも 1. は必須ですが、2. と 3. は手持ちのボードに合わせて、どちらかを実施するだけでよいです。&lt;/p&gt;
&lt;p&gt;私は Windows 用の環境構築をしましたが、Windows 向けの開発環境構築では、&lt;u&gt;&lt;strong&gt;Windows ネイティブのコマンドを使用することをお勧めします。&lt;/strong&gt;&lt;/u&gt;
WSL から &lt;code&gt;git clone&lt;/code&gt; などをすると、&lt;a href=&#34;https://github.com/Moddable-OpenSource/moddable/issues/110&#34;&gt;&lt;strong&gt;開発ツールがビルドできない&lt;/strong&gt;&lt;/a&gt;ようで、これに丸一日ハマりました。&lt;/p&gt;
&lt;p&gt;あと、ビルドツールの実行は、必ず&lt;code&gt;開発者コマンドプロンプト for VS2017&lt;/code&gt; を起動し、そのコマンドプロンプトの中でしましょう。&lt;/p&gt;
&lt;h2 id=&#34;サンプル-コード&#34;&gt;サンプル コード&lt;/h2&gt;
&lt;p&gt;マイコンのサンプルと言えば Lチカですが、手元に LED がなかったので、とりあえず ESP32 上での非同期実行を試してみます。&lt;/p&gt;
&lt;h3 id=&#34;ファイルの用意&#34;&gt;ファイルの用意&lt;/h3&gt;
&lt;p&gt;プロジェクト ディレクトリに下記のような構造で、ファイルを作ります。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;.
├── esp
│ ├── console.c
│ └── console.js
├── main.js
└── manifest.json
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;main-js&#34;&gt;main.js&lt;/h3&gt;
&lt;p&gt;1 秒おきに &lt;code&gt;1&lt;/code&gt; から &lt;code&gt;10&lt;/code&gt; の数字を、1.5 秒おきに &lt;code&gt;a&lt;/code&gt; から &lt;code&gt;z&lt;/code&gt; の文字を、シリアル コンソールに出力するプログラムです。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-js:main.js&#34;&gt;import Timer from &#39;timer&#39;;
import console from &amp;quot;console&amp;quot;;
const a = &#39;a&#39;;
const z = &#39;z&#39;;
let c = a;
let i = 0;
Timer.repeat(() =&amp;gt; {
console.log(`${String(Date.now()).padStart(15)}:${i}`);
i = (i &amp;gt;= 10) ? 0 : i + 1;
}, 1000);
Timer.repeat(() =&amp;gt; {
console.log(`${String(Date.now()).padStart(15)}:${c}`);
c = (c &amp;gt;= z) ? a : String.fromCharCode(c.charCodeAt(0) + 1);
}, 1500);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Web ブラウザーや Node.js なら、定期的な処理を書くなら &lt;code&gt;setInterval&lt;/code&gt; を使うところだと思いますが、Moddable SDK / XS では、グローバルに &lt;code&gt;setInterval&lt;/code&gt; が定義されていません。&lt;/p&gt;
&lt;p&gt;代わりに、&lt;code&gt;Timer&lt;/code&gt; オブジェクトの &lt;code&gt;repeat&lt;/code&gt; メソッドを使って、同じ処理が似たような感じで書くことができます。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-js:browser&amp;amp;nodejs&#34;&gt;setInterval(() =&amp;gt; {
:
}, 1000);
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-js:XS&#34;&gt;import Timer from &#39;timer&#39;;
Timer.repeat(() =&amp;gt; {
:
}, 1000);
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;console-js-console-c&#34;&gt;console.js /console.c&lt;/h3&gt;
&lt;p&gt;実は XS では &lt;code&gt;console&lt;/code&gt; オブジェクトもないので、とりあえず、下記の JS ファイルと C ファイルで、シリアルコンソールに 1 行出力できるメソッドを定義しておきます。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c:esp/console.js&#34;&gt;class Console @ &amp;quot;xs_console_destructor&amp;quot; {
constructor() {
}
static log() @ &amp;quot;xs_console_log&amp;quot;
}
Object.freeze(Console.prototype);
export default Console;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;JS ファイルはタダのラッパーで、処理本体は C ファイルで定義しています。
JS ファイル内で &lt;code&gt;@ ～&lt;/code&gt; と書くと、C ファイルで宣言した関数とバインディングされます。
これは、XS 独自の実装のようです。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c:esp/console.c&#34;&gt;#include &amp;quot;xsAll.h&amp;quot;
#include &amp;quot;xs.h&amp;quot;
void xs_console_destructor(void)
{
}
void xs_console_log(xsMachine *the)
{
int argc = xsToInteger(xsArgc), i;
for (i = 0; i &amp;lt; argc; i++) {
char *str = xsToString(xsArg(i));
do {
uint8_t c = c_read8(str);
if (!c) {
ESP_putc(&#39;\n&#39;);
break;
}
ESP_putc(c);
str++;
} while (1);
}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;manifest-json&#34;&gt;manifest.json&lt;/h3&gt;
&lt;p&gt;最後は manifest ファイルです。
正直言うと、ここはあまり把握できていません :sweat:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;include&lt;/code&gt; で Moddable SDK で用意されている manifest を、ベースの manifest として読み込み、全プラットフォーム共通のモジュールとして &lt;code&gt;main&lt;/code&gt;(.js) を、&lt;code&gt;esp32&lt;/code&gt; 向けには、&lt;code&gt;./esp/console&lt;/code&gt;(.js) をロードする設定を書いています。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-json:manifest.json&#34;&gt;{
&amp;quot;include&amp;quot;: &amp;quot;$(MODDABLE)/examples/manifest_base.json&amp;quot;,
&amp;quot;modules&amp;quot;: {
&amp;quot;*&amp;quot;: [
&amp;quot;./main&amp;quot;,
]
},
&amp;quot;platforms&amp;quot;: {
&amp;quot;esp32&amp;quot;: {
&amp;quot;modules&amp;quot;: {
&amp;quot;*&amp;quot;: [
&amp;quot;./esp/console&amp;quot;,
],
}
}
},
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;上の &lt;code&gt;manifest.json&lt;/code&gt; では &lt;code&gt;Timer&lt;/code&gt; クラスをロードしていませんが、&lt;code&gt;main.js&lt;/code&gt; では問題なく import することができます。
これは、Moddable SDK に含まれるベースの manifest でロード設定がされているためです。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-json:$(MODDABLE)/examples/manifest_base.json(抜粋)&#34;&gt;{
:
(略)
:
&amp;quot;platforms&amp;quot;: {
:
(略)
:
&amp;quot;esp32&amp;quot;: {
&amp;quot;include&amp;quot;: &amp;quot;$(BUILD)/devices/esp32/manifest.json&amp;quot;
},
}
:
(略)
:
}
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-json:$(BUILD)/devices/esp32/manifest.json(抜粋)&#34;&gt;{
:
(略)
:
&amp;quot;modules&amp;quot;: {
&amp;quot;*&amp;quot;: [
&amp;quot;$(MODULES)/base/time/*&amp;quot;,
&amp;quot;$(MODULES)/base/time/esp/*&amp;quot;,
&amp;quot;$(MODULES)/base/timer/*&amp;quot;,
&amp;quot;$(MODULES)/base/timer/mc/*&amp;quot;,
]
},
&amp;quot;preload&amp;quot;: [
&amp;quot;time&amp;quot;,
&amp;quot;timer&amp;quot;,
],
:
(略)
:
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ちなみに manifest についてツイートしたところ、公式アカウントからも返事がありました。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ドキュメントは定期的にメンテナンスされそうです。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;ja&#34;&gt;&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;The manifest documentation (&lt;a href=&#34;https://t.co/HTYtMXR33N&#34;&gt;https://t.co/HTYtMXR33N&lt;/a&gt;) is a good place to start, but we&amp;#39;ll put a document with more details together soon. If you have any specific questions, we&amp;#39;d be happy to answer those as well.&lt;/p&gt; Moddable (@moddabletech) &lt;a href=&#34;https://twitter.com/moddabletech/status/1086084032008413184?ref_src=twsrc%5Etfw&#34;&gt;2019年1月18日&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;&lt;/p&gt;
&lt;h2 id=&#34;実行してみる&#34;&gt;実行してみる&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;manifest.json&lt;/code&gt; があるディレクトリで、&lt;code&gt;mcconfig&lt;/code&gt; コマンドを実行します。
大抵は、XS のビルドから始まるので、書き込みが完了するまでだいぶ時間がかかると思います。&lt;/p&gt;
&lt;p&gt;書き込みが完了すると、シリアルモニターに自動的に接続し、&lt;code&gt;console.log&lt;/code&gt; の出力内容が表示されます。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;gt; mcconfig -m -p esp32
rm: cannot remove &#39;/root/Projects/moddable/build/tmp/esp32/release/xsProj/sdkconfig&#39;: No such file or directory
# Running GENCONFIG...
fatal: Not a git repository (or any of the parent directories): .git
including /root/esp32/esp-idf/components/bootloader/Makefile.projbuild...
:
(略)
:
MONITOR
--- idf_monitor on /dev/ttyUSB0 115200 ---
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
ets Jun 8 2016 00:22:57
rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)
configsip: 0, SPIWP:0xee
clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00
mode:DIO, clock div:2
load:0x3fff0018,len:4
load:0x3fff001c,len:636
load:0x40078000,len:6192
load:0x40080000,len:5152
0x40080000: _iram_start at /root/esp32/esp-idf/components/freertos/xtensa_vectors.S:1685
entry 0x40080264
0x40080264: _Level5Vector at ??:?
1010:1
1510:a
2010:2
3010:3
3011:b
4010:4
4510:c
5010:5
6010:6
:
(略)
:
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;指定した時間間隔で、コールバック関数が実行されています！ :tada::tada::tada:
ES2017 で入った &lt;code&gt;String.prototype.padStart&lt;/code&gt; も正常に動作しているようです。&lt;/p&gt;
&lt;p&gt;なお、マイコンには時計がないので、&lt;code&gt;Date.now()&lt;/code&gt; は起動時からの時間を返します。&lt;/p&gt;
&lt;h3 id=&#34;デバッグ実行&#34;&gt;デバッグ実行&lt;/h3&gt;
&lt;p&gt;先ほど実行したコマンド &lt;code&gt;mcconfig -m -p esp32&lt;/code&gt; にデバッグ オプション &lt;code&gt;-d&lt;/code&gt; を追加すると、デバッグ ビルドを実行し、デバッグ ツールである &lt;code&gt;xsbug&lt;/code&gt; が自動で起動します。&lt;/p&gt;
&lt;p&gt;この &lt;code&gt;xsbug&lt;/code&gt; は JavaScript コードにブレークポイントの設定や、ステップ実行、変数の内容などを表示することが
でき、結構本格的なデバッグツールです。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/237/3.png&#34; alt=&#34;3&#34;&gt;
&lt;/center&gt;
&lt;p&gt;今は独自の GUI ツールとして提供されているようですが、そのうち&lt;strong&gt;VSCode から拡張機能として利用できるようになると嬉しいですね。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;
&lt;p&gt;いかがだったでしょうか。
Moddable SDK を使うことで、JavaScript で書いたコードを、ESP8266/32 で動作させることができました。&lt;/p&gt;
&lt;p&gt;&lt;u&gt;Web フロントエンドや Node.js など、JavaScript を書くエンジニア人口は多いでしょうから、そういった方々も気軽にマイコン開発ができるようになりますね。&lt;/u&gt;&lt;/p&gt;
&lt;p&gt;あとは、manifest ファイルに関するドキュメントの整備がすすんだり、もう少し簡単に環境構築ができれば、格段に開発しやすくなるのではないでしょうか。&lt;/p&gt;</description></item><item><title>【ハンズオン資料】NefryBTでハジメテノIoT開発やってみよう！</title><link>https://dotstud.io/blog/handson-nefry-ma-kanazawa/</link><pubDate>Thu, 01 Nov 2018 10:07:13 +0900</pubDate><guid>https://dotstud.io/blog/handson-nefry-ma-kanazawa/</guid><description>
&lt;p&gt;この記事は11/1の&lt;a href=&#34;https://mashupawards.connpass.com/event/103791/&#34;&gt;ハジメテノIoTハンズオン&lt;/a&gt;向け資料です。記事を読んで試せる内容になっているので、終了後や参加されていない方もぜひ試してみてください！&lt;/p&gt;
&lt;section class=&#34;caution&#34;&gt;
&lt;p&gt;■ハンズオンの進行について&lt;/p&gt;
ハンズオンはこのページに沿って進めます。進められる方は、どんどん進めていきましょう！リンクは別タブや別ウィンドウで開くのがオススメです。
&lt;/section&gt;
&lt;section class=&#34;caution&#34;&gt;
&lt;p&gt;■Nefry BTドキュメントについて&lt;/p&gt;
&lt;a href=&#34;https://dotstud.io/docs/nefrybt/&#34;&gt;Nefry BTドキュメント&lt;/a&gt;: NefryBTの使い方に関するドキュメントページです。基本の動作や、調べ方、質問できる場所なども案内しています。
&lt;/section&gt;
&lt;h2 id=&#34;今回やってみること&#34;&gt;今回やってみること&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;湿度が高くなると自分のLINEに通知がくる仕組み&lt;/strong&gt;を、Nefry BT、温湿度センサ、IFTTTというWebサービスを使って作ってみます。室内の状態が異常になったときに通知する仕組みのようなイメージです。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/architecture.png&#34; alt=&#34;architecture&#34;&gt;
&lt;/center&gt;
&lt;h3 id=&#34;用意するもの&#34;&gt;用意するもの&lt;/h3&gt;
&lt;h4 id=&#34;nefry-bt-ディスプレイ&#34;&gt;■Nefry BT＆ディスプレイ&lt;/h4&gt;
&lt;p&gt;Nefry BTは「ESP-WROOM-32」というWi-Fi・BLE通信モジュールを搭載した、Arduinoと同じように開発できるマイコンボードです。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/215/nefry.png&#34; alt=&#34;nefry&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://dotstud.io/docs/grove/&#34;&gt;Grove&lt;/a&gt;という刺すだけで配線できるモジュール対応のコネクタを搭載していて、&lt;strong&gt;ハードウェアをあまり意識せず&lt;/strong&gt;に開発できます。&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;grove-温湿度センサ&#34;&gt;■Grove 温湿度センサ&lt;/h4&gt;
&lt;p&gt;刺すだけで配線できる&lt;a href=&#34;https://dotstud.io/docs/grove/&#34;&gt;Grove&lt;/a&gt;シリーズの、温度と湿度を取得できるセンサです。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/215/motion_sensor.png&#34; alt=&#34;motion_sensor&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;安価で扱いやすいセンサですが、高い精度や細かいデータの取得には向きません。プロトタイプ向きなセンサです。&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;arduino-ide&#34;&gt;■Arduino IDE&lt;/h4&gt;
&lt;p&gt;開発（プログラムの書き込み）には&lt;a href=&#34;https://www.arduino.cc/en/Main/Software&#34;&gt;Arduino IDE&lt;/a&gt;というフリーソフトウェアを利用します。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://dotstud.io/docs/arduinoide-setup/&#34;&gt;こちら&lt;/a&gt;の手順を見ながらご自身のPCにインストールしてください。&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;arduino-ide-1&#34;&gt;■Arduino IDE&lt;/h4&gt;
&lt;p&gt;開発（プログラムの書き込み）には&lt;a href=&#34;https://www.arduino.cc/en/Main/Software&#34;&gt;Arduino IDE&lt;/a&gt;というフリーソフトウェアを利用します。&lt;/p&gt;
&lt;p&gt;まだインストールしていない方は、&lt;a href=&#34;https://dotstud.io/docs/arduinoide-setup/&#34;&gt;こちら&lt;/a&gt;の手順を見ながら進めてください。&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;iftttアカウント&#34;&gt;■IFTTTアカウント&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://ifttt.com/&#34;&gt;IFTTT&lt;/a&gt;（いふと）は、モノとWebやWebサービス同士を簡単に連携できるサービスです。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/ifttt.png&#34; alt=&#34;ifttt&#34;&gt;
&lt;/center&gt;
&lt;p&gt;他の人が作ったアプレット（連携レシピ）を使ったり、自分で新たに作成したりできます。Nefry BTでは、簡単にIFTTT連携できるツールを用意しています。&lt;/p&gt;
&lt;p&gt;ページトップの「&lt;strong&gt;Sign Up&lt;/strong&gt;」からアカウントをご作成ください。&lt;/p&gt;
&lt;h2 id=&#34;事前準備-セットアップ&#34;&gt;事前準備（セットアップ）&lt;/h2&gt;
&lt;h3 id=&#34;nefry-btのwi-fi設定&#34;&gt;Nefry BTのWi-Fi設定&lt;/h3&gt;
&lt;p&gt;まずはNefry BTがインターネットにつながるよう、会場のWi-Fi情報をNefry BTに教えてあげます。スマホやPCを使う時と同じですね。&lt;/p&gt;
&lt;p&gt;Nefry BTとPCを直接通信させ（アドホックモード）、立ち上がるNefryポータル（設定ウィンドウ）からSSIDとパスワードを入力する手順です。&lt;/p&gt;
&lt;section class=&#34;caution&#34;&gt;
&lt;p&gt;■Nefry BTが接続できるWi-Fi&lt;/p&gt;
Nefry BTが接続できるWi-Fiは2.5GHz帯のWi-Fiのみです。新しい5GHz帯は利用できません（ほとんどのIoT機器が同様）。接続後にブラウザで再度ログインの必要なWi-Fiも、利用できません。
&lt;/section&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;ディスプレイを取り付け電源を入れる&#34;&gt;■ディスプレイを取り付け電源を入れる&lt;/h4&gt;
&lt;p&gt;Nefry BTにディスプレイを取り付けます。4本の足をNefryの4本のピンソケットにさします。
&lt;img src=&#34;https://dotstud.io/img/docs/nefrybt/display2.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;このような形でささります。
&lt;img src=&#34;https://dotstud.io/img/docs/nefrybt/display3.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Nefry BTに、PCやモバイルバッテリーなどから給電を開始します。ディスプレイに表示荒れる「NefryBT-XXXX」という部分が、&lt;strong&gt;ご自身のNefry BTが出す無線の名称&lt;/strong&gt;になります。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/215/nefry.png&#34; alt=&#34;nefry&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;pcをnefry-btの無線に接続する&#34;&gt;■PCをNefry BTの無線に接続する&lt;/h4&gt;
&lt;p&gt;PCのWi-Fi接続設定から、ディスプレイに表示されている「NefryBT-XXXX」という無線を選び接続します。
&lt;img src=&#34;https://dotstud.io/img/docs/nefrybt/nefry_wifi.png&#34; alt=&#34;&#34; /&gt;
セットアップ中PCはインターネットに繋がらなくなるので、この説明ページは開いたまま進めるのがオススメです。&lt;/p&gt;
&lt;p&gt;ちなみにSSIDは自由に変更することができます。（参照：&lt;a href=&#34;https://dotstud.io/docs/nefrybt-conv-change-ssid/&#34;&gt;SSIDを変更する&lt;/a&gt;）&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;nefryポータルで設定する&#34;&gt;■Nefryポータルで設定する&lt;/h4&gt;
&lt;p&gt;Nefry BTのWi-Fiに接続すると、自動でNefryポータルのウィンドウが立ち上がります（立ち上がらない場合はブラウザで&lt;a href=&#34;http://192.168.4.1&#34;&gt;http://192.168.4.1&lt;/a&gt; にアクセスします）。
&lt;img src=&#34;https://dotstud.io/img/docs/nefrybt/setup_page.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;「お探しのページは…」と表示された場合は、「Move to main page」を洗濯してください。「Setup WiFi」をクリックし、利用するWi-FiのSSIDとパスワードを入力して「Save」で保存します。
&lt;img src=&#34;https://dotstud.io/img/docs/nefrybt/setup_wifi.png&#34; alt=&#34;&#34; /&gt;
保存すると、Nefry BTは自動で再起動します。緑の点滅が終了し再起動が完了したら、Wi-Fiのセットアップは完了です。&lt;/p&gt;
&lt;p&gt;一度設定したら、同じWi-Fiを使っている間は起動するだけで接続されます。Wi-Fi情報は5つまで保存でき、消去もできます。&lt;/p&gt;
&lt;h3 id=&#34;開発環境-arduino-ide-にボードを追加&#34;&gt;開発環境（Arduino IDE）にボードを追加&lt;/h3&gt;
&lt;p&gt;Nefty BTの開発にはフリーソフトウェアの&lt;a href=&#34;https://www.arduino.cc/en/Main/Software&#34;&gt;Arduino IDE&lt;/a&gt;を利用します。インストールがまだの方は「&lt;a href=&#34;https://dotstud.io/docs/arduinoide-setup/&#34;&gt;Arduino IDEのインストール&lt;/a&gt;」を見ながら進めてください。&lt;/p&gt;
&lt;p&gt;Arduino IDEには、Nefry BTのボード情報の追加が必要です。「&lt;a href=&#34;https://dotstud.io/docs/nefrybt-setup-arduino-ide/&#34;&gt;環境構築（Arduino IDE）&lt;/a&gt;」を見ながら追加してください。&lt;/p&gt;
&lt;h2 id=&#34;はじめてのプログラムを書き込んでみる&#34;&gt;はじめてのプログラムを書き込んでみる&lt;/h2&gt;
&lt;p&gt;まずはNefry BTに簡単なプログラムを書き込んでみましょう。Nefry BTは、最初から下記の機能が搭載されています。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;内蔵フルカラーLED&lt;/li&gt;
&lt;li&gt;スイッチ（SW/RST）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;nefry-btを起動&#34;&gt;Nefry BTを起動&lt;/h3&gt;
&lt;p&gt;一度Nefry BTを電源から外し、ディスプレイを外します（内蔵LEDが隠れてしまうため）。マイコンボードに配線する時は、&lt;strong&gt;常に電源OFFの状態で操作&lt;/strong&gt;してください。&lt;/p&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/222/off.png&#34; alt=&#34;off&#34;&gt;
&lt;/center&gt;
マイコンボードは基本的に、給電によって電源のON/OFFを制御します。再起動時には最後に書き込んだプログラムが実行されます。プログラムは書き込むたびに上書きされます。&lt;/p&gt;
&lt;p&gt;再度給電します。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/222/on.png&#34; alt=&#34;on&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;緑色のLEDが点滅したあと、ランダムに光ります。&lt;/p&gt;
&lt;h3 id=&#34;まずはlチカ&#34;&gt;まずはLチカ&lt;/h3&gt;
&lt;p&gt;最初のプログラムとして、Lチカをやってみます。LEDチカチカの略で、入門向けのプログラムとして汎用的に紹介されています。&lt;/p&gt;
&lt;p&gt;簡単なプログラムを書き込むことで、ボードが正常に動くか試す際に利用することも多いです。&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;arduino-ideでプログラムを書く&#34;&gt;■Arduino IDEでプログラムを書く&lt;/h4&gt;
&lt;p&gt;Arduino IDEを立ち上げ、メニューから&lt;strong&gt;&lt;code&gt;ファイル &amp;gt; 新規ファイル&lt;/code&gt;&lt;/strong&gt;を選択します。下記のような画面が開きます。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/215/ide.png&#34; alt=&#34;ide&#34;&gt;
&lt;/center&gt;
&lt;p&gt;エディタ部分に、下記のプログラムをコピーして貼り付けましょう（行番号までコピーしてしまわないようご注意ください）。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#include &amp;lt;Nefry.h&amp;gt;
void setup() {
}
void loop() {
Nefry.setLed(0, 0, 255); //色合いをRGBで指定
Nefry.ndelay(1000); //1秒待つ
Nefry.setLed(0, 0, 0); //LEDをオフにする
Nefry.ndelay(1000); //1秒待つ
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;下記でプログラムの内容を解説しています。&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;ボードを選択&#34;&gt;■ボードを選択&lt;/h4&gt;
&lt;p&gt;メニューの&lt;strong&gt;&lt;code&gt;ツール &amp;gt; ボード &amp;gt; Nefry BT R2 / R3&lt;/code&gt;&lt;/strong&gt;を選択します。この際、ボードは使っているリビジョンに合わせて選択してください。（参照：&lt;a href=&#34;https://dotstud.io/docs/nefrybt-setup-revision/&#34;&gt;リビジョンを確認&lt;/a&gt;）&lt;/p&gt;
&lt;p&gt;例えば、使っている基板がR3の場合は&lt;strong&gt;&lt;code&gt;ツール &amp;gt; ボード &amp;gt; Nefry BT R2 / R3&lt;/code&gt;&lt;/strong&gt;を選択します（ハンズオンでは全てR3を使用しています）。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/215/select_board.png&#34; alt=&#34;select_board&#34;&gt;
&lt;/center&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/215/select_board2.png&#34; alt=&#34;select_board2&#34;&gt;
&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;シリアルポートを選択&#34;&gt;■シリアルポートを選択&lt;/h4&gt;
&lt;p&gt;Nefry BTをPCのUSBポートにさします。プログラムはこのポートを介して、シリアル通信でNefry BTに流し込まれます。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/docs/nefrybt/power_supply.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Macの場合は、メニューの&lt;strong&gt;&lt;code&gt;ツール &amp;gt; シリアルポート &amp;gt; /dev/cu.usbserial-xxxxxx&lt;/code&gt;&lt;/strong&gt;を選択します。環境によっては&lt;strong&gt;&lt;code&gt;/dev/tty.usbserial-xxxxxx&lt;/code&gt;&lt;/strong&gt;などの場合もあります。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/215/select_port.png&#34; alt=&#34;select_port&#34;&gt;
&lt;/center&gt;
&lt;p&gt;Windowsの場合は、&lt;strong&gt;&lt;code&gt;ツール &amp;gt; シリアルポート &amp;gt; /dev/COM-XX&lt;/code&gt;&lt;/strong&gt;を選択します。&lt;/p&gt;
&lt;p&gt;&lt;font size=&#34;2&#34;&gt;
※Nefry BTを抜き差しすると、シリアルポートの選択が解除される場合があります。適宜確認しましょう。
&lt;/font&gt;&lt;/p&gt;
&lt;section class=&#34;caution&#34;&gt;
&lt;p&gt;■シリアルポートが選択できない方&lt;/p&gt;
USBドライバのインストールが必要な場合があります。「&lt;a href=&#34;https://dotstud.io/docs/nefrybt-error-faq/#arduino-ideでシリアルポートが見つからない-書き込めない&#34;&gt;Arduino IDEでシリアルポートが見つからない・書き込めない&lt;/a&gt;」を参照して、USBを認識させるためのドライバをインストールしてください。また、Arduino IDEの再起動やUSBの抜き差しで認識する場合があります。
&lt;/section&gt;
&lt;section class=&#34;caution&#34;&gt;
&lt;p&gt;■PCにUSB接続できない方&lt;/p&gt;
セキュリティやポートの問題でPCにUSB接続できない方は、&lt;a href=&#34;https://dotstud.io/docs/nefrybt-program-zip/&#34;&gt;Wi-Fi経由でプログラムのアップロード&lt;/a&gt;が可能です。その場合、下記の書き込み手順は不要です。給電はコンセントやモバイルバッテリーから直接行ってください。
&lt;/section&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;名前をつけて保存&#34;&gt;■名前をつけて保存&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;ファイル&amp;gt;名前をつけて保存&lt;/code&gt;&lt;/strong&gt;を選択して保存します。「NefryLedBlink」など、後からみてわかりやすい名前がオススメです。&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;プログラムを書き込む&#34;&gt;■プログラムを書き込む&lt;/h4&gt;
&lt;p&gt;「✔️」を押してプログラムをコンパイルします。コンパイルとは、プログラムを機械が理解できる（人間には読みづらい）形式に変換することです。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/compile.png&#34; alt=&#34;compile&#34;&gt;
&lt;/center&gt;
この手順は省略しても大丈夫ですが、シンタックス（文法）チェックをしてくれるので実施するのがオススメです。&lt;/p&gt;
&lt;p&gt;左上の「→」ボタンを押してNefry BTにプログラムを書き込みます。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/write.png&#34; alt=&#34;write&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;ESP32モジュールの特性上、書き込みに1分ほどかかります。エラーが出てしまうときは、「&lt;a href=&#34;https://dotstud.io/docs/nefrybt-error-handling-2/&#34;&gt;コンパイルは成功するのに書き込みが失敗する&lt;/a&gt;」を参照してください。&lt;/p&gt;
&lt;p&gt;3分以上かかる場合、Nefry BTの不良の可能性があるので申し出てください。&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;動作を確認&#34;&gt;■動作を確認&lt;/h4&gt;
&lt;p&gt;起動したら、「青いLEDが1秒ごとに光る」ことを確認しましょう。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://gyazo.com/801e9ff4982f3326e6f1c3a133fd8de3&#34;&gt;&lt;img src=&#34;https://i.gyazo.com/801e9ff4982f3326e6f1c3a133fd8de3.gif&#34; alt=&#34;Image from Gyazo&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;LEDがチカチカしました！&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;プログラムの解説&#34;&gt;■プログラムの解説&lt;/h4&gt;
&lt;p&gt;プログラムの要所を説明していきます。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#include &amp;lt;Nefry.h&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;冒頭でライブラリを読み込んでいます。Nefry BTのライブラリでできることは「&lt;a href=&#34;https://dotstud.io/docs/nefrybt-liblary/&#34;&gt;Nefryのライブラリ&lt;/a&gt;」を参照してください。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;void setup() {
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;起動時に処理される部分です。今回はなにもしません。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;void loop() {
Nefry.setLed(0, 0, 255); //色合いをRGBで指定
Nefry.ndelay(1000); //1秒待つ
Nefry.setLed(0, 0, 0); //LEDをオフにする
Nefry.ndelay(1000); //1秒待つ
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;起動時に繰り返し実行する部分です。&lt;code&gt;//&lt;/code&gt;の後ろには任意のコメントを記入することができます。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Nefry.setLed()&lt;/code&gt;という関数で、光らせる色合いをRGBの順で指定します。始めにR=0, G=0, B=255を渡しているので、青く光ります。&lt;/p&gt;
&lt;p&gt;続いて&lt;code&gt;Nefry.ndelay()&lt;/code&gt;という関数で次の処理まで指定した時間待ちます。Arduinoでは時間はミリ秒で指定するので、1000は1秒です。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Nefry.setLed()&lt;/code&gt;に0, 0, 0を渡すことで、LEDはオフになります。オンとオフのあと1秒ずつ待つことで、点滅を表現しています。&lt;/p&gt;
&lt;p&gt;このように、マイコンボードは&lt;strong&gt;①起動時に行う処理&lt;/strong&gt;、&lt;strong&gt;②起動中に繰り返される処理&lt;/strong&gt;をプログラムして扱います。意外と簡単ではないですか……？&lt;/p&gt;
&lt;h3 id=&#34;スイッチを押したらlチカ&#34;&gt;スイッチを押したらLチカ&lt;/h3&gt;
&lt;h4 id=&#34;arduino-ideでプログラムを書く-1&#34;&gt;■Arduino IDEでプログラムを書く&lt;/h4&gt;
&lt;p&gt;同様の手順で新規ファイルを作成し、下記のプログラムをNefry BTに書き込みます。おさらいがてら、やってみましょう。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#include &amp;lt;Nefry.h&amp;gt;
void setup() {
// スイッチを有効化
Nefry.enableSW();
}
void loop() {
// スイッチが押されたら
if (Nefry.readSW()) {
Nefry.setLed(255, 0, 0); //色合いをRGBで指定
Nefry.ndelay(1000); //1秒待つ
}
// 青色に戻す
Nefry.setLed(0, 0, 255);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;下記でプログラムの内容を解説しています。&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;動作を確認-1&#34;&gt;■動作を確認&lt;/h4&gt;
&lt;p&gt;スイッチ（RSTではない方）を押したら、LEDが赤く光ることを確認します。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://gyazo.com/73185cad56d6374e6ad394eafbfef51d&#34;&gt;&lt;img src=&#34;https://i.gyazo.com/73185cad56d6374e6ad394eafbfef51d.gif&#34; alt=&#34;Image from Gyazo&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;プログラムの解説-1&#34;&gt;■プログラムの解説&lt;/h4&gt;
&lt;p&gt;プログラムの要所を説明します。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;void setup() {
// スイッチを有効化
Nefry.enableSW();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;起動時の処理では、&lt;code&gt;Nefry.enableSW()&lt;/code&gt;という関数でスイッチを有効化しています。マイコンボードでは、入力・出力に使うピンなどは&lt;code&gt;setup()&lt;/code&gt;関数内で有効化します。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;void loop() {
// スイッチが押されたら
if (Nefry.readSW()) {
Nefry.setLed(255, 0, 0);//色合いをRGBで指定
Nefry.ndelay(1000); //1秒待つ
}
// 青色に戻す
Nefry.setLed(0, 0, 255);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;if(){}&lt;/code&gt;という条件式で、なにか動作させたいときの条件を決めます。&lt;code&gt;Nefry.readSW()&lt;/code&gt;でスイッチが押されたことを取得し、スイッチが押されたら&lt;code&gt;{}&lt;/code&gt;内を実行します。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;{}&lt;/code&gt;内ではLEDを赤く光らせ、1秒間待つ処理をしています。1秒後はまた&lt;code&gt;void loop()&lt;/code&gt;内を実行し、スイッチが押されているかどうか判定します。&lt;/p&gt;
&lt;p&gt;スイッチが押されている以外のときは、青色のLEDを光らせます。&lt;/p&gt;
&lt;h2 id=&#34;オフラインでgroveセンサを試す&#34;&gt;オフラインでGroveセンサを試す&lt;/h2&gt;
&lt;p&gt;次は、配線してセンサのデータを取得してみます。&lt;strong&gt;まずはインターネットに繋がらない電子工作&lt;/strong&gt;、です。&lt;/p&gt;
&lt;p&gt;エラーの切り分け（どこでエラーが起こっているか）を特定するために、自分で開発するときもステップバイステップでできているか確認しつつ進めるのがオススメです。&lt;/p&gt;
&lt;h3 id=&#34;grove-温湿度センサを接続&#34;&gt;Grove 温湿度センサを接続&lt;/h3&gt;
&lt;p&gt;Groveは刺すだけで配線できるのでGNDや信号線などの確認は必要ありませんが、デジタル・アナログ・I2Cなどの通信方法はGroveモジュールによって違います。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/seeed_wiki.png&#34; alt=&#34;seeed_wiki&#34;&gt;
&lt;/center&gt;
&lt;p&gt;通信方式は温湿度センサの製造元・SeeedStudioの&lt;a href=&#34;http://wiki.seeedstudio.com/Grove-TemperatureAndHumidity_Sensor/&#34;&gt;Wikiページ&lt;/a&gt;を見て確認しましょう。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/connect.png&#34; alt=&#34;connect&#34;&gt;
&lt;/center&gt;
&lt;p&gt;今回は「A0」というソケットに差し込みます。少し硬いですが、カチッと言うまで押し込めます。&lt;strong&gt;配線作業は常に電源オフの状態&lt;/strong&gt; で行います。&lt;/p&gt;
&lt;h3 id=&#34;温湿度センサを扱うライブラリを読み込む&#34;&gt;温湿度センサを扱うライブラリを読み込む&lt;/h3&gt;
&lt;p&gt;温湿度センサを扱うためのライブラリ（※）を追加でダウンロードします。リンク先のページで「Clone or Download」から「Download ZIP」を選択します（2つのページから両方ダウンロードしてください）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/adafruit/DHT-sensor-library&#34;&gt;https://github.com/adafruit/DHT-sensor-library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/adafruit/Adafruit_Sensor&#34;&gt;https://github.com/adafruit/Adafruit_Sensor&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/download.png&#34; alt=&#34;download&#34;&gt;
&lt;/center&gt;
&lt;p&gt;Arduino IDEの&lt;strong&gt;&lt;code&gt;スケッチ &amp;gt; ライブラリをインクルード &amp;gt; .ZIP形式のライブラリをインストール&lt;/code&gt;&lt;/strong&gt;から、ダウンロードされたZIPファイルを2つとも追加して完了です。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/library.png&#34; alt=&#34;library&#34;&gt;
&lt;/center&gt;
&lt;section class=&#34;caution&#34;&gt;
&lt;p&gt;■ライブラリとは&lt;/p&gt;
センサや外部サービスを使うために、あらかじめプログラムを書きパッケージ化したものです。既に誰かが作ってくれているものを取り込んだり、自作したりできます。
&lt;/section&gt;
&lt;h3 id=&#34;プログラムを書き込む-1&#34;&gt;プログラムを書き込む&lt;/h3&gt;
&lt;p&gt;新規ファイルを作成し、下記のプログラムをNefry BTに書き込みます。書き込み手順は、上記の「&lt;a href=&#34;#まずはLチカ&#34;&gt;まずはLチカ&lt;/a&gt;」を参照してくださいね。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#include &amp;quot;DHT.h&amp;quot;
#include &amp;lt;Nefry.h&amp;gt;
#define DHTPIN A0
#define DHTTYPE DHT11
DHT dht(DHTPIN, DHTTYPE);
void setup() {
Nefry.println(&amp;quot;温度・湿度をチェック&amp;quot;);
dht.begin();
}
void loop() {
delay(2000);
float h = dht.readHumidity();
float t = dht.readTemperature();
if (isnan(h) || isnan(t)) {
Nefry.println(&amp;quot;読み取りに失敗しました…&amp;quot;);
return;
}
if (h &amp;gt; 70) {
Nefry.println(&amp;quot;すっごく湿度が高いよ！&amp;quot;);
}
if (t &amp;gt; 30) {
Nefry.println(&amp;quot;すっごく部屋が暑いよ！&amp;quot;);
}
Nefry.print(&amp;quot;湿度: &amp;quot;);
Nefry.print(h);
Nefry.print(&amp;quot; %\t&amp;quot;);
Nefry.print(&amp;quot;温度: &amp;quot;);
Nefry.print(t);
Nefry.println(&amp;quot; *C &amp;quot;);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;動作を確認-2&#34;&gt;動作を確認&lt;/h3&gt;
&lt;p&gt;メニューの&lt;strong&gt;&lt;code&gt;ツール&amp;gt;シリアルモニタ&lt;/code&gt;&lt;/strong&gt; を選択して開きます。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/215/serial_monitor.png&#34; alt=&#34;serial_monitor&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;右下のbps設定を「115200bps」に変更します。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/215/bps.png&#34; alt=&#34;bps&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;2秒ごとに、シリアルモニタに温度と湿度が表示されて行きます。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://gyazo.com/1d912b8d68ca7b63eb0c991c262d83f0&#34;&gt;&lt;img src=&#34;https://i.gyazo.com/1d912b8d68ca7b63eb0c991c262d83f0.gif&#34; alt=&#34;Image from Gyazo&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;あまり動きがないですが、息を吹きかけると湿度が上がることを確認できます。湿度や温度が上がるとアラートメッセージが出ることを確認できたでしょうか？&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;プログラムの解説-2&#34;&gt;■プログラムの解説&lt;/h4&gt;
&lt;p&gt;プログラムの要所を解説します。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#include &amp;quot;DHT.h&amp;quot;
#include &amp;lt;Nefry.h&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ライブラリの読み込み部分です。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#define DHTPIN A0
#define DHTTYPE DHT11
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;#define&lt;/code&gt;で、配線したピンの場所を定義しています。「DHTPIN」という名前の箱に「A0」という値を入れているイメージです。&lt;/p&gt;
&lt;p&gt;こうしておくことで、あとでピンの場所を変えても、ここの値だけ変更すればOKになります。DHTTYPEの値はWikiを参考に入れているだけなので、覚えなくて大丈夫です。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;void setup()
{
Nefry.println(&amp;quot;温度・湿度をチェック&amp;quot;);
dht.begin();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;setup関数内ではセンサの読み込みの開始と、シリアルモニタへの表示メッセージを指定しています。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;void loop()
{
delay(2000);
float h = dht.readHumidity();
float t = dht.readTemperature();
// 省略
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;loop関数では、まず2秒ごとにループすることを指定しています。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;dht&lt;/code&gt;関数で湿度と温度の値を読み取っていて、値を&lt;code&gt;h&lt;/code&gt;と&lt;code&gt;t&lt;/code&gt;という変数にそれぞれ入れています。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;void loop()
{
// 省略
if (h &amp;gt; 70) {
Nefry.println(&amp;quot;すっごく湿度が高いよ！&amp;quot;);
}
if (t &amp;gt; 30) {
Nefry.println(&amp;quot;すっごく部屋が暑いよ！&amp;quot;);
}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;if() {}&lt;/code&gt; の条件式で、湿度が70を超えた時、温度が30を超えたときの処理をそれぞれ指定しています。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Nefry.print(&amp;quot;湿度: &amp;quot;);
Nefry.print(h);
Nefry.print(&amp;quot; %\t&amp;quot;);
Nefry.print(&amp;quot;温度: &amp;quot;);
Nefry.print(t);
Nefry.println(&amp;quot; *C &amp;quot;);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;それ以外のときは温度・湿度を表示させます。&lt;/p&gt;
&lt;h2 id=&#34;webサービスと連携してみる&#34;&gt;Webサービスと連携してみる&lt;/h2&gt;
&lt;p&gt;それでは、湿度が70％を超えたら自分のメールやチャットに通知がくるようにしてみましょう。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/ifttt_action.png&#34; alt=&#34;ifttt_action&#34;&gt;
&lt;/center&gt;
&lt;p&gt;&lt;a href=&#34;https://ifttt.com/discover&#34;&gt;IFTTT&lt;/a&gt;で提供されているサービスであれば、LINE、メール、SMS、Twitter、Facebookなどなど、自由に通知先を設定することができます。この記事では、例としてLINEへの通知方法を紹介します。&lt;/p&gt;
&lt;p&gt;余裕のある方は好きな通知先を選択してみてください！&lt;/p&gt;
&lt;h3 id=&#34;iftttにアプレットを作成&#34;&gt;IFTTTにアプレットを作成&lt;/h3&gt;
&lt;p&gt;まずはIFTTTにアプレット（レシピ）を作成します。IFTTTのアカウントを持っていない場合はアカウント取得から進めてください。&lt;/p&gt;
&lt;p&gt;IFTTTのアプレットは「〇〇が起きたら△△する」というようにトリガー（〇〇）とアクション（△△）に分けられます。&lt;/p&gt;
&lt;p&gt;今回は自作のサービスを利用できる「Webhooks」という機能を使い、「Webhooksを受け取ったらLINEに通知する」というアプレットを作ってみます。&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;トリガーの作成&#34;&gt;■トリガーの作成&lt;/h4&gt;
&lt;p&gt;IFTTTの&lt;a href=&#34;https://ifttt.com/create&#34;&gt;アプレット作成ページ&lt;/a&gt;から「+this」部分をクリックし、トリガーの作成をします。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/1.png&#34; alt=&#34;1&#34;&gt;
&lt;/center&gt;
&lt;p&gt;「Webhooks」を検索しましょう。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/2.png&#34; alt=&#34;2&#34;&gt;
&lt;/center&gt;
&lt;p&gt;「Receive a web request」を選択します。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/3.png&#34; alt=&#34;3&#34;&gt;
&lt;/center&gt;
&lt;p&gt;任意のイベント名をつけます。後ほどNefry BTにも登録するのでメモ帳などにコピーしておきましょう（大文字・小文字の区別があるのでコピー＆ペーストがオススメです）。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/4.png&#34; alt=&#34;4&#34;&gt;
&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;アクションの作成&#34;&gt;■アクションの作成&lt;/h4&gt;
&lt;p&gt;続いてアクションを作成します。「+that」から進めましょう。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/5.png&#34; alt=&#34;5&#34;&gt;
&lt;/center&gt;
&lt;p&gt;Nefry BTからの送信を受け取ったら実行したいWebサービスを自由に選びます。今回はサンプルとしてLINEを連携してみますが、Twitter、Slack、Gmail、Googleカレンダー、Facebookなどなど、たぶん思いつく有名Webサービスはだいたいあります。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/6.png&#34; alt=&#34;6&#34;&gt;
&lt;/center&gt;
&lt;p&gt;起こしたいアクションを選びます。LINEは「メッセージを送る」機能のみですが、サービスによってはさまざまなアクションが起こせます。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/7.png&#34; alt=&#34;7&#34;&gt;
&lt;/center&gt;
&lt;p&gt;クリックすると、初回はアカウント認証を求められる気がします。LINEのログインメールアドレスがわからない、という方は、スマホのLINEアプリの設定から確認できます（&lt;strong&gt;&lt;code&gt;友だちタブ &amp;gt; 設定（歯車）ボタン &amp;gt; アカウント&amp;gt;メールアドレス・パスワード&lt;/code&gt;&lt;/strong&gt;）。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/8.png&#34; alt=&#34;8&#34;&gt;
&lt;/center&gt;
&lt;p&gt;メッセージを送るルーム、メッセージ内容を設定します。「1:1で〜」を選択すると自分個人宛てにメッセージが届きます。メッセージは「LINE Notify」というアカウントから送られる仕組みです。&lt;/p&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/9.png&#34; alt=&#34;9&#34;&gt;
&lt;/center&gt;
通知先は自分個人の他に、グループも選択できます。&lt;/p&gt;
&lt;p&gt;メッセージを自由に作成します。Nefry BTから値を送信し受け取りたい場合は、「Add Ingredient」から&lt;code&gt;Value1&lt;/code&gt;を選択します。下記のような場合は、NefryBT側のプログラムで1つ目の値に湿度を送るよう設定します。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/10.png&#34; alt=&#34;10&#34;&gt;
&lt;/center&gt;
&lt;p&gt;このような感じで設定したら、「Create action」で作成します。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/11.png&#34; alt=&#34;11&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;最終確認がされるので「Finish」で登録しましょう。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/12.png&#34; alt=&#34;12&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&#34;webhooksのsecretkeyを取得&#34;&gt;■WebhooksのSecretKeyを取得&lt;/h4&gt;
&lt;p&gt;Nefry BTとWebhooksと紐付けるための「Secret Key」を取得します。パスワードのようなものです。上部の検索欄からWebhooksを検索しましょう。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/13.png&#34; alt=&#34;13&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;Webhooksのページに移動します（初回は認証画面が表示されるので「Connect」で開始しましょう）。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/14.png&#34; alt=&#34;14&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;右上の「Setting」に移動します。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/15.png&#34; alt=&#34;15&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;「URL」の末尾に自身のSecret Keyが記載されているのでコピーし、メモしておきます。このKeyは漏れると他人が自分にLINEを送れるようになってしまうので、&lt;strong&gt;Web上に公開しないよう注意&lt;/strong&gt;してください。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/16.png&#34; alt=&#34;16&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;h3 id=&#34;プログラムを書き込む-2&#34;&gt;プログラムを書き込む&lt;/h3&gt;
&lt;h4 id=&#34;プログラム&#34;&gt;■プログラム&lt;/h4&gt;
&lt;p&gt;以下のプログラムをNefry BTに書き込みます。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#include &amp;quot;DHT.h&amp;quot;
#include &amp;lt;Nefry.h&amp;gt;
#include &amp;lt;NefryIFTTT.h&amp;gt;
#define DHTPIN A0
#define DHTTYPE DHT11
String Event, SecretKey;
DHT dht(DHTPIN, DHTTYPE);
void setup() {
Nefry.println(&amp;quot;温度・湿度をチェック&amp;quot;);
Nefry.setStoreTitle(&amp;quot;SecretKey&amp;quot;, 0); //Nefry DataStoreのタイトルを指定
Nefry.setStoreTitle(&amp;quot;Event&amp;quot;, 1);
SecretKey = Nefry.getStoreStr(0); //Nefry DataStoreからデータを取得
Event = Nefry.getStoreStr(1); //Nefry DataStoreからデータを取得
dht.begin();
}
void loop() {
delay(2000);
float h = dht.readHumidity();
float t = dht.readTemperature();
if (isnan(h) || isnan(t)) {
Nefry.println(&amp;quot;読み取りに失敗しました…&amp;quot;);
return;
}
if (h &amp;gt; 70) {
Nefry.println(&amp;quot;すっごく湿度が高いよ！&amp;quot;);
bool sendData = IFTTT.send(Event, SecretKey, (String)h);
if (!sendData) { //IFTTTにデータ送信が成功したかの判定
Nefry.setLed(255, 0, 0); //エラーの時、赤色点灯
delay(3000);
} else {
Nefry.setLed(0, 255, 0); //成功の時、緑色点灯
delay(3000);
}
Nefry.ndelay(1000 * 30);
}
Nefry.print(&amp;quot;湿度: &amp;quot;);
Nefry.print(h);
Nefry.print(&amp;quot; %\t&amp;quot;);
Nefry.print(&amp;quot;温度: &amp;quot;);
Nefry.print(t);
Nefry.println(&amp;quot; *C &amp;quot;);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;nefry-btにiftttのアカウント情報を設定&#34;&gt;Nefry BTにIFTTTのアカウント情報を設定&lt;/h3&gt;
&lt;p&gt;Nefry BTにディスプレイを取り付けてから起動し、表示されているIPアドレスにアクセスします（画像の場合は&lt;code&gt;http://192.168.4.1/&lt;/code&gt;。人によって違います。 ）。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/ip.png&#34; alt=&#34;ip&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;「Data Store」に移動します。
&lt;img src=&#34;https://dotstud.io/img/docs/nefrybt/ifttt_setup1.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;先ほど取得したWebhooksの「Secret Key」と「Event Name」をそれぞれ入力し保存します。Event Nameは大文字・小文字の区別があります。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/console.png&#34; alt=&#34;console&#34;&gt;
&lt;/center&gt;
&lt;p&gt;「Save」で保存するとNefry BTが再起動し、準備は完了です。&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h3 id=&#34;動作を確認-3&#34;&gt;動作を確認&lt;/h3&gt;
&lt;p&gt;さっそく完成したものを動かしてみましょう。&lt;/p&gt;
&lt;p&gt;湿度の値が高くなると……&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://gyazo.com/bd6a5ae77bc93459b3c602d82fb00faa&#34;&gt;&lt;img src=&#34;https://i.gyazo.com/bd6a5ae77bc93459b3c602d82fb00faa.gif&#34; alt=&#34;Image from Gyazo&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;LINEに通知されました！&lt;/p&gt;
&lt;p&gt;お疲れ様でした〜！&lt;/p&gt;
&lt;h3 id=&#34;プログラムの解説-3&#34;&gt;プログラムの解説&lt;/h3&gt;
&lt;p&gt;要所を説明します。大事なところはちょっとだけです。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;void setup() {
Nefry.setStoreTitle(&amp;quot;SecretKey&amp;quot;, 0); //Nefry DataStoreのタイトルを指定
Nefry.setStoreTitle(&amp;quot;Event&amp;quot;, 1);
SecretKey = Nefry.getStoreStr(0); //Nefry DataStoreからデータを取得
Event = Nefry.getStoreStr(1); //Nefry DataStoreからデータを取得
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Nefry.setStoreTitle({タイトル}, {チャンネル番号})&lt;/code&gt;関数を使い、Nefry BTのDataStore機能に場所を作っています。この値はNefryポータル側から入力でき、変更があってもプログラムを書き換える必要はありません。&lt;/p&gt;
&lt;p&gt;また値を&lt;code&gt;getStoreStr({チャンネル番号})&lt;/code&gt;で、ポータル側で設定した値を受け取っています。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;void loop() {
// 省略
if (h &amp;gt; 70) {
Nefry.println(&amp;quot;すっごく湿度が高いよ！&amp;quot;);
bool sendData = IFTTT.send(Event, SecretKey, (String)h);
if (!sendData) { //IFTTTにデータ送信が成功したかの判定
Nefry.setLed(255, 0, 0); //エラーの時、赤色点灯
delay(3000);
} else {
Nefry.setLed(0, 255, 0); //成功の時、緑色点灯
delay(3000);
}
Nefry.ndelay(1000 * 30);
}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;先ほど同様湿度が70%を超えたとき、という条件文を作っています。&lt;code&gt;IFTTT.send()&lt;/code&gt;関数を使い、もし送れなかったときは赤いLEDを光らせるという処理をしています（&lt;code&gt;!&lt;/code&gt;は&lt;code&gt;!==&lt;/code&gt;と同義で、&lt;code&gt;FALSE&lt;/code&gt;が返ったときに実行されます）。&lt;/p&gt;
&lt;p&gt;何度も連続して通知が来るとウザいので、一度送ったあとは30秒（1000ミリ秒×30）待ちます。場合によっては30分待つ、1日待つ、などに変更します。&lt;/p&gt;
&lt;h2 id=&#34;応用-いろいろなセンサを試してみる&#34;&gt;応用: いろいろなセンサを試してみる&lt;/h2&gt;
&lt;p&gt;刺すだけで配線できるGroveモジュールは100種類以上あり、いろいろなデータを手軽に扱うことができます。下記ではモジュールと利用例を紹介します。&lt;/p&gt;
&lt;h3 id=&#34;磁気スイッチ&#34;&gt;磁気スイッチ&lt;/h3&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/magnetic.png&#34; alt=&#34;magnetic&#34;&gt;
&lt;/center&gt;
磁石がくっついているか否か、を検知するセンサです。ドアの開閉検知によく使われ、市販の開閉検知装置も磁気センサを使っていることが多いです。&lt;/p&gt;
&lt;p&gt;ドアが閉まっているときは磁石とセンサが接着、開いたときは離れるように設置することで開閉を検知できます。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;例: 開閉検知&lt;/li&gt;
&lt;li&gt;参考: &lt;a href=&#34;http://www.atmarkit.co.jp/ait/articles/1806/26/news001.html&#34;&gt;磁気スイッチを使ってポストの開閉をメールで通知&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;人感センサ&#34;&gt;人感センサ&lt;/h3&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/pir.png&#34; alt=&#34;pir&#34;&gt;
&lt;/center&gt;
人が近くにいることを検知するセンサです。防犯用の近づくと光るなどに使われます。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;例: 防犯灯&lt;/li&gt;
&lt;li&gt;参考: &lt;a href=&#34;https://dotstud.io/blog/nefrybt-handson-pir-linebot/&#34;&gt;Nefry BTと人感センサで防犯LINE BOTを作ってみよう&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;光センサ&#34;&gt;光センサ&lt;/h3&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/luminance.png&#34; alt=&#34;luminance&#34;&gt;
&lt;/center&gt;
照度（光の度合い）を検知します。暗くなったら明かりをつける仕組みや、異常のときに光るパトランプの近くに起き通知するなど、異常検知にも利用できます。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;例: 異常検知&lt;/li&gt;
&lt;li&gt;参考: &lt;a href=&#34;https://qiita.com/n0bisuke/items/257126448cf4db482d43&#34;&gt;NefryでGrove Luminance Sensor(照度センサ)を触るメモ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;超音波距離センサ&#34;&gt;超音波距離センサ&lt;/h3&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/wave.png&#34; alt=&#34;wave&#34;&gt;
&lt;/center&gt;
センサからモノへの距離を測るセンサです。超音波をぶつけて跳ね返りを調べる仕組みです。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;参考: &lt;a href=&#34;https://qiita.com/HiroyukiYasui/items/cf477e9ce83682513ab1&#34;&gt;NefryBTでGroveセンサーをつなげる時の？について&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;サーボモータ&#34;&gt;サーボモータ&lt;/h3&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/servo.png&#34; alt=&#34;servo&#34;&gt;
&lt;/center&gt;
角度を指定して回転させることができるアクチュエータです。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;参考: &lt;a href=&#34;https://poche-magique.com/2018/05/06/nefrybt_grove_servo/&#34;&gt;[Nefry BTとGrove接続実験] サーボモータ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;カメラ&#34;&gt;カメラ&lt;/h3&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/229/camera.png&#34; alt=&#34;camera&#34;&gt;
&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;例: 機械学習で画像認識&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://dotstud.io/blog/nefrybt-pepper-monitoring-system/&#34;&gt;Node.jsとNefry BTで監視システムを作ろう！ for Pepper #iotlt&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;関連情報&#34;&gt;関連情報&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://dotstud.io/shop/nefry-bt-set/&#34;&gt;Nefr BTの購入&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Nefry BTはこちらから購入できます（送料無料）。その他にも千石電商、ツクモ、若松通商、共立電子などの実店舗やECサイトで購入できます。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://dotstud.io/docs/nefrybt/&#34;&gt;Nefry BTドキュメント&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Nefry BTでは、IFTTTを使ったWebサービスとの連携や、その他のクラウドサービスとの連携も簡単です。ディスプレイを使ったイラスト描画や、100以上あるGroveモジュールの活用なども、ぜひ試してみてください。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://www.facebook.com/groups/nefry&#34;&gt;Nefryユーザーグループ（FB）&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Nefryユーザ同士が交流するページです。質問を投稿して解決した事例もたくさんありますので、困った際などはぜひお気軽にご利用ください。開発者もよく登場します。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://nefry.connpass.com/event/97692/&#34;&gt;Nefry User Meetup!&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Nefryユーザによる開催イベントです。ハンズオンやLT会、もくもく会などを実施しています。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://dotstudio.connpass.com/&#34;&gt;dotstudioイベント&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;dotstudioによる開催イベントです。Nefry BT以外の題材を扱うことも多いです。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;style&gt;
.caution {
border: 1px solid #BFBFBF;
padding: 1em 2em;
margin: 2em 0;
color: #474747;
background: whitesmoke;/*背景色*/
border-left: double 7px #0B0B61;/*左線*/
font-size: 90%;
}
.caution &gt; p {
font-weight: bold;
margin: 0 0 10px 0;
padding: 0;
}
blockquote {
font-size:80%;
}
.accbox {
margin: 2em 0;
padding: 0;
max-width: 710px;
}
.accbox label {
display: block;
margin: 1.5px 0;
padding : 11px 12px;
color :#ffffff;
font-weight: bold;
background :#2f2f2f;
cursor :pointer;
transition: all 0.5s;
}
.accbox label:hover {
background :#A4A4A4;
}
.accbox input {
display: none;
}
.accbox .accshow {
height: 0;
padding: 0;
overflow: hidden;
opacity: 0;
transition: 0.8s;
}
.cssacc:checked + .accshow {
height: auto;
padding: 5px;
background: #eaeaea;
opacity: 1;
}
&lt;/style&gt;</description></item><item><title>加速度センサとマイコン内蔵LEDで魔法の杖を作ってみた！</title><link>https://dotstud.io/blog/halloween-gadget-witch-stick/</link><pubDate>Wed, 31 Oct 2018 10:07:13 +0900</pubDate><guid>https://dotstud.io/blog/halloween-gadget-witch-stick/</guid><description>
&lt;p&gt;みなさんこんにちは。トボリです。&lt;/p&gt;
&lt;p&gt;私は電子工作が大好きで、いろいろいじったり、&lt;a href=&#34;http://toboli.hatenablog.com/&#34;&gt;ブログ&lt;/a&gt;を書いたりして暮らしています。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ところで、みなさん魔法は好きですか？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;電子工作と魔法ってかなり相性いいと思うんですよ。勝手に光る、勝手に動く、勝手にしゃべる……とか！&lt;/p&gt;
&lt;p&gt;気づけばもう10月31日。そう、本日はハロウィンです！電子工作を愛し、電子工作に愛された者として、このイベントで魔法っぽいものを作りたい！！&lt;/p&gt;
&lt;p&gt;魔法といえば、そう、杖ですよね！！&lt;/p&gt;
&lt;p&gt;ということで、今回はみんなが一度は憧れたであろう、&lt;strong&gt;『魔法の杖』&lt;/strong&gt; を作ってみました！&lt;/p&gt;
&lt;h2 id=&#34;振ると光る杖-を作ることにした&#34;&gt;「振ると光る杖」を作ることにした&lt;/h2&gt;
&lt;p&gt;『魔法の杖』っていうからには、できるだけかっこいいことがしたい！
トボリも想像力だけは無駄に豊かなので、うきうきいろんな機能をイメージしました。&lt;/p&gt;
&lt;p&gt;家電を操作したり、一振りでカーテン開けられたりできたらいいなあ～！何か浮かせられたらもっとおもしろいかも……。&lt;/p&gt;
&lt;p&gt;しかし。&lt;/p&gt;
&lt;p&gt;&lt;span style=&#34;font-size: 200%&#34;&gt;時間と技術力は限られている！！&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;今のトボリの技術力でハロウィンまでに作れそうなものといえば、「振ると光る」杖です。&lt;/p&gt;
&lt;p&gt;想像よりだいぶスケールが小さくなりましたが、どんなにささやかな物でもまずは作ることが大事！
と自分に言い聞かせ、とにかく作ってみることにしました！&lt;/p&gt;
&lt;h2 id=&#34;用意するもの&#34;&gt;用意するもの&lt;/h2&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/228/parts.png&#34; alt=&#34;parts&#34;&gt;
&lt;/center&gt;
電子工作初心者の味方、Arduinoを使って作ろうと思います！&lt;/p&gt;
&lt;p&gt;また、なぜミニブレッドボードを使用するかというと……これを見てください！
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/228/breadboard.png&#34; alt=&#34;breadboard&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;たまたま買った電池ボックスとミニブレッドボードのサイズがほぼ同じ！&lt;/p&gt;
&lt;p&gt;これを見た瞬間、絶対に使おう！と固く決意したのです。
（本当はユニバーサル基板に半田付けしてたんですが、完成間近にピンヘッダの取り付けミスが発覚し、安心安全のブレッドボードでやり直したという経緯があります。つらい。）&lt;/p&gt;
&lt;h2 id=&#34;魔法の杖を作る&#34;&gt;魔法の杖を作る&lt;/h2&gt;
&lt;p&gt;魔法の杖は、下記の3ステップで作って行きます！&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;プログラムを書く&lt;/li&gt;
&lt;li&gt;ブレッドボードに回路を作る&lt;/li&gt;
&lt;li&gt;見た目をそれっぽく造形する&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;プログラムを書く&#34;&gt;プログラムを書く&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://dotstud.io/docs/arduinoide-setup/&#34;&gt;Arduino IDE&lt;/a&gt;を使ってプログラムを書いていきます。&lt;/p&gt;
&lt;p&gt;加速度センサのサンプルプログラムと、フルカラーLEDのサンプルプログラムをただ合体しただけのお手軽コードです！&lt;/p&gt;
&lt;div class=&#34;accbox&#34;&gt;
&lt;label for=&#34;label1&#34;&gt;クリックしてコードを表示&lt;/labe&gt;
&lt;input type=&#34;checkbox&#34; id=&#34;label1&#34; class=&#34;cssacc&#34; /&gt;
&lt;div class=&#34;accshow&#34;&gt;
&lt;pre&gt;
&lt;code class=&#34;hljs hljs-line-numbers&#34;&gt;
#include &amp;lt;Wire.h&amp;gt;
#include &amp;lt;SparkFun_MMA8452Q.h&amp;gt;
#include &amp;lt;Adafruit_NeoPixel.h&amp;gt;
#define PIN 2
Adafruit_NeoPixel pixels = Adafruit_NeoPixel(1, PIN, NEO_GRB + NEO_KHZ800);
MMA8452Q accel;
void setup() {
Serial.begin(9600);
Serial.println(&#34;MMA8452Q Test Code!&#34;);
pixels.begin();
pixels.show();
accel.init();
}
void loop() {
if(accel.available()) {
accel.read();
printCalculatedAccels();
printOrientation();
Serial.println();
}
}
void printOrientation() {
byte pl = accel.readPL();
switch (pl) {
case PORTRAIT_U:
Serial.print(&#34;Portrait Up&#34;);
break;
case PORTRAIT_D:
Serial.print(&#34;Portrait Down&#34;);
break;
case LANDSCAPE_R:
Serial.print(&#34;Landscape Right&#34;);
rainbow(20);
break;
case LANDSCAPE_L:
Serial.print(&#34;Landscape Left&#34;);
rainbow(20);
break;
case LOCKOUT:
Serial.print(&#34;Flat&#34;);
pixels.show();
break;
}
}
void rainbow(uint8_t wait) {
uint16_t i, j;
for(j=0; j&amp;lt;256; j++) {
for(i=0; i&amp;lt;pixels.numPixels(); i++) {
pixels.setPixelColor(i, Wheel((i+j) &amp; 255));
}
pixels.show();
delay(wait);
}
}
uint32_t Wheel(byte WheelPos) {
WheelPos = 255 - WheelPos;
if(WheelPos &amp;lt; 85) {
return pixels.Color(255 - WheelPos * 3, 0, WheelPos * 3);
}
if(WheelPos &amp;lt; 170) {
WheelPos -= 85;
return pixels.Color(0, WheelPos * 3, 255 - WheelPos * 3);
}
WheelPos -= 170;
return pixels.Color(WheelPos * 3, 255 - WheelPos * 3, 0);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;ブレッドボードに回路を作る&#34;&gt;ブレッドボードに回路を作る&lt;/h3&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/228/fritzing.png&#34; alt=&#34;fritzing&#34;&gt;
&lt;/center&gt;
まずはブレッドボードに配線していきます！配線図はこんな感じ。&lt;/p&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/228/circuit.png&#34; alt=&#34;circuit&#34;&gt;
&lt;/center&gt;
実際に配線したものがこちらです！
LEDの部分だけ基板から離れてしまうので、後で半田付けをします。&lt;/p&gt;
&lt;p&gt;みなさん半田付けって好きですか？トボリは電子工作作業の中で半田付けが一番好きです！
半田の香りは下手なアロマより癒される気がします。&lt;/p&gt;
&lt;h3 id=&#34;見た目をそれっぽく造形する&#34;&gt;見た目をそれっぽく造形する&lt;/h3&gt;
&lt;p&gt;杖はそれっぽい形になればなんでもいいので、3Dプリンタを使える方は使ってもいいし、お好きなやり方で大丈夫です！今回は、粘土をこねて作ってみたので、参考までに材料と作り方も載せておきます！&lt;/p&gt;
&lt;h4 id=&#34;用意するもの-1&#34;&gt;■ 用意するもの&lt;/h4&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/228/stick1.png&#34; alt=&#34;stick1&#34;&gt;
&lt;/center&gt;
石粉粘土・トイレットペーパーの芯・市販のスティックを用意します。これらは全て百均で買うことができました！いい時代ですね！&lt;/p&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/228/stick2.png&#34; alt=&#34;stick2&#34;&gt;
&lt;/center&gt;
この市販のスティックを分解し、筒状の棒だけ取り出します。&lt;/p&gt;
&lt;h4 id=&#34;杖の形に造形する&#34;&gt;■ 杖の形に造形する&lt;/h4&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/228/stick3.png&#34; alt=&#34;stick3&#34;&gt;
&lt;/center&gt;
市販の棒とトイレットペーパーの芯をくっつけます。トイレットペーパーの芯の先に切れ込みを入れて、画像のように内側に折り込みます。トイレットペーパーの芯に棒を差し込んで、テープで固定します。&lt;/p&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/228/stick4.png&#34; alt=&#34;stick4&#34;&gt;
&lt;/center&gt;
中に基板を入れ、筒の中にLEDのワイヤーを通してから、LEDを半田付けします。&lt;/p&gt;
&lt;p&gt;動作チェックをして問題なさそうだったら、どんどん土台に石粉粘土を貼り付けていきます！少しずつ貼り付けて、時々手でなでて滑らかにしていきます。&lt;/p&gt;
&lt;p&gt;乾いたら、カッターで傷をつけ、茶色と黒のアクリル絵の具をインスピレーションに従っていい感じに塗ります。&lt;/p&gt;
&lt;h4 id=&#34;完成&#34;&gt;■ 完成！&lt;/h4&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/228/stick5.png&#34; alt=&#34;stick5&#34;&gt;
&lt;/center&gt;
できた～～～！！！
どう見ても、魔法の杖！！少なくとも自分にとっては手塩にかけた最愛の杖！！&lt;/p&gt;
&lt;h2 id=&#34;魔法を発動する&#34;&gt;魔法を発動する&lt;/h2&gt;
&lt;p&gt;さっそく魔法を発動していきましょう！
左右に杖を振ると……虹色の光が出ます！やった～～！魔法っぽい！
&lt;img src=&#34;https://dotstud.io/img/blog/228/demo.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;次こそはもっとうまく作りたい-それが電子工作沼&#34;&gt;次こそはもっとうまく作りたい……それが電子工作沼&lt;/h2&gt;
&lt;p&gt;LEDとセンサーひとつですが、結構楽しいものができました！&lt;/p&gt;
&lt;p&gt;でも、やっぱり本当はこうしたい……もっとかっこいい機能搭載したい……という欲望はとめどなく溢れ、「次こそもっといいものを！」という気持ちになります。&lt;/p&gt;
&lt;p&gt;もうこうなったらズブズブですよね。&lt;b&gt;電子工作沼&lt;/b&gt;に。このハロウィンは今自分が作れる楽しいものを作りまくって、一緒に電子工作沼で溺れましょう！&lt;/p&gt;
&lt;p&gt;ではでは、トボリでした！&lt;/p&gt;
&lt;style&gt;
.accbox {
margin: 2em 0;
padding: 0;
max-width: 710px;
}
.accbox label {
display: block;
margin: 1.5px 0;
padding : 11px 12px;
color :#ffffff;
font-weight: bold;
background :#2f2f2f;
cursor :pointer;
transition: all 0.5s;
}
.accbox label:hover {
background :#A4A4A4;
}
.accbox input {
display: none;
}
.accbox .accshow {
height: 0;
padding: 0;
overflow: hidden;
opacity: 0;
transition: 0.8s;
}
.cssacc:checked + .accshow {
height: auto;
padding: 5px;
background: #eaeaea;
opacity: 1;
}
&lt;/style&gt;</description></item><item><title>【あのバズマイコンを最速？レポート】極小マイコンのトリリオンノード・エンジンを使ってみた！</title><link>https://dotstud.io/blog/trillion-node-engine-sugoi/</link><pubDate>Fri, 05 Oct 2018 02:39:17 +0900</pubDate><guid>https://dotstud.io/blog/trillion-node-engine-sugoi/</guid><description>
&lt;p&gt;こんにちは、宇宙エンジニアのたくろーどんです。&lt;/p&gt;
&lt;p&gt;夏休みなので「何かハッカソンに出てみたい！モノづくりしたい！」と思いつつ、&lt;a href=&#34;http://www.mcpc-jp.org/&#34;&gt;MCPC（モバイルコンピューティング推進コンソーシアム）&lt;/a&gt;が主催する&lt;strong&gt;第1回ナノコン応用ハッカソン&lt;/strong&gt;に参加しました。&lt;/p&gt;
&lt;p&gt;なんとこのハッカソンで&lt;strong&gt;これから流行りそうな凄い開発ボード&lt;/strong&gt;に出会ったので、紹介します。その名も&lt;u&gt;&lt;strong&gt;トリリオンノード・エンジン&lt;/strong&gt;&lt;/u&gt;です。&lt;/p&gt;
&lt;h2 id=&#34;トリリオンノード-エンジン-のここが凄い&#34;&gt;「トリリオンノード・エンジン」のここが凄い！&lt;/h2&gt;
&lt;h3 id=&#34;小さい&#34;&gt;小さい！&lt;/h3&gt;
&lt;p&gt;特筆すべきポイントは、&lt;strong&gt;トリリオンノード・エンジンの小ささ&lt;/strong&gt;でしょう。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/d8655c77-c996-4684-adb8-61f8799cbce4.jpeg&#34; alt=&#34;P_20180831_162041_vHDR_On.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;そうです、写真でわかるように&lt;strong&gt;本当に小さい&lt;/strong&gt;です。
決して、手が大きいわけではありません。&lt;/p&gt;
&lt;h3 id=&#34;拡張性が高い&#34;&gt;拡張性が高い！&lt;/h3&gt;
&lt;p&gt;ハッカソンの際は、写真のようにキットが渡されました。
&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/ab86e180-f0c0-afdd-c320-baa25fa92140.jpeg&#34; alt=&#34;P_20180831_100142_vHDR_On.jpg&#34; /&gt;
トリリオンノード・エンジンは、&lt;strong&gt;リーフ&lt;/strong&gt;というパーツで構成され、そのリーフの1つ1つに&lt;strong&gt;センサモジュールやBLE（Bluetooth）、Wi-Fi&lt;/strong&gt;といった機能を持っています。それを&lt;u&gt;&lt;strong&gt;重ねていくことで簡単に機能を拡張することができる&lt;/strong&gt;&lt;/u&gt;仕組みです。&lt;/p&gt;
&lt;p&gt;プログラムは&lt;strong&gt;Arduino IDE&lt;/strong&gt;で書きます。これは、Arduinoを触ったことがある人にやさしいですね。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/0c71d1f5-486a-a6c7-d408-1aafa14afcdf.jpeg&#34; alt=&#34;P_20180831_100406_vHDR_On.jpg&#34; /&gt;
評価用キットなので、すべてのリーフが入っているわけではありません。今後は、もっとリーフが増えるようです。例えば、&lt;strong&gt;Groveセンサ用のリーフ&lt;/strong&gt;も予定されているそうです。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/725d14ea-0149-83c4-87bd-cdade631bf64.jpeg&#34; alt=&#34;P_20181001_002408_vHDR_On.jpg&#34; /&gt;
Arduinoシールドのリーフもあります。プロトタイプをつくる際に役立ちますね。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/6bd3b78b-ca6c-7bce-83bd-cb8a76319c44.jpeg&#34; alt=&#34;P_20181001_002538_vHDR_On.jpg&#34; /&gt;
「29TH Leaf」というリーフを使えば基板に直接実装できます。これもArduino互換リーフの一つです。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/371ec114-1346-7596-1d0e-f2c12fa5d0e1.jpeg&#34; alt=&#34;P_20181001_002505_vHDR_On.jpg&#34; /&gt;
電源はUSB給電だけなく、&lt;strong&gt;専用のリーフで単3電池やボタン電池駆動&lt;/strong&gt;させることができます。実装には一手間かかるので、専用のリーフがあるのはとてもありがたいですね。&lt;/p&gt;
&lt;p&gt;例えば&lt;strong&gt;ウェアラブルなものをつくりたい&lt;/strong&gt;と思ったときに、必要な電圧にもよりますが電源回路を実装する必要がなくなります。&lt;/p&gt;
&lt;p&gt;重ねるだけでなく、横方向につなげるリーフもあります。発想の幅が広がりますね。&lt;/p&gt;
&lt;h2 id=&#34;試してみた&#34;&gt;試してみた&lt;/h2&gt;
&lt;p&gt;加速度センサとLEDテープを組み合わせてLチカさせてみました。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/44f0d940-e547-66b5-bc20-020f64550d0d.gif&#34; alt=&#34;84472b66eb294f495cb1060bfda8c512.gif&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ハッカソンでは、犬につけてコミュニケーションを加速させることを目的としたウェアラブルデバイスを考えました（完成には程遠かったですが……）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/973f6f0e-7487-ba0d-2aef-e2f245826ef9.jpeg&#34; alt=&#34;42142867_568541853564424_1201723650328231936_n.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;このサイズだから出来ることを考えてみると、様々なところに応用できそう&lt;/strong&gt;ですね。&lt;/p&gt;
&lt;h2 id=&#34;そして平成最後の夏-twitterでバズった&#34;&gt;そして平成最後の夏、Twitterでバズった&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;「トリリオンノード・エンジンが凄い！」といったことをつぶやいてみたら、バズりました&lt;/strong&gt;。
小型で使いやすそうなマイコンに対する関心の高さがうかがえます。&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;ja&#34;&gt;&lt;p lang=&#34;ja&#34; dir=&#34;ltr&#34;&gt;今日つかったマイコン、やばやばなほど小さいんだけど、BLEも照度センサ、加速度センサ、温度センサ、スタックしていけばwifiモジュールもつくし、ボタン電池で駆動できて、Arduinoで開発できる。拡張も自由自在。スタックするだけでなく、横につなげてウェアラブルも可能。凄すぎるん😳😳😳 &lt;a href=&#34;https://t.co/DGqssgNkCF&#34;&gt;pic.twitter.com/DGqssgNkCF&lt;/a&gt;&lt;/p&gt; たくろーどん (@takudooon) &lt;a href=&#34;https://twitter.com/takudooon/status/1035474814696222722?ref_src=twsrc%5Etfw&#34;&gt;2018年8月31日&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;そしてバズったら&lt;strong&gt;「トリリオンノード・エンジンの普及に貢献した」としてハッカソンで特別賞を貰いました&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/aa12c34d-e3f2-a9df-92b8-f4eccb6befb9.jpeg&#34; alt=&#34;IMG_20181001_011537_066.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;人生、何が起こるかわからないですね。&lt;/p&gt;
&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;
&lt;p&gt;まだまだドキュメントの整備や使用例はこれからのようです。
来年から販売予定だそうなので、目が離せませんね！&lt;/p&gt;</description></item><item><title>気分はセレブ！手を叩くとディナーを出してくれるデバイスを作ろう</title><link>https://dotstud.io/blog/device-of-celebrity-dinner/</link><pubDate>Thu, 27 Sep 2018 12:34:10 +0900</pubDate><guid>https://dotstud.io/blog/device-of-celebrity-dinner/</guid><description>
&lt;p&gt;こんにちは、たいしょーです。&lt;/p&gt;
&lt;p&gt;いきなりですが、&lt;u&gt;高級なレストランで指パッチンや手を叩いて合図するとウェイターがディナーを出してくれるシーン&lt;/u&gt;を見たことありませんか？&lt;/p&gt;
&lt;h2 id=&#34;憧れのシーンを実現したい&#34;&gt;憧れのシーンを実現したい&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/259617/a7be6476-4059-9a5e-b3d6-9aeaff37db85.png&#34; alt=&#34;image&#34; /&gt;&lt;/p&gt;
&lt;p&gt;どこで見たかわからないけどなんとなく想像できる人も多いと思います。&lt;/p&gt;
&lt;p&gt;&lt;font size=&#34;4&#34;&gt;&lt;strong&gt;で、私はそのシーンをめっちゃ再現したいわけです。&lt;/strong&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;何も言わずとも合図を送るだけで自分の好みを把握したウェイターがスッとディナーを出してくれる&amp;hellip;そんなセレブ気分を味わいたい…………！
しかし、高級レストランに行くお金もなければ、行けたとしても恥ずかしくてそんなことやる勇気も出ないので自宅で再現してみましょう。&lt;/p&gt;
&lt;h2 id=&#34;設計&#34;&gt;設計&lt;/h2&gt;
&lt;p&gt;先ほどのイメージ画像通り「合図するとディナーを出してくれる」のが完成イメージですが、より具体的な実現方法を考えてみます。&lt;/p&gt;
&lt;p&gt;考えた結果、&lt;u&gt;手を叩いたことをセンサーで認識して、「&lt;strong&gt;Amazon Dash Button&lt;/strong&gt;」を押すことでディナーをネット注文することにしました。&lt;/u&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/259617/0af2d3f4-e6a0-9053-7048-c3968bef281e.jpeg&#34; alt=&#34;概要図&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;準備するもの&#34;&gt;準備するもの&lt;/h2&gt;
&lt;h3 id=&#34;準備するものリスト&#34;&gt;準備するものリスト&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;名前&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;個数&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;Amazon Dash Button　&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;Arduino Uno&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;&lt;a href=&#34;http://www.aitendo.com/product/4070&#34;&gt;拍手制御スイッチ [AKIT-107]&lt;/a&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;&lt;a href=&#34;http://www.aitendo.com/product/3277&#34;&gt;トランジスタ（S8050）&lt;/a&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;デジタル・マイクロサーボ SG90&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;ジャンパー線（オス）&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;最低6本&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;太い輪ゴム&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;半田付けセット&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;手を叩くことを認識するセンサー部分は、aitendo様に「&lt;strong&gt;拍手制御スイッチ&lt;/strong&gt;」というまんま目的に合った素敵キットがあったので注文しました。&lt;/p&gt;
&lt;h2 id=&#34;拍手制御スイッチを組み立てる&#34;&gt;拍手制御スイッチを組み立てる&lt;/h2&gt;
&lt;h3 id=&#34;半田付けする&#34;&gt;半田付けする&lt;/h3&gt;
&lt;p&gt;&lt;font color=&#34;Red&#34;, font size=&#34;3&#34;&gt;&lt;strong&gt;はやく半田付けをしたい人も、このセクションの【注意点!!】を読んでから半田付けをはじめてください。&lt;/strong&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;拍手制御スイッチは自分で部品を半田付けするキットで届くので組み立てていきましょう。&lt;/p&gt;
&lt;p&gt;半田付けの基本については村田製作所様のこちらのページが参考になります。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.murata.com/ja-jp/campaign/ads/japan/elekids/ele/craft/knack/soldering&#34;&gt;電子工作のコツ/はんだ付け | 村田製作所 - Murata&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;さて、今回用意した半田付けセットはこちら。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/259617/8f09c0ef-4ad5-ef26-4aed-b5a74f2b4fd3.jpeg&#34; alt=&#34;はんだセット&#34; /&gt;&lt;/p&gt;
&lt;p&gt;はんだは&lt;strong&gt;線径0.6mm&lt;/strong&gt;のもの、半田ごては温度を&lt;strong&gt;350度&lt;/strong&gt;に設定したものを用意しました。
洗濯バサミみたいな道具はヒートシンクといい、半田ごての熱から熱に弱い部品を守るものですが今回は使いませんでした。&lt;/p&gt;
&lt;p&gt;どの部品を基板のどこにつけるかなのですが、aitendo様のWebページに&lt;a href=&#34;http://www.aitendo.com/product/4070&#34;&gt;部品リストと回路図&lt;/a&gt;が載っているのでこれを見ながら組み立てて行くしかありません……。&lt;/p&gt;
&lt;p&gt;&lt;font size=&#34;4&#34;&gt;&lt;strong&gt;これが滅茶苦茶大変です。&lt;/strong&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;オススメのやり方は最初に部品リストの順番通りに部品を並べてから半田付けを始めることです。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/259617/7ff3ab54-423f-7402-cad2-c53d798258f9.jpeg&#34; alt=&#34;部品並べ&#34; /&gt;&lt;/p&gt;
&lt;p&gt;抵抗などは下記のページで抵抗値を入力して5本色帯カラーコードに変換しながら照らし合わせると間違いづらいです。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.desmots.net/hitme/audio/iroobi.php&#34;&gt;抵抗 - カラーコード（4本・5本色帯）変換 - 計算ツール&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;font-color-red-注意点-font&#34;&gt;&lt;font color=&#34;red&#34;&gt;注意点!!&lt;/font&gt;&lt;/h3&gt;
&lt;p&gt;さて、いよいよ半田付け・・・&lt;strong&gt;と、ちょっと待ってください!!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;部品を整理したら&lt;font color=&#34;Red&#34;&gt;&lt;strong&gt;&lt;u&gt;Q4の場所につけるトランジスタ（S9014）をトランジスタ（S8050）に差し替えてください。&lt;/u&gt;&lt;/strong&gt;&lt;/font&gt;
組み立ててから気づいたのですが、ここの部品をすり替えないと組み上がった後正常に動作しません。（予備に2つ基板を買って試しましたがどちらも同じ結果でした）&lt;/p&gt;
&lt;p&gt;部品を差し替えたら今度こそ半田付けをします。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;電解コンデンサ、LED、ダイオード&lt;/strong&gt;は取り付け向きが決まっているので注意しましょう。
電解コンデンサ、LEDは2本ある足の長い方が+側。ダイオードは黒く模様がついている方向を基板の模様と合わせてください。&lt;/p&gt;
&lt;p&gt;無事、組み終わったものがこちらです。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/259617/7d0c5023-7edd-ee18-68de-ce8716f791c5.jpeg&#34; alt=&#34;センサ完成&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;試してみる&#34;&gt;試してみる&lt;/h3&gt;
&lt;p&gt;図のような簡単な回路を組んで、ちゃんと動くか試して見ましょう。
拍手スイッチの&lt;strong&gt;Power（入力電圧）は5Vではなく3.3V&lt;/strong&gt;であることに注意してください。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/259617/ff0c1050-c860-4a07-46e8-7ef7e59306d4.png&#34; alt=&#34;AKIT_TEST.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;font size=&#34;2&#34;&gt;&lt;u&gt;今回Fritzing用に拍手制御スイッチ（AKIT-107）のカスタムパーツを作りましたので&lt;a href=&#34;https://github.com/TakedaHiromasa/Fritzing/blob/master/aitendo_AKIT-107.fzpz&#34;&gt;こちら&lt;/a&gt;からDLできます。
よかったらどうぞ。&lt;/u&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;回路を組んだらセンサの上で手を叩いて見ます。手を叩くたびにLEDが点灯・消灯すれば成功です！&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/259617/50c1369b-9a73-538a-d7da-c8730fc0f0d0.gif&#34; alt=&#34;Claptest.gif&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;u&gt;（これが楽しくて、30分ぐらいセンサーの上で手を叩いてました。）&lt;/u&gt;&lt;/p&gt;
&lt;h2 id=&#34;サーボの原点合わせ&#34;&gt;サーボの原点合わせ&lt;/h2&gt;
&lt;p&gt;今回用意した「デジタル・マイクロサーボ SG90」は「Amazon Dash Button」を押すのに使います。まずはサーボの原点合わせを行いましょう。&lt;/p&gt;
&lt;p&gt;今回使用するSG90は0~180°まで回るのですが、買った初期状態ではどこを向いているのかわからないので原点として初めに&lt;strong&gt;90°&lt;/strong&gt;に位置合わせを行います。&lt;/p&gt;
&lt;p&gt;まず以下のようにサーボとArduinoを繋ぎましょう。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/259617/7de1f622-c738-1667-9575-601c877556e3.png&#34; alt=&#34;sarvo.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;そして以下のプログラムを書き込んで実行します。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;#include &amp;lt;Servo.h&amp;gt;
Servo myservo;
void setup() {
myservo.attach( 10 );
}
void loop() {
myservo.write( 90 );
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;これでサーボの原点が決まったので、付属のホーンを以下のように真上を向くようにつけます。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/259617/a66bca6c-f673-4f92-adea-23871a836489.jpeg&#34; alt=&#34;DSC_0577.JPG&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;全体の配線&#34;&gt;全体の配線&lt;/h3&gt;
&lt;p&gt;いよいよ全体の配線！
以下のように配線します。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/259617/16a09bda-31dc-1e91-ec16-cdaa9535296b.png&#34; alt=&#34;全体&#34; /&gt;&lt;/p&gt;
&lt;p&gt;「サーボ」と「Amazon Dash Button」は輪ゴムで合体させました。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/259617/aa85d4a4-ac2d-4800-dcfe-f248b70bbe7c.png&#34; alt=&#34;Screenshot_2018-09-17-00-05-37.png&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;プログラム&#34;&gt;プログラム&lt;/h3&gt;
&lt;p&gt;以下のプログラムを書き込みます。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;#include &amp;lt;Servo.h&amp;gt;
Servo myservo;
volatile int flag = 0;
void interruptsw()
{
flag = 1;
}
void setup() {
myservo.attach( 10 );
attachInterrupt(0, interruptsw, CHANGE);
}
void loop() {
if(flag == 1){
myservo.write( 45 );
delay(500);
flag = 0;
}else{
myservo.write( 90 );
}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;今回のプログラムのポイントは&lt;strong&gt;割り込み処理&lt;/strong&gt;と&lt;strong&gt;volatile&lt;/strong&gt;です。&lt;/p&gt;
&lt;h3 id=&#34;割り込み処理&#34;&gt;割り込み処理&lt;/h3&gt;
&lt;p&gt;割り込み処理とは簡単に言えば、&lt;strong&gt;「イベントが起こった時に、コンピュータがどんな処理をしていようと無理やり別の処理を割り込ませる」&lt;/strong&gt;というもの。&lt;/p&gt;
&lt;p&gt;今回のプログラムの場合&lt;strong&gt;attachInterrupt(0, interruptsw, CHANGE);&lt;/strong&gt;で、&lt;strong&gt;どのピンのどんなイベントを監視するか指定&lt;/strong&gt;しています。指定の仕方は、&lt;strong&gt;attachInterrupt([監視するピン], [割り込ませる処理], [反応するイベントの種類]);&lt;/strong&gt;です。&lt;/p&gt;
&lt;p&gt;Arduino Unoでは監視するピンは&lt;strong&gt;0か１&lt;/strong&gt;しか指定できなく、それぞれ&lt;strong&gt;pin2, pin3&lt;/strong&gt;に対応しています。&lt;/p&gt;
&lt;p&gt;今回のプログラムの&lt;strong&gt;attachInterrupt(0, interruptsw, CHANGE);&lt;/strong&gt;とは&lt;strong&gt;「&lt;font color=&#34;Red&#34;&gt;2pin&lt;/font&gt;の信号が&lt;font color=&#34;Red&#34;&gt;CHANGE&lt;/font&gt;（変化するたび）&lt;font color=&#34;Red&#34;&gt;interruptsw&lt;/font&gt;を実行してね」&lt;/strong&gt;という指定をしていることになります。&lt;/p&gt;
&lt;h3 id=&#34;volatile&#34;&gt;volatile&lt;/h3&gt;
&lt;p&gt;volatileとは&lt;strong&gt;「この変数に関係する部分は消さないで！」&lt;/strong&gt;という指定。&lt;/p&gt;
&lt;p&gt;どういうことかというと、プログラムをよく見てもらうと&lt;u&gt;volatileをつけているflagという変数はloop()の中で、何の計算にも使われていません（足すとか引くとか）。&lt;/u&gt;loop()の中では、&lt;strong&gt;if(flag == 1)&lt;/strong&gt;の部分でフラグが１になることを待っていますが、コンピュータはかしこい？ので、&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;flagはloop()の中で計算に使ってない&lt;/strong&gt;&lt;br&gt;&lt;/p&gt;
&lt;p&gt;↓&lt;br&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;計算に使ってないならflagの値が増えたり減ったりすることは一生ないんじゃね？&lt;/strong&gt;&lt;br&gt;&lt;/p&gt;
&lt;p&gt;↓&lt;br&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;じゃあ「flag == 1」になることはありえんね、無駄なんでif文消しまーす&lt;/strong&gt;&lt;br&gt;&lt;/p&gt;
&lt;p&gt;↓&lt;br&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;俺優秀☆&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;という具合に&lt;strong&gt;最悪の場合勝手にif文を消します&lt;/strong&gt;。
私たちからすれば「そこは割り込みが起こった時に1が代入されるんだけど・・・」と思いますがコンピュータは知ったこっちゃありません。ということで、計算には使ってないけど割り込みなどで確実に値が変化する変数については&lt;strong&gt;volatile&lt;/strong&gt;をつけて消されないようにしてあげます。&lt;/p&gt;
&lt;h2 id=&#34;実際に使ってみる&#34;&gt;実際に使ってみる&lt;/h2&gt;
&lt;p&gt;さて、難しい話はこれぐらいにして早速完成したデバイスを使ってみましょう！&lt;/p&gt;
&lt;p&gt;より雰囲気を出すために&lt;u&gt;フリー素材のおじさまウェイターの画像をA3用紙4枚刷りで印刷し、そこにデバイスを貼り付けました。&lt;/u&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/259617/f505fed2-0763-3db7-4e7c-6e9df474b17e.jpeg&#34; alt=&#34;DSC_0571.JPG&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;font size =&#34;4&#34;&gt;いざ起動・・・・！！！&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/XlFNMBB7lt4&#34; frameborder=&#34;0&#34; allow=&#34;autoplay; encrypted-media&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;&lt;font size =&#34;4&#34;&gt;&lt;strong&gt;無事、手を叩いただけでディナーが届きました！！！！！&lt;/strong&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;「シーチキン」の「Amazon Dash Button」を使ったのでシーチキンが届きました。今回使った拍手センサは使い方も簡単なので、他にも音で動くデバイスを作ってみると面白いと思います！&lt;/p&gt;
&lt;p&gt;それでは、みなさん良きセレブライフをー！&lt;/p&gt;</description></item><item><title>Clova CEKでのスキル開発の始め方〜Pythonで開発スタート編〜</title><link>https://dotstud.io/blog/clova-cek-python-tutorial/</link><pubDate>Sat, 15 Sep 2018 10:56:31 +0900</pubDate><guid>https://dotstud.io/blog/clova-cek-python-tutorial/</guid><description>
&lt;p&gt;こんにちは、&lt;a href=&#34;https://dotstud.io/members/n0bisuke&#34;&gt;n0bisuke&lt;/a&gt;です。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;#linebootawards&lt;/code&gt;のハッカソンで奈良先端科学技術大学院大学に来ています。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://linedev.connpass.com/event/96813/&#34;&gt;【9/15-16】奈良先端科学技術大学院大学ユビ研×LINE BOOT AWARDSハッカソン&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://dotstud.io/blog/clova-cek-nodejs-tutorial/&#34;&gt;前回&lt;/a&gt;はNode.jsでのチュートリアルを書きましたが、今回はPythonでのClovaの開発チュートリアルを書いていきます。&lt;/p&gt;
&lt;section class=&#34;link&#34; id=&#34;195&#34;&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;a href=&#34;https://dotstud.io/blog/clova-cek-nodejs-tutorial/&#34;&gt;&lt;/a&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/195/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;div class=&#34;link_detail&#34;&gt;
&lt;div class=&#34;link_title&#34;&gt;
Clova CEKでのスキル開発の始め方〜Node.jsで開発スタート編〜
&lt;/div&gt;
&lt;div class=&#34;link_date&#34;&gt;
2018-08-03
&lt;/div&gt;
&lt;div class=&#34;link_desc&#34;&gt;
Clova CEKのNode.jsチュートリアルです。カレースキルを作ります。
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;/section&gt;
&lt;p&gt;&lt;strong&gt;PythonとClovaの連携をとりあえずやりたい&lt;/strong&gt;って人向けです。&lt;/p&gt;
&lt;p&gt;Clovaってなんぞやって人はこちらの記事たちを先に読んでみてください。&lt;/p&gt;
&lt;section class=&#34;link&#34; id=&#34;185&#34;&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;a href=&#34;https://dotstud.io/blog/clova-ifttt-nefrybt-arduino/&#34;&gt;&lt;/a&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/185/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;div class=&#34;link_detail&#34;&gt;
&lt;div class=&#34;link_title&#34;&gt;
ClovaとNefryBT（ESP32）を連携させてみよう
&lt;/div&gt;
&lt;div class=&#34;link_date&#34;&gt;
2018-07-10
&lt;/div&gt;
&lt;div class=&#34;link_desc&#34;&gt;
Nefry BTを使って電子工作した勤怠システムとClovaを連携させてみました。
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;/section&gt;
&lt;p&gt;いわゆるClovaのAPIのことをCEKと呼ぶんですよ〜&lt;/p&gt;
&lt;section class=&#34;link&#34; id=&#34;186&#34;&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;a href=&#34;https://dotstud.io/blog/line-clova-skill-tutorial/&#34;&gt;&lt;/a&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/186/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;div class=&#34;link_detail&#34;&gt;
&lt;div class=&#34;link_title&#34;&gt;
本日リリース！LINE Clovaのスキル開発の始め方〜申請編〜 #clova #linebootawards #clova_cek
&lt;/div&gt;
&lt;div class=&#34;link_date&#34;&gt;
2018-07-12
&lt;/div&gt;
&lt;div class=&#34;link_desc&#34;&gt;
リリース直後ですが、LINEのAIアシスタントClovaでのスキル開発の始め方を紹介します！ LINE BOOT AWARDSで賞金1000万円も狙いましょ。
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;/section&gt;
&lt;p&gt;そもそも僕がPythonの使い方がイマイチ分かってないので抜けがある可能性高いのでコメントなどいただけたら幸いです。 -&amp;gt; @n0bisuke&lt;/p&gt;
&lt;h2 id=&#34;作るもの&#34;&gt;作るもの&lt;/h2&gt;
&lt;p&gt;今回、「&lt;strong&gt;倦怠期のカップルや夫婦のコミュニケーションを円滑にするスキル&lt;/strong&gt;」 という案が出ていたのでそれをネタにチュートリアルを進めてみたいと思います。&lt;/p&gt;
&lt;p&gt;旦那「&lt;strong&gt;妻の気分を教えて&lt;/strong&gt;」&lt;/p&gt;
&lt;p&gt;Clova「妻の気分はいい感じです。」&lt;/p&gt;
&lt;p&gt;これを作ってみます。会話のキッカケを増やしたり作ったりするスキルですね。&lt;/p&gt;
&lt;p&gt;完成はこんなイメージです。&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;blockquote class=&#34;instagram-media&#34; data-instgrm-captioned data-instgrm-permalink=&#34;https://www.instagram.com/p/Bnxv3E6BxYJ/?utm_source=ig_embed_loading&#34; data-instgrm-version=&#34;12&#34; style=&#34; background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:540px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);&#34;&gt;&lt;div style=&#34;padding:16px;&#34;&gt; &lt;a href=&#34;https://www.instagram.com/p/Bnxv3E6BxYJ/?utm_source=ig_embed_loading&#34; style=&#34; background:#FFFFFF; line-height:0; padding:0 0; text-align:center; text-decoration:none; width:100%;&#34; target=&#34;_blank&#34;&gt; &lt;div style=&#34; display: flex; flex-direction: row; align-items: center;&#34;&gt; &lt;div style=&#34;background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 40px; margin-right: 14px; width: 40px;&#34;&gt;&lt;/div&gt; &lt;div style=&#34;display: flex; flex-direction: column; flex-grow: 1; justify-content: center;&#34;&gt; &lt;div style=&#34; background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 100px;&#34;&gt;&lt;/div&gt; &lt;div style=&#34; background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 60px;&#34;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&#34;padding: 19% 0;&#34;&gt;&lt;/div&gt;&lt;div style=&#34;display:block; height:50px; margin:0 auto 12px; width:50px;&#34;&gt;&lt;svg width=&#34;50px&#34; height=&#34;50px&#34; viewBox=&#34;0 0 60 60&#34; version=&#34;1.1&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34; xmlns:xlink=&#34;http://www.w3.org/1999/xlink&#34;&gt;&lt;g stroke=&#34;none&#34; stroke-width=&#34;1&#34; fill=&#34;none&#34; fill-rule=&#34;evenodd&#34;&gt;&lt;g transform=&#34;translate(-511.000000, -20.000000)&#34; fill=&#34;#000000&#34;&gt;&lt;g&gt;&lt;path d=&#34;M556.869,30.41 C554.814,30.41 553.148,32.076 553.148,34.131 C553.148,36.186 554.814,37.852 556.869,37.852 C558.924,37.852 560.59,36.186 560.59,34.131 C560.59,32.076 558.924,30.41 556.869,30.41 M541,60.657 C535.114,60.657 530.342,55.887 530.342,50 C530.342,44.114 535.114,39.342 541,39.342 C546.887,39.342 551.658,44.114 551.658,50 C551.658,55.887 546.887,60.657 541,60.657 M541,33.886 C532.1,33.886 524.886,41.1 524.886,50 C524.886,58.899 532.1,66.113 541,66.113 C549.9,66.113 557.115,58.899 557.115,50 C557.115,41.1 549.9,33.886 541,33.886 M565.378,62.101 C565.244,65.022 564.756,66.606 564.346,67.663 C563.803,69.06 563.154,70.057 562.106,71.106 C561.058,72.155 560.06,72.803 558.662,73.347 C557.607,73.757 556.021,74.244 553.102,74.378 C549.944,74.521 548.997,74.552 541,74.552 C533.003,74.552 532.056,74.521 528.898,74.378 C525.979,74.244 524.393,73.757 523.338,73.347 C521.94,72.803 520.942,72.155 519.894,71.106 C518.846,70.057 518.197,69.06 517.654,67.663 C517.244,66.606 516.755,65.022 516.623,62.101 C516.479,58.943 516.448,57.996 516.448,50 C516.448,42.003 516.479,41.056 516.623,37.899 C516.755,34.978 517.244,33.391 517.654,32.338 C518.197,30.938 518.846,29.942 519.894,28.894 C520.942,27.846 521.94,27.196 523.338,26.654 C524.393,26.244 525.979,25.756 528.898,25.623 C532.057,25.479 533.004,25.448 541,25.448 C548.997,25.448 549.943,25.479 553.102,25.623 C556.021,25.756 557.607,26.244 558.662,26.654 C560.06,27.196 561.058,27.846 562.106,28.894 C563.154,29.942 563.803,30.938 564.346,32.338 C564.756,33.391 565.244,34.978 565.378,37.899 C565.522,41.056 565.552,42.003 565.552,50 C565.552,57.996 565.522,58.943 565.378,62.101 M570.82,37.631 C570.674,34.438 570.167,32.258 569.425,30.349 C568.659,28.377 567.633,26.702 565.965,25.035 C564.297,23.368 562.623,22.342 560.652,21.575 C558.743,20.834 556.562,20.326 553.369,20.18 C550.169,20.033 549.148,20 541,20 C532.853,20 531.831,20.033 528.631,20.18 C525.438,20.326 523.257,20.834 521.349,21.575 C519.376,22.342 517.703,23.368 516.035,25.035 C514.368,26.702 513.342,28.377 512.574,30.349 C511.834,32.258 511.326,34.438 511.181,37.631 C511.035,40.831 511,41.851 511,50 C511,58.147 511.035,59.17 511.181,62.369 C511.326,65.562 511.834,67.743 512.574,69.651 C513.342,71.625 514.368,73.296 516.035,74.965 C517.703,76.634 519.376,77.658 521.349,78.425 C523.257,79.167 525.438,79.673 528.631,79.82 C531.831,79.965 532.853,80.001 541,80.001 C549.148,80.001 550.169,79.965 553.369,79.82 C556.562,79.673 558.743,79.167 560.652,78.425 C562.623,77.658 564.297,76.634 565.965,74.965 C567.633,73.296 568.659,71.625 569.425,69.651 C570.167,67.743 570.674,65.562 570.82,62.369 C570.966,59.17 571,58.147 571,50 C571,41.851 570.966,40.831 570.82,37.631&#34;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div style=&#34;padding-top: 8px;&#34;&gt; &lt;div style=&#34; color:#3897f0; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:550; line-height:18px;&#34;&gt; View this post on Instagram&lt;/div&gt;&lt;/div&gt;&lt;div style=&#34;padding: 12.5% 0;&#34;&gt;&lt;/div&gt; &lt;div style=&#34;display: flex; flex-direction: row; margin-bottom: 14px; align-items: center;&#34;&gt;&lt;div&gt; &lt;div style=&#34;background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(0px) translateY(7px);&#34;&gt;&lt;/div&gt; &lt;div style=&#34;background-color: #F4F4F4; height: 12.5px; transform: rotate(-45deg) translateX(3px) translateY(1px); width: 12.5px; flex-grow: 0; margin-right: 14px; margin-left: 2px;&#34;&gt;&lt;/div&gt; &lt;div style=&#34;background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(9px) translateY(-18px);&#34;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&#34;margin-left: 8px;&#34;&gt; &lt;div style=&#34; background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 20px; width: 20px;&#34;&gt;&lt;/div&gt; &lt;div style=&#34; width: 0; height: 0; border-top: 2px solid transparent; border-left: 6px solid #f4f4f4; border-bottom: 2px solid transparent; transform: translateX(16px) translateY(-4px) rotate(30deg)&#34;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&#34;margin-left: auto;&#34;&gt; &lt;div style=&#34; width: 0px; border-top: 8px solid #F4F4F4; border-right: 8px solid transparent; transform: translateY(16px);&#34;&gt;&lt;/div&gt; &lt;div style=&#34; background-color: #F4F4F4; flex-grow: 0; height: 12px; width: 16px; transform: translateY(-4px);&#34;&gt;&lt;/div&gt; &lt;div style=&#34; width: 0; height: 0; border-top: 8px solid #F4F4F4; border-left: 8px solid transparent; transform: translateY(-4px) translateX(8px);&#34;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/a&gt; &lt;p style=&#34; margin:8px 0 0 0; padding:0 4px;&#34;&gt; &lt;a href=&#34;https://www.instagram.com/p/Bnxv3E6BxYJ/?utm_source=ig_embed_loading&#34; style=&#34; color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;&#34; target=&#34;_blank&#34;&gt;Pythonで書いてみた #倦怠期 #linebootawards #clova_cek&lt;/a&gt;&lt;/p&gt; &lt;p style=&#34; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;&#34;&gt;&lt;a href=&#34;https://www.instagram.com/n0bisuke/?utm_source=ig_embed_loading&#34; style=&#34; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px;&#34; target=&#34;_blank&#34;&gt; n0bisuke&lt;/a&gt;さん(@n0bisuke)がシェアした投稿 - &lt;time style=&#34; font-family:Arial,sans-serif; font-size:14px; line-height:17px;&#34; datetime=&#34;2018-09-16T06:42:59+00:00&#34;&gt;2018年 9月月15日午後11時42分PDT&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt; &lt;script async defer src=&#34;//www.instagram.com/embed.js&#34;&gt;&lt;/script&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;中身はハローワールド的な内容なので単純にClovaに喋ってもらう入門だと思ってください。&lt;/p&gt;
&lt;h2 id=&#34;環境&#34;&gt;環境&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Clova Friends Mini (サリー)&lt;/li&gt;
&lt;li&gt;Python v2.7.10&lt;/li&gt;
&lt;li&gt;Google Chrome / macOS Sierra v10.12&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;$ python -v
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;でPythonのバージョン調べられます。&lt;/p&gt;
&lt;h2 id=&#34;使い始めの申請&#34;&gt;使い始めの申請&lt;/h2&gt;
&lt;p&gt;まずは、&lt;strong&gt;&lt;a href=&#34;https://developers.line.me/console/register/clova-skill/provider/&#34;&gt;新規チャンネル作成&lt;/a&gt;&lt;/strong&gt;からチャンネルを作成します。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://dotstud.io/blog/line-clova-skill-tutorial/&#34;&gt;こちらの記事&lt;/a&gt;を参照して、利用開始できる状態にしましょう。&lt;/p&gt;
&lt;p&gt;「&lt;a href=&#34;https://dotstud.io/blog/line-clova-skill-tutorial/#チャネルの基本設定&#34;&gt;チャネルの基本設定&lt;/a&gt;」の箇所まで進められばOKです。&lt;/p&gt;
&lt;section class=&#34;link&#34; id=&#34;186&#34;&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;a href=&#34;https://dotstud.io/blog/line-clova-skill-tutorial/&#34;&gt;&lt;/a&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/186/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;div class=&#34;link_detail&#34;&gt;
&lt;div class=&#34;link_title&#34;&gt;
本日リリース！LINE Clovaのスキル開発の始め方〜申請編〜 #clova #linebootawards #clova_cek
&lt;/div&gt;
&lt;div class=&#34;link_date&#34;&gt;
2018-07-12
&lt;/div&gt;
&lt;div class=&#34;link_desc&#34;&gt;
リリース直後ですが、LINEのAIアシスタントClovaでのスキル開発の始め方を紹介します！ LINE BOOT AWARDSで賞金1000万円も狙いましょ。
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;/section&gt;
&lt;p&gt;ちなみに今回は以下の情報にしてみました。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;スキル名: 倦怠期Clova&lt;/li&gt;
&lt;li&gt;呼び出し名（メイン）: 倦怠期&lt;/li&gt;
&lt;li&gt;呼び出し名（サブ）: ケンタッキー&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/6ba0c91a586bd8f3b20b8a7d5b334219.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;「倦怠期（けんたいき）」と言う言葉が発話した際に「ケンタッキー」と誤認識される可能性があったので&lt;code&gt;呼び出し名（サブ）&lt;/code&gt;にケンタッキーを登録しています。（笑うところ）&lt;/p&gt;
&lt;h2 id=&#34;対話モデルの作成&#34;&gt;対話モデルの作成&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://clova-developers.line.me/cek/#/list&#34;&gt;Clova Developer Center&lt;/a&gt;にアクセスします。&lt;/p&gt;
&lt;p&gt;作成中スキルの一覧が表示されます。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/508750a1d4f916de4d0167b71c0a133e.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;作成対象となるスキル名の&lt;code&gt;対話モデル&lt;/code&gt;の&lt;code&gt;修正&lt;/code&gt;を選択します。&lt;/p&gt;
&lt;p&gt;すると別ウィンドウが開き、対話モデルの編集画面になります。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/56f974e19cac116d82c4bceb69ef7361.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;なぜここだけ別ウィンドウなのかは永遠の謎。&lt;/p&gt;
&lt;h3 id=&#34;インテントとスロット&#34;&gt;インテントとスロット&lt;/h3&gt;
&lt;p&gt;インテントとスロットを設定していきます。&lt;/p&gt;
&lt;p&gt;個人的にはインテントとスロットの概念を理解すればあとはBOT開発などとそこまで変わらないような印象があります。&lt;/p&gt;
&lt;p&gt;説明はあってるのか不安なので、スマートスピーカー開発に慣れてる人が見て変だったら教えてください笑&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://clova-developers.line.me/guide/#/Design/Design_Guideline_For_Extension.md#Intent&#34;&gt;公式ドキュメントのこの辺&lt;/a&gt;を見ると詳しく載っています。&lt;/p&gt;
&lt;h3 id=&#34;スロット&#34;&gt;スロット&lt;/h3&gt;
&lt;p&gt;スロットはスキル内で扱う名詞情報です。&lt;/p&gt;
&lt;p&gt;今回の「&lt;strong&gt;妻の気分を教えて&lt;/strong&gt;」という発話を認識させる為に&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;気分&lt;/strong&gt;という名詞（スロット）を登録しましょう。&lt;/p&gt;
&lt;p&gt;また、「妻の欲しい物を知りたい」というケースに対応するために&lt;strong&gt;欲しい物&lt;/strong&gt;というスロットを登録します。&lt;/p&gt;
&lt;p&gt;また、その名詞（スロット）はどういう属性かという上位概念を&lt;strong&gt;スロットタイプ&lt;/strong&gt;として設定します。&lt;/p&gt;
&lt;p&gt;では実際に左側のメニューに&lt;code&gt;カスタムスロットタイプ&lt;/code&gt;という項目があるので、そこの&lt;code&gt;+ボタン&lt;/code&gt;を押します。&lt;/p&gt;
&lt;p&gt;ここでスロットタイプのタイトルを決めますが、気分や欲しい物や妻がどういった状態かを知りたいので、ここでは&lt;code&gt;status&lt;/code&gt;（ステータス）としました。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;書いてて今回の例が少し分かりにくいかなぁと思ってるのですが、Node.jsのチュートリアルでは「秋葉原のカレー屋を教えて」という例文を利用していて、秋葉原や、神田、神保町といった駅名や地名、場所にちなんだ単語をスロットに登録しました。この場合は&lt;code&gt;area&lt;/code&gt;（エリア）というスロットタイプにしました。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/b18a2045e972093a352e63cb95bee4d5.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;statusとスロットタイプに入力して作成を押すと、statusというスロットタイプが作成されます。&lt;/p&gt;
&lt;p&gt;僕みたいに覚えにくい人は&lt;code&gt;スロットタイプ=単語群&lt;/code&gt;だと思えば良いと思います。&lt;/p&gt;
&lt;p&gt;次にスロット登録です。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;スロットの新たな代表語を入力&lt;/code&gt;の箇所に&lt;code&gt;気分&lt;/code&gt;と入力し、同義語の箇所に読み方や別名を入力します。こうすることで&lt;code&gt;きぶん&lt;/code&gt;などの名称でも認識してくれるようになります。&lt;code&gt;欲しい物&lt;/code&gt;の場合は&lt;code&gt;欲しいもの&lt;/code&gt;や&lt;code&gt;ほしいもの&lt;/code&gt;なども登録してあげると認識精度が上がります。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/7b0d59e92c34a5609fbd8903989f4e8e.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;同義語はカンマで区切って複数登録できます。&lt;/p&gt;
&lt;p&gt;最後に&lt;code&gt;保存&lt;/code&gt;を押してスロットはOKです。個人的には難所50%クリアです。&lt;/p&gt;
&lt;h3 id=&#34;インテント&#34;&gt;インテント&lt;/h3&gt;
&lt;p&gt;インテントは会話や命令の種類です。&lt;/p&gt;
&lt;p&gt;今回の「&lt;strong&gt;妻の気分を教えて&lt;/strong&gt;」は妻の状態を知りたいという命令だと思うので&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;WifeStatusIntent&lt;/strong&gt;（ワイフステータス）を作ってみます。&lt;/p&gt;
&lt;p&gt;メニュー左の&lt;code&gt;カスタムインテント&lt;/code&gt;箇所の&lt;code&gt;+ボタン&lt;/code&gt;を選択し、インテント名を入力して進みます。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/d65b99b0490c65806fd0e569d94ae584.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;次に&lt;code&gt;サンプル発話リスト&lt;/code&gt;箇所に例文を入れていきます。&lt;/p&gt;
&lt;p&gt;先ほどから何回も出ている「&lt;strong&gt;妻の気分を教えて&lt;/strong&gt;」をここに入力してエンターを押しましょう。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/336651e051d1bbcd0dd0a69815ff4780.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;さらに&lt;code&gt;気分&lt;/code&gt;の部分が先ほど登録したスロット部分になるので、&lt;strong&gt;この文章のここがスロットだよ&lt;/strong&gt;ということを登録してあげます。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;気分&lt;/code&gt;をドラッグするとスロット登録が出来るフォームが出てくるのでそこで&lt;code&gt;status&lt;/code&gt;と入力してスロット名を登録します。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/48ede67edc49b7f57bfe37a6369c998f.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;さらにスロットタイプのプルダウンメニューが出てくるので先ほど作成した&lt;code&gt;status&lt;/code&gt;スロットを紐付けします。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/5c22f277ffdd0645bce54882b2650bcc.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;最後に保存を押しましょう。&lt;/p&gt;
&lt;h2 id=&#34;対話モデルのビルド&#34;&gt;対話モデルのビルド&lt;/h2&gt;
&lt;p&gt;ここまで来たら左上の&lt;code&gt;ビルド&lt;/code&gt;ボタンを押してひとまず完了です。&lt;/p&gt;
&lt;p&gt;ここ、少し時間かかります。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/e4f16af4107c3274d8e84bfefcec150c.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;1~2分程度掛かります。昔は10~20分程掛かってたのですが、アップデートで凄く短縮されました。&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;ja&#34;&gt;&lt;p lang=&#34;ja&#34; dir=&#34;ltr&#34;&gt;Clova Developer Centerにおいて作成する対話モデルのビルド時間が大幅に削減されました、ぜひお試しください！これまでご不便をおかけしてごめんなさい、まだまだ色々ありますが少しずつ改善重ねていきますので、皆様と一緒にClovaを育てていければ嬉しいです！よろしくお願いします！！！&lt;a href=&#34;https://twitter.com/hashtag/Clova_CEK?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#Clova_CEK&lt;/a&gt; &lt;a href=&#34;https://t.co/1H0zKpevDy&#34;&gt;pic.twitter.com/1H0zKpevDy&lt;/a&gt;&lt;/p&gt; LINE_DEV (@LINE_DEV) &lt;a href=&#34;https://twitter.com/LINE_DEV/status/1035340611233013760?ref_src=twsrc%5Etfw&#34;&gt;2018年8月31日&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;ただ待つのも時間が勿体無いので次の準備にかかりましょう。&lt;/p&gt;
&lt;h2 id=&#34;pythonの環境準備&#34;&gt;Pythonの環境準備&lt;/h2&gt;
&lt;p&gt;お待たせしました。コード書いていきましょう。&lt;/p&gt;
&lt;p&gt;PythonのSDKがあるのでこちらを使っていきます。&lt;/p&gt;
&lt;p&gt;Python以外の言語のSDKも現時点では&lt;a href=&#34;https://clova-developers.line.me/guide/#/CEK/Guides/Clova_CEK_SDK.md&#34;&gt;Swift/Kotlin/Elixir/Java/Go/Node.js&lt;/a&gt;のSDKが出ています。&lt;/p&gt;
&lt;p&gt;Pythonのインストールがまだな方は公式サイトなどからDLしてインストールして下さい。&lt;/p&gt;
&lt;p&gt;MacだとデフォルトでPythonがインストールされているのでインストールに関してはそこまで問題無いと思います。&lt;/p&gt;
&lt;p&gt;ターミナル操作が不安な方はこちらの記事を先に見ておきましょう。&lt;/p&gt;
&lt;section class=&#34;link&#34; id=&#34;158&#34;&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;a href=&#34;https://dotstud.io/blog/how-to-use-cli/&#34;&gt;&lt;/a&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/158/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;div class=&#34;link_detail&#34;&gt;
&lt;div class=&#34;link_title&#34;&gt;
【Mac向け】「黒い画面」の苦手意識を克服しよう！コマンドラインインタフェースの基本操作
&lt;/div&gt;
&lt;div class=&#34;link_date&#34;&gt;
2018-04-09
&lt;/div&gt;
&lt;div class=&#34;link_desc&#34;&gt;
Macユーザ向けコマンドラインインタフェースの使い方！実は難しくない「黒い画面」の操作方法を覚えていきましょう。
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;/section&gt;
&lt;section class=&#34;link&#34; id=&#34;161&#34;&gt;
&lt;/section&gt;
&lt;h3 id=&#34;準備&#34;&gt;準備&lt;/h3&gt;
&lt;p&gt;以下のコマンドで進めていきます。基本Mac向けなのでWinな人は適宜読み替えをお願いします。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;pipのインストール&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;pipはNode.jsでいうnpmのようなPython向けのモジュールの管理ツールです。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo easy_install pip
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Flaskのインストール&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Python向けのマイクロフレームワークのFlaskをpip経由でインストールします。
Node.jsでいうExpressのようなものです。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ pip install Flask
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;clova-cek-sdk&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Clova CEKのPython SDKをインストールします。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ pip install clova-cek-sdk
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;server.pyを作成&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;フォルダ作成と準備です。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ mkdir clova_kentaiki
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;$ cd clova_kentaiki
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;server.py&lt;/code&gt;を作成してプログラムを書いていきましょう。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ touch server.py
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;コードを書いていく&#34;&gt;コードを書いていく&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;server.py&lt;/code&gt;に以下のコードを記述します。&lt;/p&gt;
&lt;p&gt;また、スキルの基本情報を登録した際の&lt;code&gt;Extention ID&lt;/code&gt;を利用するので確認しておきましょう。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/line/clova-cek-sdk-python-sample/blob/master/home-extension.py&#34;&gt;公式のサンプル&lt;/a&gt;よりもシンプルにしています。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;以下のコードのapplication_id=&amp;ldquo;MY EXTENSION ID&amp;rdquo;の箇所を自分のExtension IDに書き換えましょう&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# coding: utf-8
from flask import Flask, request, jsonify
import cek
app = Flask(__name__)
clova = cek.Clova(
application_id=&amp;quot;MY EXTENSION ID&amp;quot;,
default_language=&amp;quot;ja&amp;quot;,
debug_mode=True)
# /clova に対してのPOSTリクエストを受け付けるサーバーを立てる
@app.route(&#39;/clova&#39;, methods=[&#39;POST&#39;])
def my_service():
body_dict = clova.route(body=request.data, header=request.headers)
response = jsonify(body_dict)
response.headers[&#39;Content-Type&#39;] = &#39;application/json;charset-UTF-8&#39;
return response
# 起動時の処理
@clova.handle.launch
def launch_request_handler(clova_request):
welcome_japanese = cek.Message(message=&amp;quot;調子どうだい？&amp;quot;, language=&amp;quot;ja&amp;quot;)
response = clova.response([welcome_japanese])
return response
# WifeStatusIntentの発火箇所
@clova.handle.intent(&amp;quot;WifeStatusIntent&amp;quot;)
def wife_status_handler(clova_request):
print(&amp;quot;ワイフインテント&amp;quot;)
message_japanese = cek.Message(message=&amp;quot;奥さんの気分はいい感じです&amp;quot;, language=&amp;quot;ja&amp;quot;)
response = clova.response([message_japanese])
return response
# 終了時
@clova.handle.end
def end_handler(clova_request):
# Session ended, this handler can be used to clean up
logger.info(&amp;quot;Session ended.&amp;quot;)
# 認識できなかった場合
@clova.handle.default
def default_handler(request):
return clova.response(&amp;quot;Sorry I don&#39;t understand! Could you please repeat?&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;起動&#34;&gt;起動&lt;/h3&gt;
&lt;p&gt;記述出来たら以下のコマンドで起動しましょう。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ FLASK_APP=server.py flask run
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt; * Serving Flask app &amp;quot;server.py&amp;quot;
* Environment: production
WARNING: Do not use the development server in a production environment.
Use a production WSGI server instead.
* Debug mode: off
* Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;で起動です。エラーがなければとりあえずOKです。&lt;/p&gt;
&lt;p&gt;5000番ポートでサーバーが起動します。&lt;/p&gt;
&lt;h2 id=&#34;ngrokでホスティングせずに疎通確認&#34;&gt;ngrokでホスティングせずに疎通確認&lt;/h2&gt;
&lt;p&gt;ngrokというトンネリングツールを使ってローカル開発が出来るようにしましょう。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;参考: &lt;a href=&#34;https://ngrok.com/&#34;&gt;https://ngrok.com/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;https://camo.qiitausercontent.com/f97d3442e199ccc5272c34c3eb5a964348660a9a/68747470733a2f2f6e67726f6b2e636f6d2f7374617469632f696d672f776562686f6f6b732e706e67&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;LINE BOTの開発でも同様ですが、&lt;strong&gt;通常はHTTPS対応したサーバーにプログラムをホスティングしてClovaと通信させます。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HTTPS対応したサーバーを用意するのは骨が折れるのとホスティングして失敗するとエラー修正が大変なので、ローカル開発で最初は挙動確認するのが個人的にはおすすめです。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ngrokを使うことでローカル環境をホスティング環境のようにエミュレート出来るイメージです。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;参考: &lt;a href=&#34;https://qiita.com/n0bisuke/items/ceaa09ef8898bee8369d&#34;&gt;1時間でLINE BOTを作るハンズオン&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;$ npm i -g ngrok
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;これでインストール完了です。&lt;/p&gt;
&lt;p&gt;npmを入れてない人はbrew経由でもインストール可能です。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ brew install ngrok
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;以下のコマンドで利用しますが、ngrokがターミナル占有してしまうので、Pythonを起動するターミナルとは別で立ち上げましょう。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ ngrok http 5000
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/50a45788dbc18229269745fa1f7d35e5.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;こんな雰囲気。右がngrok、左がPythonです。&lt;/p&gt;
&lt;p&gt;ngrokを起動すると&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Forwarding https://xxxxxxx.ngrok.io -&amp;gt; localhost:5000
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;といった項目が表示されます。&lt;/p&gt;
&lt;p&gt;この&lt;code&gt;https://xxxxxxx.ngrok.io&lt;/code&gt;に&lt;code&gt;/clova&lt;/code&gt;を追加したアドレスをClovaのサーバー設定の&lt;code&gt;ExtensionサーバーのURL&lt;/code&gt;に記載して保存しましょう。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/1e2feeed00daeb97553dfc463b6356ef.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;https://xxxxxxx.ngrok.io/clova&lt;/code&gt;となります。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;xxxxxx&lt;/code&gt;の箇所はngrokを再起動すると変わってしまうのでその際は再度サーバー設定を更新してください。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;これでClovaに話しかけると手元（ローカル環境）のPythonプログラムまでリクエストが来ます。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;テスターでテスト&#34;&gt;テスターでテスト&lt;/h2&gt;
&lt;p&gt;直接話しかけても良いのですが、テスターを使ってみましょう。&lt;/p&gt;
&lt;p&gt;対話モデルのダッシュボードに戻ります。&lt;/p&gt;
&lt;p&gt;たぶんビルドは完了してますよね。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;テスト&lt;/code&gt;を選択し、&lt;code&gt;ユーザーのサンプル発話をテスト&lt;/code&gt;の箇所に「&lt;strong&gt;妻の気分を教えて&lt;/strong&gt;」と入力し&lt;code&gt;テストボタン&lt;/code&gt;押しましょう。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/7caed17382c5ac0ca00ad1d51633dc40.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Pythonを起動させているターミナル側で&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ワイフインテント&lt;/code&gt;と表示されていればOKです。&lt;/p&gt;
&lt;p&gt;疎通確認が出来ました！&lt;/p&gt;
&lt;p&gt;コードでいうと&lt;code&gt;@clova.handle.intent(&amp;quot;WifeStatusIntent&amp;quot;)&lt;/code&gt;の箇所までリクエストが通ってることになります。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# WifeStatusIntentの発火箇所
@clova.handle.intent(&amp;quot;WifeStatusIntent&amp;quot;)
def wife_status_handler(clova_request):
print(&amp;quot;ワイフインテント&amp;quot;)
message_japanese = cek.Message(message=&amp;quot;奥さんの気分はいい感じです&amp;quot;, language=&amp;quot;ja&amp;quot;)
response = clova.response([message_japanese])
return response
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;エラーが出る場合&#34;&gt;エラーが出る場合&lt;/h3&gt;
&lt;p&gt;エラーが出た人は&lt;code&gt;server.py&lt;/code&gt;内のExtension IDの設定を忘れている可能性が高いので再度チェックしてみましょう。&lt;/p&gt;
&lt;h2 id=&#34;clovaにしゃべらせる&#34;&gt;Clovaにしゃべらせる&lt;/h2&gt;
&lt;p&gt;最後です！&lt;/p&gt;
&lt;h3 id=&#34;スロット情報も取得してみる&#34;&gt;スロット情報も取得してみる&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;server.py&lt;/code&gt;の&lt;code&gt;@clova.handle.intent(&amp;quot;WifeStatusIntent&amp;quot;)&lt;/code&gt;の箇所をまるっと差し替えてみましょう。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# WifeStatusIntentの発火箇所
@clova.handle.intent(&amp;quot;WifeStatusIntent&amp;quot;)
def wife_status_handler(clova_request):
print(&amp;quot;ワイフインテント&amp;quot;)
slot = clova_request.slot_value(&amp;quot;status&amp;quot;)
message_japanese = cek.Message(message=&amp;quot;もう一回言って下さい&amp;quot;, language=&amp;quot;ja&amp;quot;)
if u&amp;quot;気分&amp;quot; in slot:
message_japanese = cek.Message(message=&amp;quot;奥さんの気分はいい感じです&amp;quot;, language=&amp;quot;ja&amp;quot;)
elif u&amp;quot;欲しい物&amp;quot; in slot:
message_japanese = cek.Message(message=&amp;quot;奥さんは旅行に行きたがっています&amp;quot;, language=&amp;quot;ja&amp;quot;)
response = clova.response([message_japanese])
return response
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;clova_request.slot_value(&amp;quot;status&amp;quot;)&lt;/code&gt;にスロット情報が入っているので、あとはif文で判定して喋らせる内容を変更していきます。&lt;/p&gt;
&lt;p&gt;最後の&lt;code&gt;response = clova.response([message_japanese])&lt;/code&gt;を呼ぶことでClovaが喋ってくれます。&lt;/p&gt;
&lt;p&gt;ここまでをまとめたコードは&lt;a href=&#34;https://gist.github.com/n0bisuke/3755c3faaf1ad0fe621af8eaffb9b63f&#34;&gt;こちら&lt;/a&gt;です。&lt;/p&gt;
&lt;h2 id=&#34;実機テスト&#34;&gt;実機テスト&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;server.py&lt;/code&gt;のサーバーを再起動して試してみましょう。&lt;/p&gt;
&lt;p&gt;起動する際は、&lt;strong&gt;{ウェイクワード} -&amp;gt; {スキル名}を起動して&lt;/strong&gt;となります。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ウェイクワード: Clovaの呼び名&lt;/li&gt;
&lt;li&gt;スキル名: 基本情報に登録したスキル名&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;その後、設定したインテントを発話しましょう。&lt;/p&gt;
&lt;p&gt;ということで、人によって違うのですが僕の場合は&lt;code&gt;ねぇ、Clova&lt;/code&gt;がウェイクワードになっていて、今回は&lt;code&gt;倦怠期&lt;/code&gt;というスキル名でした。&lt;/p&gt;
&lt;p&gt;のびすけ: 「&lt;strong&gt;ねぇクローバ&lt;/strong&gt;」&lt;/p&gt;
&lt;p&gt;Clova: 「ポンっ（LEDが緑色に光る）」&lt;/p&gt;
&lt;p&gt;のびすけ: 「&lt;strong&gt;倦怠期を起動して&lt;/strong&gt;」&lt;/p&gt;
&lt;p&gt;Clova: 「調子どうだい？」 (← server.pyで記述している)&lt;/p&gt;
&lt;p&gt;Clova: 「ポンっ（LEDが緑色に光る）」&lt;/p&gt;
&lt;p&gt;のびすけ:「&lt;strong&gt;妻の気分を教えて&lt;/strong&gt;」&lt;/p&gt;
&lt;p&gt;Clova: 「奥さんの気分はいい感じです」 (← server.pyで記述している)&lt;/p&gt;
&lt;p&gt;のびすけ:「&lt;strong&gt;妻の欲しい物を教えて&lt;/strong&gt;」&lt;/p&gt;
&lt;p&gt;Clova: 「奥さんは旅行に行きたがっています」 (← server.pyで記述している)&lt;/p&gt;
&lt;p&gt;という感じの使い方になります。&lt;/p&gt;
&lt;p&gt;完成動画はこの記事の上部を確認して下さい。↑&lt;/p&gt;
&lt;p&gt;ちなみに、妻が状況を登録するときはこんな感じでやる模様です。&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;blockquote class=&#34;instagram-media&#34; data-instgrm-captioned data-instgrm-permalink=&#34;https://www.instagram.com/p/BnxRaMqhLIZ/?utm_source=ig_embed_loading&#34; data-instgrm-version=&#34;12&#34; style=&#34; background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:540px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);&#34;&gt;&lt;div style=&#34;padding:16px;&#34;&gt; &lt;a href=&#34;https://www.instagram.com/p/BnxRaMqhLIZ/?utm_source=ig_embed_loading&#34; style=&#34; background:#FFFFFF; line-height:0; padding:0 0; text-align:center; text-decoration:none; width:100%;&#34; target=&#34;_blank&#34;&gt; &lt;div style=&#34; display: flex; flex-direction: row; align-items: center;&#34;&gt; &lt;div style=&#34;background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 40px; margin-right: 14px; width: 40px;&#34;&gt;&lt;/div&gt; &lt;div style=&#34;display: flex; flex-direction: column; flex-grow: 1; justify-content: center;&#34;&gt; &lt;div style=&#34; background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 100px;&#34;&gt;&lt;/div&gt; &lt;div style=&#34; background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 60px;&#34;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&#34;padding: 19% 0;&#34;&gt;&lt;/div&gt;&lt;div style=&#34;display:block; height:50px; margin:0 auto 12px; width:50px;&#34;&gt;&lt;svg width=&#34;50px&#34; height=&#34;50px&#34; viewBox=&#34;0 0 60 60&#34; version=&#34;1.1&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34; xmlns:xlink=&#34;http://www.w3.org/1999/xlink&#34;&gt;&lt;g stroke=&#34;none&#34; stroke-width=&#34;1&#34; fill=&#34;none&#34; fill-rule=&#34;evenodd&#34;&gt;&lt;g transform=&#34;translate(-511.000000, -20.000000)&#34; fill=&#34;#000000&#34;&gt;&lt;g&gt;&lt;path d=&#34;M556.869,30.41 C554.814,30.41 553.148,32.076 553.148,34.131 C553.148,36.186 554.814,37.852 556.869,37.852 C558.924,37.852 560.59,36.186 560.59,34.131 C560.59,32.076 558.924,30.41 556.869,30.41 M541,60.657 C535.114,60.657 530.342,55.887 530.342,50 C530.342,44.114 535.114,39.342 541,39.342 C546.887,39.342 551.658,44.114 551.658,50 C551.658,55.887 546.887,60.657 541,60.657 M541,33.886 C532.1,33.886 524.886,41.1 524.886,50 C524.886,58.899 532.1,66.113 541,66.113 C549.9,66.113 557.115,58.899 557.115,50 C557.115,41.1 549.9,33.886 541,33.886 M565.378,62.101 C565.244,65.022 564.756,66.606 564.346,67.663 C563.803,69.06 563.154,70.057 562.106,71.106 C561.058,72.155 560.06,72.803 558.662,73.347 C557.607,73.757 556.021,74.244 553.102,74.378 C549.944,74.521 548.997,74.552 541,74.552 C533.003,74.552 532.056,74.521 528.898,74.378 C525.979,74.244 524.393,73.757 523.338,73.347 C521.94,72.803 520.942,72.155 519.894,71.106 C518.846,70.057 518.197,69.06 517.654,67.663 C517.244,66.606 516.755,65.022 516.623,62.101 C516.479,58.943 516.448,57.996 516.448,50 C516.448,42.003 516.479,41.056 516.623,37.899 C516.755,34.978 517.244,33.391 517.654,32.338 C518.197,30.938 518.846,29.942 519.894,28.894 C520.942,27.846 521.94,27.196 523.338,26.654 C524.393,26.244 525.979,25.756 528.898,25.623 C532.057,25.479 533.004,25.448 541,25.448 C548.997,25.448 549.943,25.479 553.102,25.623 C556.021,25.756 557.607,26.244 558.662,26.654 C560.06,27.196 561.058,27.846 562.106,28.894 C563.154,29.942 563.803,30.938 564.346,32.338 C564.756,33.391 565.244,34.978 565.378,37.899 C565.522,41.056 565.552,42.003 565.552,50 C565.552,57.996 565.522,58.943 565.378,62.101 M570.82,37.631 C570.674,34.438 570.167,32.258 569.425,30.349 C568.659,28.377 567.633,26.702 565.965,25.035 C564.297,23.368 562.623,22.342 560.652,21.575 C558.743,20.834 556.562,20.326 553.369,20.18 C550.169,20.033 549.148,20 541,20 C532.853,20 531.831,20.033 528.631,20.18 C525.438,20.326 523.257,20.834 521.349,21.575 C519.376,22.342 517.703,23.368 516.035,25.035 C514.368,26.702 513.342,28.377 512.574,30.349 C511.834,32.258 511.326,34.438 511.181,37.631 C511.035,40.831 511,41.851 511,50 C511,58.147 511.035,59.17 511.181,62.369 C511.326,65.562 511.834,67.743 512.574,69.651 C513.342,71.625 514.368,73.296 516.035,74.965 C517.703,76.634 519.376,77.658 521.349,78.425 C523.257,79.167 525.438,79.673 528.631,79.82 C531.831,79.965 532.853,80.001 541,80.001 C549.148,80.001 550.169,79.965 553.369,79.82 C556.562,79.673 558.743,79.167 560.652,78.425 C562.623,77.658 564.297,76.634 565.965,74.965 C567.633,73.296 568.659,71.625 569.425,69.651 C570.167,67.743 570.674,65.562 570.82,62.369 C570.966,59.17 571,58.147 571,50 C571,41.851 570.966,40.831 570.82,37.631&#34;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div style=&#34;padding-top: 8px;&#34;&gt; &lt;div style=&#34; color:#3897f0; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:550; line-height:18px;&#34;&gt; View this post on Instagram&lt;/div&gt;&lt;/div&gt;&lt;div style=&#34;padding: 12.5% 0;&#34;&gt;&lt;/div&gt; &lt;div style=&#34;display: flex; flex-direction: row; margin-bottom: 14px; align-items: center;&#34;&gt;&lt;div&gt; &lt;div style=&#34;background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(0px) translateY(7px);&#34;&gt;&lt;/div&gt; &lt;div style=&#34;background-color: #F4F4F4; height: 12.5px; transform: rotate(-45deg) translateX(3px) translateY(1px); width: 12.5px; flex-grow: 0; margin-right: 14px; margin-left: 2px;&#34;&gt;&lt;/div&gt; &lt;div style=&#34;background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(9px) translateY(-18px);&#34;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&#34;margin-left: 8px;&#34;&gt; &lt;div style=&#34; background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 20px; width: 20px;&#34;&gt;&lt;/div&gt; &lt;div style=&#34; width: 0; height: 0; border-top: 2px solid transparent; border-left: 6px solid #f4f4f4; border-bottom: 2px solid transparent; transform: translateX(16px) translateY(-4px) rotate(30deg)&#34;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&#34;margin-left: auto;&#34;&gt; &lt;div style=&#34; width: 0px; border-top: 8px solid #F4F4F4; border-right: 8px solid transparent; transform: translateY(16px);&#34;&gt;&lt;/div&gt; &lt;div style=&#34; background-color: #F4F4F4; flex-grow: 0; height: 12px; width: 16px; transform: translateY(-4px);&#34;&gt;&lt;/div&gt; &lt;div style=&#34; width: 0; height: 0; border-top: 8px solid #F4F4F4; border-left: 8px solid transparent; transform: translateY(-4px) translateX(8px);&#34;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/a&gt; &lt;p style=&#34; margin:8px 0 0 0; padding:0 4px;&#34;&gt; &lt;a href=&#34;https://www.instagram.com/p/BnxRaMqhLIZ/?utm_source=ig_embed_loading&#34; style=&#34; color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;&#34; target=&#34;_blank&#34;&gt;倦怠期clova #linebootawards&lt;/a&gt;&lt;/p&gt; &lt;p style=&#34; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;&#34;&gt;&lt;a href=&#34;https://www.instagram.com/n0bisuke/?utm_source=ig_embed_loading&#34; style=&#34; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px;&#34; target=&#34;_blank&#34;&gt; n0bisuke&lt;/a&gt;さん(@n0bisuke)がシェアした投稿 - &lt;time style=&#34; font-family:Arial,sans-serif; font-size:14px; line-height:17px;&#34; datetime=&#34;2018-09-16T02:16:11+00:00&#34;&gt;2018年 9月月15日午後7時16分PDT&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt; &lt;script async defer src=&#34;//www.instagram.com/embed.js&#34;&gt;&lt;/script&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;h2 id=&#34;おまけ-発話履歴の確認&#34;&gt;おまけ: 発話履歴の確認&lt;/h2&gt;
&lt;p&gt;テスターの&lt;code&gt;発話履歴&lt;/code&gt;を見るとClova側でどんな認識になっているかが分かるのですが&amp;rdquo;妻の&amp;rdquo;が&amp;rdquo;その&amp;rdquo;などに認識されていて認識の揺れが発生してるのが分かりますね。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/6a8f698f16fda08bf3efc845bed09ed3.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Clovaが発話をうまく認識してくれないときはここを見て確認しましょう。&lt;/p&gt;
&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;
&lt;p&gt;こんな感じでとりあえず試す手順を紹介しました。&lt;/p&gt;
&lt;p&gt;ホスティングもnowやherokuを使うと簡単に出来るので&lt;a href=&#34;https://www.dropbox.com/s/547siacriaudy4f/CEK_Handson%1D_0729.pdf?dl=0&#34;&gt;立花さんのハンズオン資料&lt;/a&gt;を参照して理解を深めましょう！&lt;/p&gt;
&lt;p&gt;ホスティングに関しても余裕があれば追記したいと思います。&lt;/p&gt;</description></item><item><title>Azure WebApps on LinuxでNuxt.js&#43;Expressの環境をデプロイする</title><link>https://dotstud.io/blog/azure-webapps-nuxt-express/</link><pubDate>Mon, 03 Sep 2018 08:46:35 +0900</pubDate><guid>https://dotstud.io/blog/azure-webapps-nuxt-express/</guid><description>
&lt;p&gt;こんにちは、代表の&lt;a href=&#34;https://dotstud.io/members/n0bisuke&#34;&gt;n0bisuke&lt;/a&gt;です。&lt;/p&gt;
&lt;p&gt;Azure WebApps on Linuxの環境にNuxt.js+Expressの環境をデプロイしたときのメモです。&lt;/p&gt;
&lt;p&gt;けっこうハマったので備忘録として残しておきます。知り合いのMSのサポートエンジニアさんに質問したら休日にも関わらずチャットで答えてくれてマジ感謝です。&lt;/p&gt;
&lt;p&gt;ということで手順をおさらいしつつ紹介します。&lt;/p&gt;
&lt;p&gt;ちなみにWebApps on Dockerはこちらにまとめました。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://qiita.com/n0bisuke/items/412f2fcc673513866e44&#34;&gt;Azure WebAppsにNuxt.js+Expressの環境をDockerでデプロイしたときのメモ&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;nuxt-js-expressのテンプレート&#34;&gt;Nuxt.js+Expressのテンプレート&lt;/h2&gt;
&lt;p&gt;↑のDocker記事にも書いたNuxt.js+Expressのテンプレートです。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vue init nuxt-community/express-template .
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;これでテンプレートが作成されます。&lt;/p&gt;
&lt;h2 id=&#34;webapps-on-linuxのアプリケーションを作成&#34;&gt;WebApps on Linuxのアプリケーションを作成&lt;/h2&gt;
&lt;p&gt;Azureのポータル画面から作成していきます。&lt;/p&gt;
&lt;p&gt;2018年9月時点の画面なので画面は適宜読み替えてください。
この手のサービス管理画面はよく変わります。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;OSの箇所をLinuxに選択&lt;/strong&gt;します。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/d647ff415a9b33eda5cd0cd3aabe1c4e.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ランタイムスタックはNode.jsの最新&lt;/strong&gt;にしましょう。&lt;/p&gt;
&lt;h2 id=&#34;デプロイオプション&#34;&gt;デプロイオプション&lt;/h2&gt;
&lt;p&gt;デプロイ方法を選びます。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ローカルGitリポジトリ&lt;/strong&gt;を選択します。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/b7ee5bf06243a6402cfd1f8f12bfc3a9.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;概要に&lt;code&gt;GitクローンURL&lt;/code&gt;が表示されます。ここに対してpushすることでデプロイできるようになります。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/701e1339df4dbf9ea0605a9ed5d717a7.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;https://&amp;lt;ユーザー名&amp;gt;@&amp;lt;アプリ名&amp;gt;.scm.azurewebsites.net:443/&amp;lt;アプリ名&amp;gt;.git&lt;/code&gt;的なURLです。&lt;/p&gt;
&lt;p&gt;設定したユーザー名とパスワードを使ってGit Pushできます。&lt;/p&gt;
&lt;h2 id=&#34;アプリケーション設定&#34;&gt;アプリケーション設定&lt;/h2&gt;
&lt;h3 id=&#34;スタートアップファイル&#34;&gt;スタートアップファイル&lt;/h3&gt;
&lt;p&gt;通常、Azure WebApps on LinuxはPM2というプロセス監視ツールを内部で使っていて、PM2で利用する&lt;code&gt;process.json&lt;/code&gt;というファイルを編集して起動スクリプトを指定します。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/wbuchwalter/azure-content/blob/master/articles/app-service-web/app-service-linux-using-nodejs-pm2.md&#34;&gt;WebAppsのドキュメント&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://pm2.keymetrics.io/docs/usage/application-declaration/&#34;&gt;pm2のドキュメント&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;通常は特定のjsファイルを指定したりするのですがNuxt.jsの場合、Nuxtコマンドで起動するので&lt;/p&gt;
&lt;p&gt;&lt;code&gt;node_modules/nuxt/bin/nuxt-start&lt;/code&gt;を指定します。&lt;/p&gt;
&lt;p&gt;これでサーバーが再起動した際にNuxt.jsが起動します。&lt;/p&gt;
&lt;h3 id=&#34;hostを-0-0-0-0-に&#34;&gt;HOSTを&lt;code&gt;0.0.0.0&lt;/code&gt;に&lt;/h3&gt;
&lt;p&gt;また、設定でHOSTを&lt;code&gt;0.0.0.0&lt;/code&gt;に設定します。&lt;/p&gt;
&lt;p&gt;これを指定しないと&lt;code&gt;localhost&lt;/code&gt;接続になってしまい、WebApps内部ではうまいこと動いてくれない模様です。&lt;/p&gt;
&lt;p&gt;Keenさんの&lt;a href=&#34;https://keens.github.io/blog/2016/02/24/bind_addressnoimigayouyakuwakatta/&#34;&gt;Bind Addressの意味がようやく分かった&lt;/a&gt;の記事にもあるように&lt;code&gt;0.0.0.0&lt;/code&gt;はワイルドカードとして使えるので指定します。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/00346583f202e15200e90ccea658a4ef.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;package-jsonにpostinstallで-nuxt-build-させる&#34;&gt;package.jsonにpostinstallで&lt;code&gt;nuxt build&lt;/code&gt;させる&lt;/h2&gt;
&lt;p&gt;まだこれでもうまくいかなかったです。&lt;/p&gt;
&lt;p&gt;Nuxts.jsはnpm startすると&lt;code&gt;nuxt build &amp;amp;&amp;amp; nuxt start&lt;/code&gt;という形でビルド-&amp;gt;起動という順番になります。ビルドすると&lt;code&gt;.nuxt&lt;/code&gt;フォルダが作成され、その中のプログラムを使って起動します。&lt;/p&gt;
&lt;p&gt;ということで、WebAppsにデプロイしたらデプロイ先でビルドを走らせる必要があります。通常デプロイすると&lt;code&gt;npm start&lt;/code&gt;が走り、その中で&lt;code&gt;nuxt build &amp;amp;&amp;amp; nuxt start&lt;/code&gt;が実行されるため、問題なさそうなのですが、なぜかこれだとビルドがうまくいかず&lt;code&gt;postinstall&lt;/code&gt;の箇所でビルドをさせるとうまく動いてくれました。&lt;/p&gt;
&lt;p&gt;package.jsonのscriptsの箇所に&lt;code&gt;&amp;quot;postinstall&amp;quot;: &amp;quot;cd /home/site/wwwroot &amp;amp;&amp;amp; /opt/nodejs/9.4.0/bin/node ./node_modules/nuxt/bin/nuxt-build&amp;quot;,&lt;/code&gt;を入れてあげます。&lt;/p&gt;
&lt;p&gt;WebApss側ではデプロイしたソースコードは&lt;code&gt;/home/site/wwwroot&lt;/code&gt;に保存されるのでそこに移動してビルドする形です。&lt;/p&gt;
&lt;p&gt;ちなみに、&lt;code&gt;/opt/nodejs/9.4.0/bin/node ./node_modules/nuxt/bin/nuxt-build&amp;quot;&lt;/code&gt;の箇所は&lt;code&gt;npm run build&lt;/code&gt;や&lt;code&gt;nuxt build&lt;/code&gt;の中身である&lt;code&gt;nuxt-build&lt;/code&gt;を実行するものですが、そのまま&lt;code&gt;npm run build&lt;/code&gt;を指定しておくとWebApps上で実行されるNode.jsのバージョンが古く、&lt;code&gt;async&lt;/code&gt;などの構文でエラーを起こしてしまい、&lt;code&gt;nuxt build&lt;/code&gt;が上手くいかない模様です。なので&lt;code&gt;/opt/nodejs/9.4.0/bin/node&lt;/code&gt;でバージョンを指定してあげると上手くビルドしてくれます。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;async ready() {
remote: ^^^^^
remote: SyntaxError: Unexpected identifier
・
・
・
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;git-pushしてビルド確認&#34;&gt;git pushしてビルド確認&lt;/h2&gt;
&lt;p&gt;ここまで設定できるとgit pushしてビルドが成功すると思います。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ git push origin master
・
・
結構長い
・
・
remote: Finished successfully.
remote: Running post deployment command(s)...
remote: Deployment successful.
remote: App container will begin restart within 10 seconds.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;という形で&lt;code&gt;Finished successfully&lt;/code&gt;や&lt;code&gt;Deployment successful.&lt;/code&gt;のメッセージが出ればデプロイ成功です。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://camo.qiitausercontent.com/3bec96ccb48cf22dd880982f9ca1a6d938bd5c38/68747470733a2f2f692e6779617a6f2e636f6d2f36383163646639613562366266386161623935626138386537326665313431652e706e67&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;こんな感じのサイトが&lt;code&gt;https://&amp;lt;アプリ名&amp;gt;.azurewebsites.net&lt;/code&gt;にアクセスすると表示されると思います。&lt;/p&gt;
&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;nuxt build&lt;/code&gt;がWebApps上でなかなか動作してくれない&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HOSTの&lt;code&gt;0.0.0.0&lt;/code&gt;の指定&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;この二点を気をつければWebApps on LinuxでNuxt.jsの環境を整えられました。&lt;/p&gt;
&lt;p&gt;参考になれば幸いです。&lt;/p&gt;
&lt;p&gt;やさしいMSのサポートエンジニアさんマジでありがとう&amp;hellip;&amp;hellip;&lt;/p&gt;</description></item><item><title>【ソレノイド詳細解説】IoTの力でスマホを振るとソレノイドがシュコシュコ動く仕組みを作ってみる</title><link>https://dotstud.io/blog/control-solenoid-nefrybt-nodered/</link><pubDate>Tue, 28 Aug 2018 14:55:44 +0900</pubDate><guid>https://dotstud.io/blog/control-solenoid-nefrybt-nodered/</guid><description>
&lt;p&gt;こんにちは、&lt;a href=&#34;https://dotstud.io/members/takudooon/&#34;&gt;たくろーどん&lt;/a&gt;です。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://dotstud.io/series/driving/&#34;&gt;これまでの記事&lt;/a&gt;では、電子工作に使えそうな駆動部品を紹介してきました。サーボモータ、ステッピングモータときたら……次に使ってみたいのは&lt;strong&gt;ソレノイド&lt;/strong&gt;ですよね！&lt;/p&gt;
&lt;p&gt;ということで、ソレノイドをNefry BTで使えるようにしていきたいと思います。&lt;/p&gt;
&lt;p&gt;そして、最終的には&lt;strong&gt;スマートフォンをシェイクするとソレノイドをシュコシュコ動かせる&lt;/strong&gt;ようにしてみたいと思います。&lt;/p&gt;
&lt;p&gt;
&lt;section class=&#34;link&#34; id=&#34;187&#34;&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;a href=&#34;https://dotstud.io/blog/nefry-servo-handson-takudooon/&#34;&gt;&lt;/a&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/187/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;div class=&#34;link_detail&#34;&gt;
&lt;div class=&#34;link_title&#34;&gt;
PWM制御をマスターしよう！Node-REDでサーボモータを遠隔制御する方法＆初ハンズオンレポート
&lt;/div&gt;
&lt;div class=&#34;link_date&#34;&gt;
2018-07-12
&lt;/div&gt;
&lt;div class=&#34;link_desc&#34;&gt;
PWM制御でサーボモータを操作してモノ作りの幅を広げましょう！Node-REDを使ったハンズオンの内容を紹介します。
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;/section&gt;
&lt;br /&gt;
&lt;section class=&#34;link&#34; id=&#34;189&#34;&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;a href=&#34;https://dotstud.io/blog/stepper-motor-nefrybt-control/&#34;&gt;&lt;/a&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/189/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;div class=&#34;link_detail&#34;&gt;
&lt;div class=&#34;link_title&#34;&gt;
【詳細解説】ステッピングモータの仕組みを理解しよう！解説とNefry BTでステッピングモータを使う方法
&lt;/div&gt;
&lt;div class=&#34;link_date&#34;&gt;
2018-07-23
&lt;/div&gt;
&lt;div class=&#34;link_desc&#34;&gt;
モータの世界は奥が深いです。今回はロボットアームや3Dプリンタのステージ制御に利用される「ステッピングモータ」について詳細に解説します。
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;/section&gt;
&lt;/p&gt;
&lt;h2 id=&#34;ソレノイドのしくみ&#34;&gt;ソレノイドのしくみ&lt;/h2&gt;
&lt;p&gt;ソレノイドとは&lt;u&gt;&lt;strong&gt;銅線（コイル）に電流を流すことにより磁界を発生させ、磁性体の可動鉄芯を吸い寄せる（吸引）電気部品&lt;/strong&gt;&lt;/u&gt;のことです。電流を流している間は常に吸い寄せられていますが、電流を切ると吸引力はなくなります。&lt;/p&gt;
&lt;p&gt;下記に、その仕組みを簡単に示しました。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/2854b315-e58b-63f0-cd49-87d761625053.png&#34; alt=&#34;仕組み.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;また、この動作を応用して&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;プル（吸引）ソレノイド&lt;/li&gt;
&lt;li&gt;プッシュ（押し）ソレノイド：プッシュバーを装着した「吸引=押し」動作&lt;/li&gt;
&lt;li&gt;自己保持ソレノイド：永久磁石を組込むことによりそれぞれの動作を保持&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;といった種類があります。&lt;/p&gt;
&lt;h2 id=&#34;ソレノイドを使ってみる&#34;&gt;ソレノイドを使ってみる&lt;/h2&gt;
&lt;p&gt;まずは簡単な例として、Nefry BTについているスイッチを押すとソレノイドが動くようにしてみます。&lt;/p&gt;
&lt;h3 id=&#34;用意するもの&#34;&gt;用意するもの&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://akizukidenshi.com/catalog/g/gI-02414/&#34;&gt;NchパワーMOSFET 2SK2232&lt;/a&gt;：スイッチングのために使用(FETはトランジスタと違って電圧でトリガーとなる)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://akizukidenshi.com/catalog/g/gP-10761/&#34;&gt;ソレノイド 5V ZHO-0420S-05A4.5A プッシュ型&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;整流ダイオード：逆起電力(ソレノイドへの電力供給停止後、ソレノイドの棒が元に戻るときに発生する起電力)を防止するため(マイコンの破壊を防止する)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;回路&#34;&gt;回路&lt;/h3&gt;
&lt;p&gt;※&lt;strong&gt;ソレノイドに極性(+、-)はありません&lt;/strong&gt;！なので、安心して配線しましょう！&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/255b91a2-7e2b-b5c9-6168-4cb604a35da2.png&#34; alt=&#34;回路図.png&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;プログラム&#34;&gt;プログラム&lt;/h3&gt;
&lt;p&gt;「&lt;a href=&#34;https://dotstud.io/docs/nefrybt-arduino-ide-setup/&#34;&gt;NefryBTの環境構築&lt;/a&gt;」を参考に、Nefry BTに下記のプログラムを書き込みます。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;#include&amp;lt;Nefry.h&amp;gt;
void setup() {
Serial.print(115200);
pinMode(D4, OUTPUT);
}
//FET:電圧閾値0.8～2.0V　今回使っているトランジスタの場合は！
void loop() {
digitalWrite(D4,LOW);
if(Nefry.readSW()){
digitalWrite(D4,HIGH);
}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;動かしてみると&#34;&gt;動かしてみると&lt;/h3&gt;
&lt;p&gt;Nefry BTのスイッチを押すと、シュコシュコします。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://gyazo.com/25c5ea02c0fc0e3ab327f3aff4719f28&#34;&gt;&lt;img src=&#34;https://i.gyazo.com/25c5ea02c0fc0e3ab327f3aff4719f28.gif&#34; alt=&#34;Image from Gyazo&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;iotでソレノイドをシュコシュコする&#34;&gt;IoTでソレノイドをシュコシュコする&lt;/h2&gt;
&lt;p&gt;それでは、スマートフォンをシェイクするとソレノイドをシュコシュコ動かせるようにしていきたいと思います。ここでは、スマートフォンの加速度を利用します（スマートフォンの加速度の利用する方法は&lt;a href=&#34;https://qiita.com/minwinmin/items/af1d8ba68d0ec3f52fa9&#34;&gt;こちら&lt;/a&gt;に少しまとめてあります）。&lt;/p&gt;
&lt;h3 id=&#34;node-redのフローを作る&#34;&gt;Node-Redのフローを作る&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://nodered.org/&#34;&gt;Node-RED&lt;/a&gt;で下記のようなフローを作成します。&lt;/p&gt;
&lt;p&gt;&lt;img width=&#34;929&#34; alt=&#34;node-redのフロー.png&#34; src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/29ef7cc8-9340-c1b2-4c82-0deac26eccc9.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;Node-REDの詳細は前回の記事をご覧ください。&lt;/p&gt;
&lt;section class=&#34;link&#34; id=&#34;187&#34;&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;a href=&#34;https://dotstud.io/blog/nefry-servo-handson-takudooon/&#34;&gt;&lt;/a&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/187/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;div class=&#34;link_detail&#34;&gt;
&lt;div class=&#34;link_title&#34;&gt;
PWM制御をマスターしよう！Node-REDでサーボモータを遠隔制御する方法＆初ハンズオンレポート
&lt;/div&gt;
&lt;div class=&#34;link_date&#34;&gt;
2018-07-12
&lt;/div&gt;
&lt;div class=&#34;link_desc&#34;&gt;
PWM制御でサーボモータを操作してモノ作りの幅を広げましょう！Node-REDを使ったハンズオンの内容を紹介します。
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;/section&gt;
&lt;div class=&#34;accbox&#34;&gt;
&lt;label for=&#34;label1&#34;&gt;クリックしてコードを表示&lt;/labe&gt;
&lt;input type=&#34;checkbox&#34; id=&#34;label1&#34; class=&#34;cssacc&#34; /&gt;
&lt;div class=&#34;accshow&#34;&gt;
&lt;pre&gt;
&lt;code class=&#34;hljs hljs-line-numbers&#34;&gt;
[
{
&#34;id&#34;: &#34;2c912723.4f0338&#34;,
&#34;type&#34;: &#34;http in&#34;,
&#34;z&#34;: &#34;57519a9b.8fba94&#34;,
&#34;name&#34;: &#34;&#34;,
&#34;url&#34;: &#34;sensor4&#34;,
&#34;method&#34;: &#34;get&#34;,
&#34;upload&#34;: false,
&#34;swaggerDoc&#34;: &#34;&#34;,
&#34;x&#34;: 70,
&#34;y&#34;: 100,
&#34;wires&#34;: [
[
&#34;94c3393a.020d68&#34;
]
]
},
{
&#34;id&#34;: &#34;94c3393a.020d68&#34;,
&#34;type&#34;: &#34;template&#34;,
&#34;z&#34;: &#34;57519a9b.8fba94&#34;,
&#34;name&#34;: &#34;HTML&#34;,
&#34;field&#34;: &#34;payload&#34;,
&#34;fieldType&#34;: &#34;msg&#34;,
&#34;format&#34;: &#34;html&#34;,
&#34;syntax&#34;: &#34;mustache&#34;,
&#34;template&#34;: &#34;&amp;lt;!DOCTYPE html&amp;gt;\n&amp;lt;html lang=\&#34;ja\&#34;&amp;gt;\n&amp;lt;head&amp;gt;\n&amp;lt;meta charset=\&#34;utf-8\&#34;&amp;gt;\n&amp;lt;meta name=\&#34;viewport\&#34; content=\&#34;width=device-width,initial-scale=1\&#34;&amp;gt;\n&amp;lt;title&amp;gt;加速度検出&amp;lt;/title&amp;gt;\n&amp;lt;/head&amp;gt;\n \n&amp;lt;body&amp;gt;\n&amp;lt;div id=\&#34;datatxt\&#34;&amp;gt;データの表示&amp;lt;/div&amp;gt; \n \n&amp;lt;script&amp;gt;\n var encrypted = \&#34;{{{req.connection.encrypted}}}\&#34;;\n if (encrypted === \&#34;true\&#34;) {\n var wsUri = \&#34;wss://{{{req.hostname}}}:{{{req.connection.localPort}}}/accl1\&#34;;\n }\n else {\n var wsUri = \&#34;ws://{{{req.hostname}}}:{{{req.connection.localPort}}}/accl1\&#34;;\n }\n var ws = new WebSocket(wsUri);\n\n var accx = null;\n var accy = null;\n var accz = null;\n\n function sendMessage() {\n // 画面書き換え\n var txt = \&#34;wsUri:\&#34; + wsUri + \&#34;&amp;lt;br&amp;gt;\&#34;;\n txt += \&#34;x:\&#34; + accx + \&#34;&amp;lt;br&amp;gt;\&#34;;\n txt += \&#34;y:\&#34; + accy + \&#34;&amp;lt;br&amp;gt;\&#34;;\n txt += \&#34;z:\&#34; + accz + \&#34;&amp;lt;br&amp;gt;\&#34;;\n\n var datatxt = document.getElementById(\&#34;datatxt\&#34;);\n datatxt.innerHTML = txt;\n\n // WebSocket送信\n var payload = {\n &#39;accx&#39;: accx,\n &#39;accy&#39;: accy,\n &#39;accz&#39;: accz,\n };\n ws.send(JSON.stringify(payload));\n }\n\n function handleMotionEvent(evt) {\n //加速度\n accx = evt.acceleration.x;\n accy = evt.acceleration.y;\n accz = evt.acceleration.z;\n }\n\n window.addEventListener(\&#34;devicemotion\&#34;, handleMotionEvent, true); //情報変更ごとにイベント発生\n window.setInterval(sendMessage, 500); // 500msごとにイベント発生\n\n&amp;lt;/script&amp;gt;\n&amp;lt;/body&amp;gt;\n&amp;lt;/html&amp;gt;&#34;,
&#34;output&#34;: &#34;str&#34;,
&#34;x&#34;: 317.00000762939453,
&#34;y&#34;: 100.00000286102295,
&#34;wires&#34;: [
[
&#34;c9b732b9.d5df9&#34;
]
]
},
{
&#34;id&#34;: &#34;c9b732b9.d5df9&#34;,
&#34;type&#34;: &#34;http response&#34;,
&#34;z&#34;: &#34;57519a9b.8fba94&#34;,
&#34;name&#34;: &#34;&#34;,
&#34;statusCode&#34;: &#34;&#34;,
&#34;headers&#34;: {},
&#34;x&#34;: 541.0000152587891,
&#34;y&#34;: 100.00000190734863,
&#34;wires&#34;: []
},
{
&#34;id&#34;: &#34;af4fa6f9.139f88&#34;,
&#34;type&#34;: &#34;websocket in&#34;,
&#34;z&#34;: &#34;57519a9b.8fba94&#34;,
&#34;name&#34;: &#34;&#34;,
&#34;server&#34;: &#34;250c9625.e420aa&#34;,
&#34;client&#34;: &#34;&#34;,
&#34;x&#34;: 60,
&#34;y&#34;: 220,
&#34;wires&#34;: [
[
&#34;1c16e58e.096d5a&#34;
]
]
},
{
&#34;id&#34;: &#34;1c16e58e.096d5a&#34;,
&#34;type&#34;: &#34;json&#34;,
&#34;z&#34;: &#34;57519a9b.8fba94&#34;,
&#34;name&#34;: &#34;加速度をjson形式に変換&#34;,
&#34;property&#34;: &#34;payload&#34;,
&#34;action&#34;: &#34;&#34;,
&#34;pretty&#34;: false,
&#34;x&#34;: 310,
&#34;y&#34;: 320,
&#34;wires&#34;: [
[
&#34;b50a0d6c.0c67a&#34;,
&#34;10eecadd.b9fbe5&#34;,
&#34;1c843637.566a8a&#34;
]
]
},
{
&#34;id&#34;: &#34;b50a0d6c.0c67a&#34;,
&#34;type&#34;: &#34;switch&#34;,
&#34;z&#34;: &#34;57519a9b.8fba94&#34;,
&#34;name&#34;: &#34;加速度判定&#34;,
&#34;property&#34;: &#34;payload.accz&#34;,
&#34;propertyType&#34;: &#34;msg&#34;,
&#34;rules&#34;: [
{
&#34;t&#34;: &#34;gt&#34;,
&#34;v&#34;: &#34;10&#34;,
&#34;vt&#34;: &#34;num&#34;
},
{
&#34;t&#34;: &#34;btwn&#34;,
&#34;v&#34;: &#34;6&#34;,
&#34;vt&#34;: &#34;num&#34;,
&#34;v2&#34;: &#34;10&#34;,
&#34;v2t&#34;: &#34;num&#34;
},
{
&#34;t&#34;: &#34;lte&#34;,
&#34;v&#34;: &#34;5&#34;,
&#34;vt&#34;: &#34;num&#34;
}
],
&#34;checkall&#34;: &#34;true&#34;,
&#34;repair&#34;: false,
&#34;outputs&#34;: 3,
&#34;x&#34;: 533.0000152587891,
&#34;y&#34;: 312.0000088214874,
&#34;wires&#34;: [
[
&#34;326dd035.413f1&#34;
],
[
&#34;dddabb62.392ea8&#34;
],
[
&#34;7c53f99b.cba9e8&#34;
]
]
},
{
&#34;id&#34;: &#34;ec7a3c72.a1361&#34;,
&#34;type&#34;: &#34;debug&#34;,
&#34;z&#34;: &#34;57519a9b.8fba94&#34;,
&#34;name&#34;: &#34;&#34;,
&#34;active&#34;: true,
&#34;tosidebar&#34;: true,
&#34;console&#34;: false,
&#34;tostatus&#34;: false,
&#34;complete&#34;: &#34;payload&#34;,
&#34;x&#34;: 1110,
&#34;y&#34;: 320,
&#34;wires&#34;: []
},
{
&#34;id&#34;: &#34;d1c70b54.eb01d8&#34;,
&#34;type&#34;: &#34;comment&#34;,
&#34;z&#34;: &#34;57519a9b.8fba94&#34;,
&#34;name&#34;: &#34;加速度を出力&#34;,
&#34;info&#34;: &#34;&#34;,
&#34;x&#34;: 70,
&#34;y&#34;: 60,
&#34;wires&#34;: []
},
{
&#34;id&#34;: &#34;10eecadd.b9fbe5&#34;,
&#34;type&#34;: &#34;mqtt out&#34;,
&#34;z&#34;: &#34;57519a9b.8fba94&#34;,
&#34;name&#34;: &#34;/NefryBT/SOLE&#34;,
&#34;topic&#34;: &#34;/NefryBT/SOLE&#34;,
&#34;qos&#34;: &#34;&#34;,
&#34;retain&#34;: &#34;&#34;,
&#34;broker&#34;: &#34;f9299578.86bcb8&#34;,
&#34;x&#34;: 470.0000915527344,
&#34;y&#34;: 530.0000152587891,
&#34;wires&#34;: []
},
{
&#34;id&#34;: &#34;1c843637.566a8a&#34;,
&#34;type&#34;: &#34;debug&#34;,
&#34;z&#34;: &#34;57519a9b.8fba94&#34;,
&#34;name&#34;: &#34;&#34;,
&#34;active&#34;: false,
&#34;tosidebar&#34;: true,
&#34;console&#34;: false,
&#34;tostatus&#34;: false,
&#34;complete&#34;: &#34;payload&#34;,
&#34;x&#34;: 311.00004959106445,
&#34;y&#34;: 583.0000152587891,
&#34;wires&#34;: []
},
{
&#34;id&#34;: &#34;326dd035.413f1&#34;,
&#34;type&#34;: &#34;change&#34;,
&#34;z&#34;: &#34;57519a9b.8fba94&#34;,
&#34;name&#34;: &#34;accz &amp;gt; 10 のときの文字列「large」&#34;,
&#34;rules&#34;: [
{
&#34;t&#34;: &#34;set&#34;,
&#34;p&#34;: &#34;payload&#34;,
&#34;pt&#34;: &#34;msg&#34;,
&#34;to&#34;: &#34;large&#34;,
&#34;tot&#34;: &#34;str&#34;
}
],
&#34;action&#34;: &#34;&#34;,
&#34;property&#34;: &#34;&#34;,
&#34;from&#34;: &#34;&#34;,
&#34;to&#34;: &#34;&#34;,
&#34;reg&#34;: false,
&#34;x&#34;: 818.000020980835,
&#34;y&#34;: 274.00000762939453,
&#34;wires&#34;: [
[
&#34;ec7a3c72.a1361&#34;
]
]
},
{
&#34;id&#34;: &#34;dddabb62.392ea8&#34;,
&#34;type&#34;: &#34;change&#34;,
&#34;z&#34;: &#34;57519a9b.8fba94&#34;,
&#34;name&#34;: &#34;accz:6~10 のときの文字列「medium」&#34;,
&#34;rules&#34;: [
{
&#34;t&#34;: &#34;set&#34;,
&#34;p&#34;: &#34;payload&#34;,
&#34;pt&#34;: &#34;msg&#34;,
&#34;to&#34;: &#34;medium&#34;,
&#34;tot&#34;: &#34;str&#34;
}
],
&#34;action&#34;: &#34;&#34;,
&#34;property&#34;: &#34;&#34;,
&#34;from&#34;: &#34;&#34;,
&#34;to&#34;: &#34;&#34;,
&#34;reg&#34;: false,
&#34;x&#34;: 840,
&#34;y&#34;: 320,
&#34;wires&#34;: [
[
&#34;ec7a3c72.a1361&#34;
]
]
},
{
&#34;id&#34;: &#34;7c53f99b.cba9e8&#34;,
&#34;type&#34;: &#34;change&#34;,
&#34;z&#34;: &#34;57519a9b.8fba94&#34;,
&#34;name&#34;: &#34;accz &amp;lt;= 5 のときの文字列「small」&#34;,
&#34;rules&#34;: [
{
&#34;t&#34;: &#34;set&#34;,
&#34;p&#34;: &#34;payload&#34;,
&#34;pt&#34;: &#34;msg&#34;,
&#34;to&#34;: &#34;small&#34;,
&#34;tot&#34;: &#34;str&#34;
}
],
&#34;action&#34;: &#34;&#34;,
&#34;property&#34;: &#34;&#34;,
&#34;from&#34;: &#34;&#34;,
&#34;to&#34;: &#34;&#34;,
&#34;reg&#34;: false,
&#34;x&#34;: 820,
&#34;y&#34;: 360,
&#34;wires&#34;: [
[
&#34;ec7a3c72.a1361&#34;
]
]
},
{
&#34;id&#34;: &#34;53d3ea65.523574&#34;,
&#34;type&#34;: &#34;comment&#34;,
&#34;z&#34;: &#34;57519a9b.8fba94&#34;,
&#34;name&#34;: &#34;加速度を受信して橋渡し&#34;,
&#34;info&#34;: &#34;&#34;,
&#34;x&#34;: 110,
&#34;y&#34;: 180,
&#34;wires&#34;: []
},
{
&#34;id&#34;: &#34;422cdf71.4a17e&#34;,
&#34;type&#34;: &#34;comment&#34;,
&#34;z&#34;: &#34;57519a9b.8fba94&#34;,
&#34;name&#34;: &#34;MQTTで加速度をjson形式で送信&#34;,
&#34;info&#34;: &#34;&#34;,
&#34;x&#34;: 520.0000152587891,
&#34;y&#34;: 490.00001430511475,
&#34;wires&#34;: []
},
{
&#34;id&#34;: &#34;d24b4e1f.58b25&#34;,
&#34;type&#34;: &#34;comment&#34;,
&#34;z&#34;: &#34;57519a9b.8fba94&#34;,
&#34;name&#34;: &#34;デバック画面に加速度の具合を表示させる部分&#34;,
&#34;info&#34;: &#34;&#34;,
&#34;x&#34;: 641.0000152587891,
&#34;y&#34;: 226.00000667572021,
&#34;wires&#34;: []
},
{
&#34;id&#34;: &#34;250c9625.e420aa&#34;,
&#34;type&#34;: &#34;websocket-listener&#34;,
&#34;z&#34;: &#34;&#34;,
&#34;path&#34;: &#34;/accl1&#34;,
&#34;wholemsg&#34;: &#34;false&#34;
},
{
&#34;id&#34;: &#34;f9299578.86bcb8&#34;,
&#34;type&#34;: &#34;mqtt-broker&#34;,
&#34;z&#34;: &#34;&#34;,
&#34;name&#34;: &#34;&#34;,
&#34;broker&#34;: &#34;http://test.mosquitto.org/&#34;,
&#34;port&#34;: &#34;1883&#34;,
&#34;clientid&#34;: &#34;&#34;,
&#34;usetls&#34;: false,
&#34;compatmode&#34;: true,
&#34;keepalive&#34;: &#34;60&#34;,
&#34;cleansession&#34;: true,
&#34;birthTopic&#34;: &#34;&#34;,
&#34;birthQos&#34;: &#34;0&#34;,
&#34;birthPayload&#34;: &#34;&#34;,
&#34;closeTopic&#34;: &#34;&#34;,
&#34;closeQos&#34;: &#34;0&#34;,
&#34;closePayload&#34;: &#34;&#34;,
&#34;willTopic&#34;: &#34;&#34;,
&#34;willQos&#34;: &#34;0&#34;,
&#34;willPayload&#34;: &#34;&#34;
}
]
&lt;/code&gt;
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;nefry-btにプログラムを書き込む&#34;&gt;Nefry BTにプログラムを書き込む&lt;/h3&gt;
&lt;p&gt;Nefry BTに書き込むプログラムはこちらです。&lt;/p&gt;
&lt;div class=&#34;accbox&#34;&gt;
&lt;label for=&#34;label2&#34;&gt;クリックしてコードを表示&lt;/labe&gt;
&lt;input type=&#34;checkbox&#34; id=&#34;label2&#34; class=&#34;cssacc&#34; /&gt;
&lt;div class=&#34;accshow&#34;&gt;
&lt;pre&gt;
&lt;code class=&#34;language-c++ hljs cpp&#34;&gt;
#include &amp;lt;Nefry.h&amp;gt;
#include &amp;lt;WiFiClient.h&amp;gt;
#include &amp;lt;PubSubClient.h&amp;gt;
#include &amp;lt;ArduinoJson.h&amp;gt;
IPAddress endpoint;
const int port = 1883;
const char *pubTopic;
const char *subTopic;
const char *deviceName;
const char *mqtt_server = &#34;test.mosquitto.org&#34;;
WiFiClient httpsClient;
PubSubClient mqttClient(httpsClient);
void setup() {
////ソレノイドのピン設定/////////////////////////////////
pinMode(D4, OUTPUT);
//// NefryBT設定 ////////////////////////////////////////
// NefryBT
subTopic = &#34;/NefryBT/SOLE&#34;;
deviceName = &#34;NefryBT_SOLE&#34;; // 複数台で利用する場合は必ずかぶらないように変更する
Serial.begin(115200);
mqttClient.setServer(mqtt_server, port);
mqttClient.setCallback(mqttCallback);
connectMQTT();
}
void connectMQTT() {
Serial.println(&#34;connectMQTT&#34;);
Serial.println(deviceName);
while (!mqttClient.connected()) {
Serial.print(&#34;.&#34;);
if (mqttClient.connect(deviceName)) {
Serial.println(&#34;Connected.&#34;);
int qos = 0;
mqttClient.subscribe(subTopic, qos);
Serial.println(&#34;Subscribed.&#34;);
} else {
Serial.print(&#34;Failed. Error state=&#34;);
Serial.print(mqttClient.state());
// Wait 5 seconds before retrying
delay(5000);
}
}
}
char pubMessage[128];
void mqttCallback (char* topic, byte* payload, unsigned int length) {
String str = &#34;&#34;;
Serial.print(&#34;Received. topic=&#34;);
Serial.println(topic);
for (int i = 0; i &lt; length; i++) {
Serial.print((char)payload[i]);
str += (char)payload[i];
}
Serial.print(&#34;\n&#34;);
StaticJsonBuffer&lt;200&gt; jsonBuffer;
JsonObject&amp; root = jsonBuffer.parseObject(str);
// パースが成功かどうか判断
if (!root.success()) {
Serial.println(&#34;parseObject() failed&#34;);
return;
}
//z軸方向の加速度を取り出している
const char* message = root[&#34;message&#34;];
int accz = root[&#34;accz&#34;];
Serial.print(&#34;accz = &#34;);
Serial.println(accz);
//加速度に応じてソレノイドのシュコシュコ速度が変化
if(accz &gt;= 10 || accz &lt;= -10){
Serial.println(&#34;シュコシュコシュコ&#34;);
digitalWrite(D4,LOW);
delay(50);
digitalWrite(D4,HIGH);
delay(50);
}else if(10 &gt; accz &gt;= 6 || -10 &lt; accz &lt;= 6){
Serial.println(&#34;シュコシュコ&#34;);
digitalWrite(D4,LOW);
delay(200);
digitalWrite(D4,HIGH);
delay(200);
}else{
Serial.println(&#34;シュコ&#34;);
digitalWrite(D4,LOW);
delay(500);
digitalWrite(D4,HIGH);
delay(500);
}
delay(100);
}
void mqttLoop() {
if (!mqttClient.connected()) {
connectMQTT();
}
mqttClient.loop();
}
void loop() {
mqttLoop();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;動かしてみると-1&#34;&gt;動かしてみると&lt;/h3&gt;
&lt;p&gt;シリアルモニタを見てみると、スマートフォンの加速度の変化に応じて値が表示されます。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/7fb2accc-5f35-bc31-7366-04d7e0c2de99.gif&#34; alt=&#34;ソレノイド＿シュコシュコ事案.gif&#34; /&gt;&lt;/p&gt;
&lt;p&gt;下記のようにスマートフォンをシェイクすると、ソレノイドの挙動が変化してます（音をよく聞くと、ソレノイドが早く動いたり遅く動いたりしているのがわかります)。&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;ja&#34;&gt;&lt;p lang=&#34;ja&#34; dir=&#34;ltr&#34;&gt;ソレノイド探求です。&lt;br&gt;スマホの加速度に応じてソレノイドのシュコシュコ具合が変化します。&lt;br&gt; &lt;a href=&#34;https://t.co/6qugBugDOU&#34;&gt;https://t.co/6qugBugDOU&lt;/a&gt; &lt;a href=&#34;https://twitter.com/YouTube?ref_src=twsrc%5Etfw&#34;&gt;@YouTube&lt;/a&gt;さんから&lt;/p&gt; たくろーどん (@takudooon) &lt;a href=&#34;https://twitter.com/takudooon/status/1027809093992378369?ref_src=twsrc%5Etfw&#34;&gt;2018年8月10日&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;無事、&lt;strong&gt;スマートフォンをシェイクするとソレノイドをシュコシュコ動かすデバイス&lt;/strong&gt;ができました！&lt;/p&gt;
&lt;h2 id=&#34;ソレノイドを使った機構の例&#34;&gt;ソレノイドを使った機構の例&lt;/h2&gt;
&lt;p&gt;ソレノイドはシンプルな動作をしますが、何かをつくるときの機構として使うことができます。動画ではソレノイドを上下させることでクラッピーに拍手させています。工夫次第では面白い機構が作れるでしょう。&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;ja&#34;&gt;&lt;p lang=&#34;ja&#34; dir=&#34;ltr&#34;&gt;ソレノイドを用いた機構 &lt;a href=&#34;https://t.co/Y3KeMOUg1z&#34;&gt;https://t.co/Y3KeMOUg1z&lt;/a&gt; &lt;a href=&#34;https://twitter.com/YouTube?ref_src=twsrc%5Etfw&#34;&gt;@YouTube&lt;/a&gt;さんから&lt;/p&gt; たくろーどん (@takudooon) &lt;a href=&#34;https://twitter.com/takudooon/status/1027545863197843456?ref_src=twsrc%5Etfw&#34;&gt;2018年8月9日&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;h2 id=&#34;おわりに&#34;&gt;おわりに&lt;/h2&gt;
&lt;p&gt;発想は自分次第です。
ソレノイドを使って面白いデバイスをつくってみてください！&lt;/p&gt;
&lt;h2 id=&#34;参考&#34;&gt;参考&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;http://www.takaha.co.jp/technological/action.html&#34;&gt;ソレノイドの動作説明&lt;/a&gt;: ソレノイドの製造・販売で有名なタカハ機工株式会社より&lt;/p&gt;
&lt;style&gt;
.accbox {
margin: 2em 0;
padding: 0;
max-width: 710px;
}
.accbox label {
display: block;
margin: 1.5px 0;
padding : 11px 12px;
color :#ffffff;
font-weight: bold;
background :#2f2f2f;
cursor :pointer;
transition: all 0.5s;
}
.accbox label:hover {
background :#A4A4A4;
}
.accbox input {
display: none;
}
.accbox .accshow {
height: 0;
padding: 0;
overflow: hidden;
opacity: 0;
transition: 0.8s;
}
.cssacc:checked + .accshow {
height: auto;
padding: 5px;
background: #eaeaea;
opacity: 1;
}
&lt;/style&gt;</description></item><item><title>ClovaスキルでMP3ファイルを再生してみよう #asciihack #linebootawards</title><link>https://dotstud.io/blog/nodejs-clova-skill-mp3/</link><pubDate>Sat, 25 Aug 2018 21:23:40 +0900</pubDate><guid>https://dotstud.io/blog/nodejs-clova-skill-mp3/</guid><description>
&lt;p&gt;こんにちは、代表の&lt;a href=&#34;https://dotstud.io/members/n0bisuke&#34;&gt;n0bisuke&lt;/a&gt;です。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://asciistartup.connpass.com/event/91483/&#34;&gt;&lt;code&gt;#asciihack&lt;/code&gt;&lt;/a&gt; にてClovaでMP3再生したいという話があったので試してみました。&lt;/p&gt;
&lt;p&gt;ハッカソン中の走り書きです。ご了承ください。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;デモを先にみたい人は&lt;a href=&#34;https://dotstud.io/blog/nodejs-clova-skill-mp3/#デモ&#34;&gt;ページ下部&lt;/a&gt;へ！&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Google Homeで有名な、&lt;code&gt;みそ氏&lt;/code&gt;の&lt;a href=&#34;https://qiita.com/miso_develop/items/6b256c1e8757c0ace4a9&#34;&gt;Clova公式SDK(Node.js)の使い方まとめ&lt;/a&gt;が参考になります。&lt;/p&gt;
&lt;p&gt;Node.jsのSDKでのやり方です。ちなみにNode.jsのバージョンは10.8.0で試しています。&lt;/p&gt;
&lt;p&gt;CEKの細かい仕様には触れません。&lt;/p&gt;
&lt;h2 id=&#34;一旦スキルを作る&#34;&gt;一旦スキルを作る&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://dotstud.io/blog/clova-cek-nodejs-tutorial/&#34;&gt;Clova CEKでのスキル開発の始め方〜Node.jsで開発スタート編〜&lt;/a&gt;などを読みつつClova CEKのSDKをインストールしつつ対話モデル作ったり、Clovaスキルの基本を作りましょう。&lt;/p&gt;
&lt;section class=&#34;link&#34; id=&#34;195&#34;&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;a href=&#34;https://dotstud.io/blog/clova-cek-nodejs-tutorial/&#34;&gt;&lt;/a&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/195/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;div class=&#34;link_detail&#34;&gt;
&lt;div class=&#34;link_title&#34;&gt;
Clova CEKでのスキル開発の始め方〜Node.jsで開発スタート編〜
&lt;/div&gt;
&lt;div class=&#34;link_date&#34;&gt;
2018-08-03
&lt;/div&gt;
&lt;div class=&#34;link_desc&#34;&gt;
Clova CEKのNode.jsチュートリアルです。カレースキルを作ります。
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;/section&gt;
&lt;p&gt;この記事のコードを見ると該当箇所が分かります。&lt;/p&gt;
&lt;h2 id=&#34;起動時にmp3を再生&#34;&gt;起動時にMP3を再生&lt;/h2&gt;
&lt;p&gt;基本は以下のように、指定したサーバー上のMP3を再生できます。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;responseHelper.setSimpleSpeech(
clova.SpeechBuilder.createSpeechUrl(&#39;https://exsample.com/myaudio.mp3&#39;)
);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;.onLaunchRequest()&lt;/code&gt;の中で実行すれば起動時にMP3を再生できます。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;//起動時に喋る
.onLaunchRequest(responseHelper =&amp;gt; {
responseHelper.setSimpleSpeech(
clova.SpeechBuilder.createSpeechUrl(&#39;https://exsample.com/myaudio.mp3&#39;)
);
})
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;このコードは前に書いたチュートリアルの一部を改変しているので、どこが該当箇所か確認してみて下さい。&lt;/p&gt;
&lt;section class=&#34;link&#34; id=&#34;195&#34;&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;a href=&#34;https://dotstud.io/blog/clova-cek-nodejs-tutorial/&#34;&gt;&lt;/a&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/195/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;div class=&#34;link_detail&#34;&gt;
&lt;div class=&#34;link_title&#34;&gt;
Clova CEKでのスキル開発の始め方〜Node.jsで開発スタート編〜
&lt;/div&gt;
&lt;div class=&#34;link_date&#34;&gt;
2018-08-03
&lt;/div&gt;
&lt;div class=&#34;link_desc&#34;&gt;
Clova CEKのNode.jsチュートリアルです。カレースキルを作ります。
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;/section&gt;
&lt;h2 id=&#34;呼びかけてmp3を再生&#34;&gt;呼びかけてMP3を再生&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;.onIntentRequest()&lt;/code&gt;の中で実行すれば呼びかけに応じてMP3を再生できます。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; //ユーザーからの発話が来たら反応する箇所
.onIntentRequest(async responseHelper =&amp;gt; {
responseHelper.setSimpleSpeech(
clova.SpeechBuilder.createSpeechUrl(&#39;https://exsample.com/myaudio.mp3&#39;)
);
})
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;mp3を連続再生&#34;&gt;MP3を連続再生&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;responseHelper.setSimpleSpeech()&lt;/code&gt;で1回再生できましたが、&lt;code&gt;responseHelper.setSpeechList()&lt;/code&gt;では配列を与えることで連続再生が出来ます。&lt;/p&gt;
&lt;p&gt;(謎に)10回再生。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;//省略
let SpeechList = [];
for (let index = 0; index &amp;lt; 10; index++) {
SpeechList.push(clova.SpeechBuilder.createSpeechUrl(&#39;https://exsample.com/myaudio.mp3&#39;));
}
responseHelper.setSpeechList(SpeechList);
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;デモ&#34;&gt;デモ&lt;/h2&gt;
&lt;p&gt;シオカラーズが応援してくれるサンプル。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;のびすけ: 応援スキルを起動して&lt;/li&gt;
&lt;li&gt;Clova: mp3再生&lt;/li&gt;
&lt;li&gt;のびすけ: もっと応援して&lt;/li&gt;
&lt;li&gt;Clova: mp3を10回再生&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;center&gt;
&lt;blockquote class=&#34;instagram-media&#34; data-instgrm-captioned data-instgrm-permalink=&#34;https://www.instagram.com/p/Bm5rRMhBszI/?utm_source=ig_embed&#34; data-instgrm-version=&#34;9&#34; style=&#34; background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:540px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);&#34;&gt;&lt;div style=&#34;padding:8px;&#34;&gt; &lt;div style=&#34; background:#F8F8F8; line-height:0; margin-top:40px; padding:28.125% 0; text-align:center; width:100%;&#34;&gt; &lt;div style=&#34; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;&#34;&gt;&lt;/div&gt;&lt;/div&gt; &lt;p style=&#34; margin:8px 0 0 0; padding:0 4px;&#34;&gt; &lt;a href=&#34;https://www.instagram.com/p/Bm5rRMhBszI/?utm_source=ig_embed&#34; style=&#34; color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;&#34; target=&#34;_blank&#34;&gt;MP3再生してみている #asciihack&lt;/a&gt;&lt;/p&gt; &lt;p style=&#34; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;&#34;&gt;&lt;a href=&#34;https://www.instagram.com/n0bisuke/?utm_source=ig_embed&#34; style=&#34; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px;&#34; target=&#34;_blank&#34;&gt; n0bisuke&lt;/a&gt;さん(@n0bisuke)がシェアした投稿 - &lt;time style=&#34; font-family:Arial,sans-serif; font-size:14px; line-height:17px;&#34; datetime=&#34;2018-08-25T12:05:46+00:00&#34;&gt;2018年 8月月25日午前5時05分PDT&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt; &lt;script async defer src=&#34;//www.instagram.com/embed.js&#34;&gt;&lt;/script&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;音源、権利的に大丈夫かな&amp;hellip;&amp;hellip;ガクブル
（怒られたら直そう）&lt;/p&gt;
&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;
&lt;p&gt;基本の形は&lt;code&gt;clova.SpeechBuilder.createSpeechUrl(&#39;https://exsample.com/myaudio.mp3&#39;)&lt;/code&gt;で再生出来ます。&lt;/p&gt;
&lt;p&gt;1回再生は&lt;code&gt;responseHelper.setSimpleSpeech()&lt;/code&gt;で、連続再生は&lt;code&gt;responseHelper.setSpeechList()&lt;/code&gt;で&lt;code&gt;clova.SpeechBuilder.createSpeechUrl()&lt;/code&gt;を実行です。&lt;/p&gt;
&lt;p&gt;細かい仕様が気になる人は&lt;a href=&#34;https://clova-developers.line.me/guide/#/CEK/Guides/Build_Custom_Extension.md#DirectClientToPlayAudio&#34;&gt;ドキュメントのこの辺&lt;/a&gt;をご参照ください！&lt;/p&gt;
&lt;p&gt;ではでは、引き続きハッカソンがんばりましょ！&lt;/p&gt;</description></item><item><title>Azure WebAppsでカスタムドメイン&#43;SSL対応するメモ</title><link>https://dotstud.io/blog/webapps-custom-domain-ssl/</link><pubDate>Tue, 21 Aug 2018 15:51:00 +0900</pubDate><guid>https://dotstud.io/blog/webapps-custom-domain-ssl/</guid><description>
&lt;p&gt;こんにちは、代表の&lt;a href=&#34;https://dotstud.io/members/n0bisuke&#34;&gt;n0bisuke&lt;/a&gt;です。&lt;/p&gt;
&lt;p&gt;うちの会社では&lt;strong&gt;Azure&lt;/strong&gt;をよく使ってます。僕個人だとAzureのPaaSサービスの&lt;strong&gt;WebApps&lt;/strong&gt;（Heroku的なやつです）をよく使うのですが、カスタムドメインでの運用とSSL対応で詰まったので手順を紹介していきます。&lt;/p&gt;
&lt;p&gt;この手のサービスはUIがガンガン変わるので、2018年8月版って感じですね。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ちなみに今日は甲子園決勝で大阪桐蔭高校VS秋田県立金足農業高校の試合を見ながら記事を書いてます。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;金足頑張れ〜！&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;ja&#34;&gt;&lt;p lang=&#34;ja&#34; dir=&#34;ltr&#34;&gt;「さすがに見るでしょ」と言いながら甲子園観戦し始める東北出身のしゃちょー &lt;a href=&#34;https://twitter.com/hashtag/%E3%82%B9%E3%82%BF%E3%82%B8%E3%82%AA%E6%97%A5%E8%AA%8C?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#スタジオ日誌&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/dotstudio?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#dotstudio&lt;/a&gt; &lt;a href=&#34;https://t.co/hg89N055o2&#34;&gt;pic.twitter.com/hg89N055o2&lt;/a&gt;&lt;/p&gt; ドットスタジオ (@dotstud_io) &lt;a href=&#34;https://twitter.com/dotstud_io/status/1031780753850265600?ref_src=twsrc%5Etfw&#34;&gt;2018年8月21日&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;h2 id=&#34;azure-web-apps&#34;&gt;Azure Web Apps&lt;/h2&gt;
&lt;p&gt;Web Appsでは有料プラン以上でカスタムドメインを使える模様です。&lt;/p&gt;
&lt;p&gt;通常はWeb Appsにアプリケーションをデプロイすると&lt;code&gt;https://xxxxxxx.azurewebsites.net/&lt;/code&gt; といったURLが付与されます。&lt;/p&gt;
&lt;p&gt;デフォルトでSSL使えるし結構便利です。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/3500760306fa71fc507d80ecfa376c1d.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;web-appsでカスタムドメイン&#34;&gt;Web Appsでカスタムドメイン&lt;/h2&gt;
&lt;h3 id=&#34;web-apps側の設定&#34;&gt;Web Apps側の設定&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;カスタムドメイン&lt;/code&gt;のメニューを選択します。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/209/1.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;今回利用する&lt;code&gt;graspin.studio&lt;/code&gt;というドメインを入力して検証します。&lt;/p&gt;
&lt;p&gt;ホスト名レコードタイプの選択はAレコードとCNAMEがありますが、今回はAレコードにします。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/209/2.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;下の方に&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ホスト名の利用可否&lt;/li&gt;
&lt;li&gt;ドメイン所有権&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;の情報がありますが、たぶんこの時点でドメイン所有権の欄が×になってると思います。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/209/3.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;TXTとAレコードをドメイン事業者の管理画面で設定していきます。&lt;/p&gt;
&lt;p&gt;設定する値はAタイプにIPアドレス、TXTタイプにWebAppsのドメインです。
この画面を開いたままで次のドメイン事業者のサイトにいきましょう。&lt;/p&gt;
&lt;h3 id=&#34;お名前-com側での設定&#34;&gt;お名前.com側での設定&lt;/h3&gt;
&lt;p&gt;むーむードメインやValueドメインなど色々なサイトがありますが、今回僕は&lt;a href=&#34;https://www.onamae.com/&#34;&gt;お名前.com&lt;/a&gt;を利用してドメインを取得したのでお名前.comでの設定を紹介します。&lt;/p&gt;
&lt;p&gt;Azureの管理画面で表示されたIPアドレスをAタイプに、WebAppsのドメインをTXTタイプに設定して保存します。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/209/4.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;浸透するまで少し時間がかかるので10分程度待ちます。（場合によってはもっとかかる時もあります）&lt;/p&gt;
&lt;h3 id=&#34;web-apps側で再度確認&#34;&gt;Web Apps側で再度確認&lt;/h3&gt;
&lt;p&gt;もう一度Web Apps側で検証ボタンを押すと認証が成功していることがわかります。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/209/5.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ホスト名の追加&lt;/code&gt;ボタンがアクティブになるので、追加しましょう。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/209/6.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;追加されました。&lt;/p&gt;
&lt;p&gt;これで&lt;code&gt;http://graspin.studio&lt;/code&gt;でアクセスできるようになりました。&lt;/p&gt;
&lt;p&gt;Web Apps のカスタムドメイン設定は完了です。&lt;/p&gt;
&lt;h2 id=&#34;let-s-encryptでssl対応する&#34;&gt;Let&amp;rsquo;s EncryptでSSL対応する&lt;/h2&gt;
&lt;p&gt;カスタムドメインではSSL対応の設定をしないとHTTPSは使えないので、無料SSLサーバ証明書のLet&amp;rsquo;s Encryptを利用して設定してみます。&lt;/p&gt;
&lt;p&gt;手元の環境はmacOS High Sierraです。&lt;/p&gt;
&lt;h3 id=&#34;certbotインストール&#34;&gt;certbotインストール&lt;/h3&gt;
&lt;p&gt;certbotというコマンドで証明書を作るのですが、&lt;/p&gt;
&lt;p&gt;通常手順だと最初からmacOSだと厳しいみたいなエラーを言われました。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;WARNING: certbot-auto support for this macOS is DEPRECATED!
Please visit certbot.eff.org to learn how to download a version of
Certbot that is packaged for your system. While an existing version
of certbot-auto may work currently, we have stopped supporting updating
system packages for your system. Please switch to a packaged version
as soon as possible.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;a href=&#34;https://certbot.eff.org/lets-encrypt/osx-other&#34;&gt;https://certbot.eff.org/lets-encrypt/osx-other&lt;/a&gt; をみるとbrewで入れて欲しいらしいです。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;brew install certbot
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;証明書pemファイルの作成&#34;&gt;証明書pemファイルの作成&lt;/h3&gt;
&lt;p&gt;色々と調べたのですが、&lt;a href=&#34;https://blog.shibayan.jp/entry/20151111/1447172124&#34;&gt;しばやんさんの記事&lt;/a&gt;が分かりやすかったです。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sudo certbot certonly -a manual -d 利用するドメイン --server https://acme-v01.api.letsencrypt.org/directory --agree-dev-preview&lt;/code&gt;という形でコマンドをmacから実行します。今回は&lt;code&gt;graspin.studio&lt;/code&gt;を利用するので以下の内容になります。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo certbot certonly -a manual -d graspin.studio --server https://acme-v01.api.letsencrypt.org/directory --agree-dev-preview
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;コマンドを実行すると対話式のターミナルでYesとかAgreeとかの入力を求められますが適宜入力して進めます。&lt;/p&gt;
&lt;p&gt;以下のような表示が出て来ます。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Create a file containing just this data:
JQwu2TQUGdwCz5yApVx2SL5WpQOi5L2dwogABs6N6IU.XWM53woMKdjZiJrQHxBvqVcPSSUQPf1wfTUxo2e6d-g
And make it available on your web server at this URL:
http://graspin.studio/.well-known/acme-challenge/JQwu2TQUGdwCz5yApVx2SL5WpQOi5L2dwogABs6N6IU
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Press Enter to Continue
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ここで一度作業を止めましょう。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;これはドメインを所持してるか確認するためのフローで、&lt;code&gt;Let&#39;s Encrypt&lt;/code&gt;側から指定したエンドポイントに指定したレスポンスがあるようなサーバーを作ってね、という確認フローです。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;http://graspin.studio/.well-known/acme-challenge/JQwu2TQUGdwCz5yApVx2SL5WpQOi5L2dwogABs6N6IU&lt;/code&gt;というエンドポイントを用意して、&lt;code&gt;JQwu2TQUGdwCz5yApVx2SL5WpQOi5L2dwogABs6N6IU.XWM53woMKdjZiJrQHxBvqVcPSSUQPf1wfTUxo2e6d-g&lt;/code&gt;という表示がされるようにしてね、という意味です。&lt;/p&gt;
&lt;p&gt;ちなみにこの文字列たちは毎回変わるので適宜読み変えます。&lt;/p&gt;
&lt;p&gt;Node.js/Expressでサーバーを立ててましたが、以下のように設定しました。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&#39;use strict&#39;;
const express = require(&#39;express&#39;);
const app = express();
const PORT = process.env.PORT || 3000;
const bodyParser = require(&#39;body-parser&#39;);
app.use(bodyParser());
app.use(express.static(__dirname+&#39;/src/public&#39;));
//ここが今回の設定箇所
app.get(&#39;/.well-known/acme-challenge/JQwu2TQUGdwCz5yApVx2SL5WpQOi5L2dwogABs6N6IU&#39;, (req,res)=&amp;gt;{
res.send(`JQwu2TQUGdwCz5yApVx2SL5WpQOi5L2dwogABs6N6IU.XWM53woMKdjZiJrQHxBvqVcPSSUQPf1wfTUxo2e6d-g`);
});
app.listen(PORT);
console.log(`listening on *: ${PORT}`);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Web Appsにデプロイしなおして、サーバーを更新します。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/209/7.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;アクセスするとこのような感じで指定された文字列が表示されるようにします。
設定が完了したら、ターミナルの&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Press Enter to Continue
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;で止めていた入力を再開し、Enterを押しましょう。&lt;/p&gt;
&lt;p&gt;すると認証が始まり、問題なければ以下のように&lt;code&gt;Congratulations!&lt;/code&gt;と表示されます。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Waiting for verification...
Cleaning up challenges
Use of --agree-dev-preview is deprecated.
IMPORTANT NOTES:
- Congratulations! Your certificate and chain have been saved at:
/etc/letsencrypt/live/graspin.studio/fullchain.pem
Your key file has been saved at:
/etc/letsencrypt/live/graspin.studio/privkey.pem
Your cert will expire on 2018-11-18. To obtain a new or tweaked
version of this certificate in the future, simply run certbot
again. To non-interactively renew *all* of your certificates, run
&amp;quot;certbot renew&amp;quot;
- If you like Certbot, please consider supporting our work by:
Donating to ISRG / Let&#39;s Encrypt: https://letsencrypt.org/donate
Donating to EFF: https://eff.org/donate-le
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;デフォルトで以下の場所にpemファイルが作成されます。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;/etc/letsencrypt/live/ドメイン名/fullchain.pem&lt;/li&gt;
&lt;li&gt;/etc/letsencrypt/live/ドメイン名/privkey.pem&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;pemファイルからpfxファイルを作成&#34;&gt;pemファイルからpfxファイルを作成&lt;/h3&gt;
&lt;p&gt;Web Appsではpfxファイルを読み込ませてSSLの設定をします。&lt;/p&gt;
&lt;p&gt;pemファイルのあるディレクトリで以下を実行します。(この手順なくても良いかも)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mv privkey.pem privkey.key
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;privkey.pem&lt;/code&gt;を&lt;code&gt;privkey.key&lt;/code&gt;ファイルにリネームしました。&lt;/p&gt;
&lt;p&gt;以下で&lt;code&gt;pfx&lt;/code&gt;ファイルを作成します。パスワード設定を求められるので適当なものを設定します。設定しないとWebApps側で認識できないので設定しましょう。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;openssl pkcs12 -export -in fullchain.pem -inkey privkey.key -out sample.pfx
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Permissionなどのエラーが出る場合は&lt;code&gt;sudo&lt;/code&gt;実行しましょう。&lt;/p&gt;
&lt;h3 id=&#34;web-appsで設定&#34;&gt;Web Appsで設定&lt;/h3&gt;
&lt;p&gt;SSL設定メニューの&lt;code&gt;証明書アップロード&lt;/code&gt;からpfxファイルをアップロードします。このとき先ほどのパスワードの入力します。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/209/8.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;あとはバインディング追加からホスト名を選択し、証明書を選択すればOKです。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/209/9.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;確認&#34;&gt;確認&lt;/h3&gt;
&lt;p&gt;浸透するまでに時間がかかるのですが、少ししたら&lt;code&gt;https://graspin.studio&lt;/code&gt;にアクセスできるようになってました。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/7b48e9f2c1c4a91e2a543359f8ebe5c6.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;おまけ&#34;&gt;おまけ&lt;/h2&gt;
&lt;p&gt;追加で設定した内容です。簡単！&lt;/p&gt;
&lt;h3 id=&#34;httpにアクセスがあってもhttpsにリダイレクトさせる&#34;&gt;HTTPにアクセスがあってもHTTPSにリダイレクトさせる&lt;/h3&gt;
&lt;p&gt;SSL設定の&lt;code&gt;HTTPSのみ&lt;/code&gt;をオンにするだけです。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/209/10.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;http2対応&#34;&gt;HTTP2対応&lt;/h3&gt;
&lt;p&gt;アプリケーション設定の&lt;code&gt;HTTPバージョン&lt;/code&gt;を&lt;code&gt;2.0&lt;/code&gt;にするだけです。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/209/11.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;
&lt;p&gt;Web Appsの最近っぽい情報がなかったのでまとめてみました。&lt;/p&gt;
&lt;p&gt;備忘録ですが他の誰かの参考にもなれば幸いです！&lt;/p&gt;</description></item><item><title>【夏の自由工作2018】夏が暑すぎるのでオゾン発生素子でオゾンを発生させ（ようとし）た</title><link>https://dotstud.io/blog/summer-homework-2018-takudooon/</link><pubDate>Fri, 17 Aug 2018 12:24:56 +0900</pubDate><guid>https://dotstud.io/blog/summer-homework-2018-takudooon/</guid><description>
&lt;p&gt;夏のうだるような暑さが真っ盛りの時期となりました。いつの間にか時間も過ぎ、お盆です。&lt;/p&gt;
&lt;p&gt;そんな中、&lt;strong&gt;dotstudioからの宿題として「夏休みの自由工作」&lt;/strong&gt;を命じられました。&lt;/p&gt;
&lt;p&gt;そして、提出期限が迫っています。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/c216cf5d-b1ee-1aee-6ee0-6b63f8fd8ef7.jpeg&#34; alt=&#34;なやみ.jpg&#34; /&gt;
提出期限5日前の僕。&lt;/p&gt;
&lt;p&gt;天を仰ぎながら、&lt;/p&gt;
&lt;p&gt;「やばい、やばい、やばい！！！！！提出期限になっちまう！！！！！」&lt;/p&gt;
&lt;p&gt;と心で悲鳴を上げています。&lt;/p&gt;
&lt;p&gt;まるで、&lt;strong&gt;夏休みが明けようとしている小学生の気分&lt;/strong&gt;です。人は学習しませんね。&lt;/p&gt;
&lt;p&gt;「なにをつくろうか……なにつくろうか……。」&lt;/p&gt;
&lt;p&gt;とぶつぶつ唱えながら考えていると、&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/659265cf-97b3-9ae3-7409-d8eb0b56dc60.jpeg&#34; alt=&#34;IMG_20180706_152144.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;「そういえば、&lt;strong&gt;オゾン発生素子&lt;/strong&gt;という謎な素子を買ったなぁ」&lt;/p&gt;
&lt;p&gt;ということを思い出しまして、&lt;/p&gt;
&lt;p&gt;「もしかしたら、&lt;strong&gt;オゾン発生素子を使えば地球温暖化を救える&lt;/strong&gt;！僕は&lt;strong&gt;救世主になれる&lt;/strong&gt;のか！」&lt;/p&gt;
&lt;p&gt;なんてことを思ったので、&lt;strong&gt;救世主になるべく謎のオゾン発生素子を使ってみたい&lt;/strong&gt;と思います。&lt;/p&gt;
&lt;h2 id=&#34;そもそもオゾンってなんだろう&#34;&gt;そもそもオゾンってなんだろう？&lt;/h2&gt;
&lt;p&gt;wikipediaを参照すると、オゾンとは、以下のようにあります。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;3つの酸素原子からなる酸素の同素体で、分子式はO&lt;sub&gt;3&lt;/sub&gt;。腐食性が高く、生臭く特徴的な刺激臭を持つ有毒な気体。そして、大気中にとても低い濃度で存在している。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;また「オゾン層」という言葉をよく聞くかと思います。こちらは気象庁の説明から引用します。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;大気中のオゾンは成層圏（約10～50km上空）に約90％存在しており、このオゾンの多い層を一般的にオゾン層という。そして、オゾン層は太陽からの有害な紫外線を吸収し、地上の生態系を保護している。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;つまり、なんかすごいやつです。&lt;/p&gt;
&lt;p&gt;その一方で、wikipediaによるとこんな性質と利用方法があります。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;オゾンには強力な酸化作用&lt;/strong&gt;があり、&lt;strong&gt;殺菌・ウイルスの不活化・脱臭・脱色・有機物の除去&lt;/strong&gt;などに用いられる&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;むむむ、脱臭？どうやら、&lt;strong&gt;オゾン発生素子をつかって脱臭装置&lt;/strong&gt;をつくることができるようです。&lt;/p&gt;
&lt;p&gt;これでは&lt;strong&gt;地球温暖化の救世主ではなく、いつも通り消臭デバイスつくるたくろーどん&lt;/strong&gt;ですね。ちなみに僕は公衆トイレ1級判定士です（自称）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://dotstud.io/blog/m5stack-toilet-smell-map/&#34;&gt;M5Stack+GPS+臭気センサをつかってトイレの臭いマップをつくりたい！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://qiita.com/minwinmin/private/868ca070edd6f5a95dfa&#34;&gt;遠隔消臭装置をつくって「気の利くナイスガイ」なろう！基本実装編&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://qiita.com/minwinmin/private/4212af4cfcef7c06737a&#34;&gt;遠隔消臭装置をつくって「気の利くナイスガイ」になろう！外装実装編&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;オゾン発生素子ってなんだろう&#34;&gt;オゾン発生素子ってなんだろう？&lt;/h2&gt;
&lt;p&gt;オゾン発生素子は、とてもシンプルで小さいです。&lt;/p&gt;
&lt;p&gt;仕組みは、&lt;strong&gt;絶縁物を挟んだ電極間に交流高電圧を印加すると無声放電が発生し、そこに酸素が通過することでオゾンが発生する&lt;/strong&gt;らしいです。&lt;/p&gt;
&lt;p&gt;とりあえず&lt;strong&gt;直流電圧8800[V]&lt;/strong&gt;と&lt;strong&gt;交流電圧5~6[V]&lt;/strong&gt;をかければ動くようです。
&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/93024de4-a0ea-fdfc-f346-e86cbbf284d8.png&#34; alt=&#34;素子.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;8800[V]&lt;/strong&gt;！
普段使わないような高電圧が必要なようです。
なので、電圧を昇圧させる回路をまずつくってみます。&lt;/p&gt;
&lt;h2 id=&#34;そのまえに今回使用する電子部品&#34;&gt;そのまえに今回使用する電子部品&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/6e279042-ccdb-ccd6-fc8a-5e5a6f2f3820.jpeg&#34; alt=&#34;P_20180810_181024_vHDR_On.jpg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://wakamatsu.co.jp/biz/products/list.php?category_id=4904&#34;&gt;オゾン発生素子　KC-12&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://akizukidenshi.com/catalog/g/gI-00934/&#34;&gt;汎用整流用ダイオード 1000V 1A 1N4007&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://akizukidenshi.com/catalog/g/gP-08949/&#34;&gt;セラミックコンデンサ 1000pF 1kV±10%&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.amazon.co.jp/dp/B079WWDPY1/ref=asc_df_B079WWDPY12473963/?tag=jpgo-22&amp;amp;creative=9303&amp;amp;creativeASIN=B079WWDPY1&amp;amp;linkCode=df0&amp;amp;hvadid=266446530473&amp;amp;hvpos=1o2&amp;amp;hvnetw=g&amp;amp;hvrand=6941473763281127740&amp;amp;hvpone=&amp;amp;hvptwo=&amp;amp;hvqmt=&amp;amp;hvdev=c&amp;amp;hvdvcmdl=&amp;amp;hvlocint=&amp;amp;hvlocphy=1009328&amp;amp;hvtargid=pla-439996662693&amp;amp;th=1&amp;amp;psc=1&#34;&gt;写るんです(使い捨てインスタントカメラ)&lt;/a&gt;：カメラ内の回路を部品どりします。&lt;/li&gt;
&lt;li&gt;ユニバーサル基板&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;※&lt;strong&gt;コンデンサとダイオードは耐圧の高いものを選びましょう&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;昇圧回路-コッククロフト-ウォルトン回路-をつくる&#34;&gt;昇圧回路「コッククロフト・ウォルトン回路」をつくる&lt;/h2&gt;
&lt;p&gt;コッククロフト・ウォルトン回路は昇圧するためによく使われます。&lt;/p&gt;
&lt;p&gt;とてもシンプルで、必要なものは&lt;strong&gt;交流電圧、コンデンサ、ダイオードの3つ&lt;/strong&gt;です。&lt;/p&gt;
&lt;p&gt;下記の図がその回路図を表しています。&lt;strong&gt;コンデンサとダイオードを繰り返し組み合わせていくと大きな電圧を得る&lt;/strong&gt;ことができます。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/4165cafa-b5f6-054b-de45-ec2e145f0d10.png&#34; alt=&#34;回路.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;この回路を実装してみます。
&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/23e39e1e-cbba-ae43-4f37-1c519510057b.jpeg&#34; alt=&#34;P_20180813_184025_vHDR_On.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;これを回路図に示すと以下のようになります。
&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/915f6193-fbf9-1589-eadd-3d8147794fae.png&#34; alt=&#34;回路2.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;次に、&lt;strong&gt;交流電圧を発生させる部分&lt;/strong&gt;をつくります。これには、&lt;strong&gt;「写ルンです（インスタントカメラ）」の部品&lt;/strong&gt;を使います。&lt;/p&gt;
&lt;p&gt;これを……
&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/d1d47930-d227-ea9f-33b0-89faab70df05.jpeg&#34; alt=&#34;P_20180814_130305_vHDR_On.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;こうして……
&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/3ede8d29-d7e7-cae8-617c-6db05989e8dd.jpeg&#34; alt=&#34;P_20180814_131833_vHDR_On.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;基板を取り出します。この基板はカメラのフラッシュを発生させる回路がついていて、これを交流電圧源とします。
&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/a2066a26-7d4f-df92-4fd5-4a233b405698.jpeg&#34; alt=&#34;P_20180814_131937_vHDR_On.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ついているフラッシュライトとコンデンサは外します。
&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/be5eea34-b7b7-7688-1fc0-ccdce13a3471.jpeg&#34; alt=&#34;部品どり.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;上記の回路のとおりつくります。
&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/47d5d31d-23b1-1be9-c9ff-fbc95e9b8db4.png&#34; alt=&#34;全体の回路図.png&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;オゾンを発生させてみる&#34;&gt;オゾンを発生させてみる&lt;/h2&gt;
&lt;p&gt;完成したら適当な箱にいれて、電源を入れてみます。
&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/0a929220-85be-b86c-803a-04d3983a534d.jpeg&#34; alt=&#34;P_20180814_214855_vHDR_On.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://qiita-image-store.s3.amazonaws.com/0/212276/42f8c0ea-20cf-0864-53d1-6ac8cfae0404.gif&#34; alt=&#34;昇圧失敗.gif&#34; /&gt;&lt;/p&gt;
&lt;p&gt;むむむ、&lt;strong&gt;2つの電極を近づければ、放電するはず&lt;/strong&gt;ですが、&lt;strong&gt;放電しません&lt;/strong&gt;！&lt;/p&gt;
&lt;p&gt;なんでだろう……。&lt;/p&gt;
&lt;h2 id=&#34;終わりに&#34;&gt;終わりに&lt;/h2&gt;
&lt;p&gt;見事に失敗してしまいました。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;回路のところどころで軽い放電は確認できた&lt;/strong&gt;のですが、残念ながら&lt;strong&gt;全体として高電圧を得ることは今回できませんでした&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;そのため、&lt;strong&gt;謎のオゾン発生素子はお預け&lt;/strong&gt;となりました。原因を考えつつ、改良していきたいと思います。&lt;/p&gt;
&lt;p&gt;電子工作は失敗することもありますが、楽しいので是非チャレンジしてみてください。&lt;/p&gt;
&lt;p&gt;たくろーどんのチャレンジも続きます。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;参考: &lt;a href=&#34;https://dora.bk.tsukuba.ac.jp/~takeuchi/?%E9%9B%BB%E6%B0%97%E5%9B%9E%E8%B7%AF%2F%E3%82%B3%E3%83%83%E3%82%AF%E3%82%AF%E3%83%AD%E3%83%95%E3%83%88%E3%83%BB%E3%82%A6%E3%82%A9%E3%83%AB%E3%83%88%E3%83%B3%E5%9B%9E%E8%B7%AF&#34;&gt;コッククロフト・ウォルトン回路の仕組み&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;parent&#34;&gt;
&lt;div class=&#34;dialogue&#34;&gt;
&lt;div class=&#34;speaker&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/members/chantoku/author.png&#34; /&gt;
&lt;b&gt;ちゃんとく&lt;/b&gt;
&lt;/div&gt;
&lt;div class=&#34;text&#34;&gt;
完成までたどり着けなかったのは残念ですが、なんかすごそうなので90点です。
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;style&gt;
.parent {
position: relative;
margin: 2em 0;
}
.dialogue {
padding: 30px;
position: relative;
margin: auto;
border: 1px solid #C0C0C0;
width: 600px;
display: table;
box-shadow: 0 3px 4px rgba(0, 0, 0, 0.32);
}
.speaker {
width: 70px;
height: 70px;
margin-right: 30px;
padding-right: 10px;
display: table-cell;
vertical-align: middle;
font-size: 90%;
}
.speaker img {
border-radius: 50%;
border: 2px solid pink;
}
.text {
display: table-cell;
padding: 0;
vertical-align: middle;
padding-left: 30px;
}
&lt;/style&gt;</description></item><item><title>【夏の自由工作2018】学校の工作課題におすすめ！毛糸と和紙を使ってランプシェード作ってみた</title><link>https://dotstud.io/blog/summer-homework-2018-kiki/</link><pubDate>Thu, 16 Aug 2018 12:24:37 +0900</pubDate><guid>https://dotstud.io/blog/summer-homework-2018-kiki/</guid><description>
&lt;p&gt;みなさんこんにちは、テクニカルエディターの&lt;a href=&#34;https://dotstud.io/members/kiki/&#34;&gt;きき&lt;/a&gt;です。&lt;/p&gt;
&lt;p&gt;突然ですが、dotstudioで自由工作記事を執筆するということで正直な気持ちを申し上げます。&lt;/p&gt;
&lt;p&gt;アイデアが何も思い浮かびません。本当に、恥ずかしいことながらこれっっっっぽっっっっちも浮かばないのです。切ない。他のみんなはすごいのに、ううう……。&lt;/p&gt;
&lt;p&gt;ということで！！！&lt;/p&gt;
&lt;p&gt;いっそのこと振り切って小学生・中学生の夏休みの自由工作課題向け！&lt;strong&gt;簡単に作れるランプシェード&lt;/strong&gt;を作りまーす！LEDを使っているので許してください……！&lt;/p&gt;
&lt;h2 id=&#34;準備するよ&#34;&gt;準備するよ&lt;/h2&gt;
&lt;p&gt;youtubeを見るのが大好きな私は、ひたすら「電子工作 初心者」「電子工作 LED」などのワードでひたすら検索しまくり、見つけたのが今回作るランプシェード。毛糸で作るバージョンと和紙を作るバージョンの2種類作ってみました。&lt;/p&gt;
&lt;h3 id=&#34;使うもの&#34;&gt;使うもの&lt;/h3&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/204/1.png&#34; alt=&#34;1&#34;&gt;
&lt;/center&gt;
&lt;p&gt;【毛糸のランプシェード】&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;毛糸 ×2&lt;/li&gt;
&lt;li&gt;紙コップ ×1&lt;/li&gt;
&lt;li&gt;木工用ボンド ×1&lt;/li&gt;
&lt;li&gt;手袋 ×1&lt;/li&gt;
&lt;li&gt;水風船 ×好きなだけ&lt;/li&gt;
&lt;li&gt;ハケ&lt;/li&gt;
&lt;li&gt;つまようじ ×1&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;【和紙のランプシェード】&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;和紙 ×1（今回はフラワーペーパーを使っています）&lt;/li&gt;
&lt;li&gt;紙コップ ×1&lt;/li&gt;
&lt;li&gt;水のり ×1&lt;/li&gt;
&lt;li&gt;手袋 ×1&lt;/li&gt;
&lt;li&gt;風船（大きいやつ） ×好きなだけ&lt;/li&gt;
&lt;li&gt;ハケ&lt;/li&gt;
&lt;li&gt;つまようじ ×1&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;材料は全部100均で購入できるので準備自体がささっとできます。&lt;/p&gt;
&lt;h3 id=&#34;使用したled&#34;&gt;使用したLED&lt;/h3&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/204/2.png&#34; alt=&#34;2&#34;&gt;
&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.amazon.co.jp/LED%E3%82%A4%E3%83%AB%E3%83%9F%E3%83%8D%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%A9%E3%82%A4%E3%83%88-LeHom-%E3%82%B9%E3%83%88%E3%83%AA%E3%83%B3%E3%82%B0%E3%83%A9%E3%82%A4%E3%83%88-%E3%83%95%E3%82%A7%E3%82%A2%E3%83%AA%E3%83%BC%E3%83%A9%E3%82%A4%E3%83%88-%E3%82%A6%E3%82%A9%E3%83%BC%E3%83%A0%E3%83%9B%E3%83%AF%E3%82%A4%E3%83%88/dp/B075B49YB1&#34;&gt;LEDイルミネーションライト 5M50LED&lt;/a&gt;: &lt;u&gt;単三電池3本で動きます&lt;/u&gt;&lt;/li&gt;
&lt;li&gt;LEDキャンドルライト: 100均で買いました（100均すごい）&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;早速つくるよ&#34;&gt;早速つくるよ&lt;/h2&gt;
&lt;h3 id=&#34;毛糸のランプシェードのつくりかた&#34;&gt;毛糸のランプシェードのつくりかた&lt;/h3&gt;
&lt;p&gt;①楽器を吹くかのような心意気で&lt;strong&gt;水風船を膨らませます&lt;/strong&gt;。大きさは全体的に丸くなるくらいですね。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/204/3.png&#34; alt=&#34;3&#34;&gt;
&lt;/center&gt;
&lt;p&gt;今回は9個つくりたいので予備に10個膨らませました。童心に戻りますね。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/204/9.png&#34; alt=&#34;9&#34;&gt;
&lt;/center&gt;
&lt;p&gt;②&lt;strong&gt;紙コップに木工用ボンドと水を入れて混ぜます&lt;/strong&gt;。量は目分量です（ざっくり）。&lt;/p&gt;
&lt;p&gt;③&lt;strong&gt;毛糸を風船にくるくる巻きつけます&lt;/strong&gt;。力加減のバランスが地味に難しくて、緩くなると解けてしまい、きつくなると風船が変形します。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/204/4.png&#34; alt=&#34;4&#34;&gt;
&lt;/center&gt;
&lt;p&gt;④&lt;strong&gt;ハケで①で作ったボンド水を毛糸に塗ります。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;⑤&lt;strong&gt;半日乾かします。&lt;/strong&gt;&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/204/5.png&#34; alt=&#34;5&#34;&gt;
&lt;/center&gt;
&lt;p&gt;触ってみて、コツコツ音がなるようになっていたらいい感じです。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/204/6.png&#34; alt=&#34;6&#34;&gt;
&lt;/center&gt;
&lt;p&gt;⑥&lt;strong&gt;つまようじで風船を割ります&lt;/strong&gt;。音フェチなら絶対喜ぶであろう音を聞くことができますよ。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/204/7.png&#34; alt=&#34;7&#34;&gt;
&lt;/center&gt;
&lt;p&gt;⑦&lt;strong&gt;LEDイルミネーションライトの電球を毛糸の中に入れます&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;完成形はのちほど披露しますね！次は和紙のランプシェードです。&lt;/p&gt;
&lt;h3 id=&#34;和紙のランプシェードのつくりかた&#34;&gt;和紙のランプシェードのつくりかた&lt;/h3&gt;
&lt;p&gt;①楽器を吹くかのような心意気の2倍の肺活量で&lt;strong&gt;風船を膨らませます&lt;/strong&gt;。こちらも丸い形になるように膨らませます。&lt;/p&gt;
&lt;p&gt;②&lt;strong&gt;和紙をちぎります&lt;/strong&gt;。小さくちぎりすぎると貼るときに大変なので、大きいサイズでも用意しておくと疲れません。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/204/8.png&#34; alt=&#34;8&#34;&gt;
&lt;/center&gt;
&lt;p&gt;③&lt;strong&gt;紙コップに水のりと水を入れて混ぜます&lt;/strong&gt;。こちらも量は目分量です。&lt;/p&gt;
&lt;p&gt;④&lt;strong&gt;風船に和紙をペタペタ貼ります&lt;/strong&gt;。破けてしまうと切ないので、三重くらいにしました。&lt;/p&gt;
&lt;p&gt;⑤&lt;strong&gt;半日乾かします&lt;/strong&gt;。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/204/10.png&#34; alt=&#34;10&#34;&gt;
&lt;/center&gt;
&lt;p&gt;⑥&lt;strong&gt;つまようじで風船を割ります&lt;/strong&gt;。毛糸の時とはまた違う音フェチの楽しみがあります。&lt;/p&gt;
&lt;p&gt;⑦&lt;strong&gt;キャンドルライトの上に被せます&lt;/strong&gt;。&lt;/p&gt;
&lt;h2 id=&#34;完成したよ&#34;&gt;完成したよ&lt;/h2&gt;
&lt;h3 id=&#34;毛糸のランプシェードはうつくし&#34;&gt;毛糸のランプシェードはうつくし&lt;/h3&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/204/11.png&#34; alt=&#34;11&#34;&gt;
&lt;/center&gt;
&lt;p&gt;思っていたよりそれっぽいインテリア感が出ている……！&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/04fa3635bc80d3d88cda862fc6005dc4.gif&#34; alt=&#34;Image from Gyazo&#34; /&gt;&lt;/p&gt;
&lt;p&gt;チカチカさせるとこんな感じです。&lt;/p&gt;
&lt;p&gt;我が家の門番、くま大先生にも巻きつけてみました。めっちゃハートウォーミングじゃないですかせんせいっ……！！&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/47c12fa8aad3a4b83883ac8352d34b27.gif&#34; alt=&#34;Image from Gyazo&#34; /&gt;
&lt;center&gt;
くま大先生「可愛いし、なかなか悪くないね」
&lt;/center&gt;&lt;/p&gt;
&lt;h3 id=&#34;和紙のランプシェードはいとをかし&#34;&gt;和紙のランプシェードはいとをかし&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/fa2ca28729df24f48ce5ff5a392aa7e5.gif&#34; alt=&#34;Image from Gyazo&#34; /&gt;&lt;/p&gt;
&lt;p&gt;和紙のランプシェードは、LEDの橙色が強すぎて、ピンク色感がなくなってしまいました。もうちょっと薄めな色のLEDにしたらピンク感出るのかなぁ……。&lt;/p&gt;
&lt;p&gt;でも、なんだか風情ありますね。心が浄化されます。&lt;/p&gt;
&lt;h2 id=&#34;おわりに&#34;&gt;おわりに&lt;/h2&gt;
&lt;p&gt;お子さま向けの自由工作をやってみましたが、いかがでしたでしょうか？「夏休みの自由課題に何作ればいいんや！」と悩んでいる方はぜひ作ってみてくださいー！&lt;/p&gt;
&lt;p&gt;ついに明日は自由工作企画最終日！宇宙エンジニアの&lt;a href=&#34;https://dotstud.io/members/takudooon/&#34;&gt;たくろーどん&lt;/a&gt;です！&lt;/p&gt;
&lt;div class=&#34;parent&#34;&gt;
&lt;div class=&#34;dialogue&#34;&gt;
&lt;div class=&#34;speaker&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/members/chantoku/author.png&#34; /&gt;
&lt;b&gt;ちゃんとく&lt;/b&gt;
&lt;/div&gt;
&lt;div class=&#34;text&#34;&gt;
かわいい。100点。えこひいきです。
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;style&gt;
.parent {
position: relative;
margin: 2em 0;
}
.dialogue {
padding: 30px;
position: relative;
margin: auto;
border: 1px solid #C0C0C0;
width: 600px;
display: table;
box-shadow: 0 3px 4px rgba(0, 0, 0, 0.32);
}
.speaker {
width: 70px;
height: 70px;
margin-right: 30px;
padding-right: 10px;
display: table-cell;
vertical-align: middle;
font-size: 90%;
}
.speaker img {
border-radius: 50%;
border: 2px solid pink;
}
.text {
display: table-cell;
padding: 0;
vertical-align: middle;
padding-left: 30px;
}
&lt;/style&gt;</description></item><item><title>【夏の自由工作2018】立体的なデザインを表現できるLEDキューブを作ってみた</title><link>https://dotstud.io/blog/summer-homework-2018-sasakisan/</link><pubDate>Wed, 15 Aug 2018 10:30:14 +0900</pubDate><guid>https://dotstud.io/blog/summer-homework-2018-sasakisan/</guid><description>
&lt;p&gt;こんにちは、3日目担当の&lt;a href=&#34;https://dotstud.io/members/tomato/&#34;&gt;ささきさん&lt;/a&gt;です。突然ですが、みなさんの学生時代の夏休みの思い出はどんなものがあるでしょうか？&lt;/p&gt;
&lt;p&gt;僕の夏休みといえば、毎年夏休み終わりギリギリになってようやく宿題や工作をはじめて結局終わらず……みたいなことを一番思い出します（笑）。&lt;/p&gt;
&lt;p&gt;まさか社会人になってから宿題をやるとは思いませんでしたが、&lt;strong&gt;今年の宿題は最後までやりきる&lt;/strong&gt;ということを頑張っていきたいと思います！&lt;/p&gt;
&lt;h2 id=&#34;光る立方体-ledキューブを作ってみよう&#34;&gt;光る立方体！LEDキューブを作ってみよう&lt;/h2&gt;
&lt;p&gt;さて、今回はLEDをつないでキューブ状にしていく、&lt;strong&gt;LEDキューブ&lt;/strong&gt;を作ってみたいと思います。&lt;/p&gt;
&lt;p&gt;LEDを使って電子工作をするときは、普通だと平面的にブレッドボードに挿したり半田付けしたりしますよね。LEDキューブは、平面的に配線するだけでなく、縦にも配線していきます。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/ledcube.png&#34; alt=&#34;ledcube&#34;&gt;
─ LEDキューブの画像検索
&lt;/center&gt;
&lt;p&gt;今回は各面9個ずつの小さなものですが、たくさん繋いで大きなものを作ることもできるので、自由工作にもピッタリだと思います！&lt;/p&gt;
&lt;h2 id=&#34;用意するもの&#34;&gt;用意するもの&lt;/h2&gt;
&lt;h3 id=&#34;arduino-uno-http-akizukidenshi-com-catalog-g-gm-07385&#34;&gt;&lt;a href=&#34;http://akizukidenshi.com/catalog/g/gM-07385/&#34;&gt;Arduino Uno&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Arduino Unoは、電子工作では定番の開発ボードで、電子回路の制御等をすることができます。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/arduino.png&#34; alt=&#34;arduino&#34;&gt;
&lt;/center&gt;
&lt;h3 id=&#34;5mm赤色led-http-akizukidenshi-com-catalog-g-gi-11655-27個&#34;&gt;&lt;a href=&#34;http://akizukidenshi.com/catalog/g/gI-11655/&#34;&gt;5mm赤色LED&lt;/a&gt; 27個&lt;/h3&gt;
&lt;p&gt;今回は赤く光るLEDを用意しました。光る色を指定できるフルカラーLEDを使っても面白いですね！&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/led.png&#34; alt=&#34;led&#34;&gt;
&lt;/center&gt;
&lt;h3 id=&#34;150ω抵抗-http-akizukidenshi-com-catalog-g-gr-25151-3個&#34;&gt;&lt;a href=&#34;http://akizukidenshi.com/catalog/g/gR-25151/&#34;&gt;150Ω抵抗&lt;/a&gt; 3個&lt;/h3&gt;
&lt;p&gt;電流を調整するカーボン抵抗です。色によって何Ωか見分けることができます。&lt;/p&gt;
&lt;p&gt;詳細はドキュメントの&lt;a href=&#34;https://dotstud.io/docs/resistance/#%E6%8A%B5%E6%8A%97%E5%99%A8%E3%81%AE%E7%A8%AE%E9%A1%9E&#34;&gt;抵抗器&lt;/a&gt;を参照してください。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/carbon.png&#34; alt=&#34;carbon&#34;&gt;
&lt;/center&gt;
&lt;h3 id=&#34;ユニバーサル基板-http-akizukidenshi-com-catalog-g-gp-00517&#34;&gt;&lt;a href=&#34;http://akizukidenshi.com/catalog/g/gP-00517/&#34;&gt;ユニバーサル基板&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;部品を半田付けするための穴が並んだ基板です。それぞれの穴には銅箔（ランド）が付いていて、ジャンパや脚を半田して配線していきます。&lt;/p&gt;
&lt;p&gt;自分で回路を組む場合は、ブレッドボードなどで動作を確認してから半田付けするのがオススメです。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/universalboard.png&#34; alt=&#34;universalboard&#34;&gt;
&lt;/center&gt;
&lt;h3 id=&#34;ジャンパー線-24本&#34;&gt;ジャンパー線 24本&lt;/h3&gt;
&lt;p&gt;抵抗やLEDなどの電子部品を繋ぐときに使います。&lt;/p&gt;
&lt;p&gt;ジャンパ線には1cmなどの短いものから30cm以上の長いものまであります。今回は、10cmくらいのものが使いやすいと思います。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/jumper.png&#34; alt=&#34;jumper&#34;&gt;
&lt;/center&gt;
&lt;h3 id=&#34;ブレッドボード&#34;&gt;ブレッドボード&lt;/h3&gt;
&lt;p&gt;電子回路を組む際に半田付けなしで手軽に配線をすることができる基板です。&lt;/p&gt;
&lt;p&gt;半田付けをしないので、回路を間違っても簡単に組み直すことができる利点があります。&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/bread.png&#34; alt=&#34;bread&#34;&gt;
&lt;/center&gt;
&lt;h2 id=&#34;ledキューブの半田付け&#34;&gt;LEDキューブの半田付け&lt;/h2&gt;
&lt;p&gt;回路の作り方を説明していきます。&lt;/p&gt;
&lt;h3 id=&#34;ledの脚の加工&#34;&gt;LEDの脚の加工&lt;/h3&gt;
&lt;p&gt;まず、LEDの脚を加工していきます。&lt;/p&gt;
&lt;p&gt;アノード（長い方の脚、プラス側）を画像のように根元から90度に曲げます。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/anode.png&#34; alt=&#34;anode&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;次に、曲げた足をさらに90度曲げます。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/anode2.png&#34; alt=&#34;anode2&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;アノードを曲げ終わったら、カソード（短い方の脚、マイナス側）をアノードと90度になるよう根元から曲げます。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/casode.png&#34; alt=&#34;casode&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;この手順をLED27個分繰り返します。&lt;/p&gt;
&lt;h3 id=&#34;ベース組み&#34;&gt;ベース組み&lt;/h3&gt;
&lt;p&gt;LEDのカソード同士を半田付けします。&lt;strong&gt;半田部分がアノードにくっつかないよう注意&lt;/strong&gt;してください。&lt;/p&gt;
&lt;p&gt;LED3つ組み（写真上部）を3セット、LED2つ組み（写真下部）を9セット作ります。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/3set.png&#34; alt=&#34;3set&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/2set.png&#34; alt=&#34;2set&#34;&gt;
&lt;/center&gt;
&lt;h3 id=&#34;面を作る&#34;&gt;面を作る&lt;/h3&gt;
&lt;p&gt;LED3つ組みのそれぞれのカソードに、LED2つ組みを繋げていきます。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/3-2.png&#34; alt=&#34;3-2&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;3セット分繋げ終わると、以下のような感じになります。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/3-3.png&#34; alt=&#34;3-3&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;h3 id=&#34;立方体を作る&#34;&gt;立方体を作る&lt;/h3&gt;
&lt;p&gt;今度は、上記でできた3セットを縦に重ね、アノード同士を繋げていきます。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/vertical.png&#34; alt=&#34;vertical&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;3段分繋げ終わるとLEDキューブは完成です。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/cube.png&#34; alt=&#34;cube&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;h3 id=&#34;ユニバーサル基板へ取り付ける&#34;&gt;ユニバーサル基板へ取り付ける&lt;/h3&gt;
&lt;p&gt;ユニバーサル基板にキューブのアノード9箇所を取り付け、それぞれにジャンパー線を繋ぎます。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/universal.png&#34; alt=&#34;universal&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;p&gt;カソード3箇所（宙に浮いた脚）にも、それぞれジャンパー線を半田で繋ぎます。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/casode2.png&#34; alt=&#34;casode2&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;h2 id=&#34;回路を組む&#34;&gt;回路を組む&lt;/h2&gt;
&lt;p&gt;この回路図はLED CUBEを真上から見たものになります。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/circuit.png&#34; alt=&#34;circuit&#34;&gt;
&lt;/center&gt;
Arduinoの0〜8番ピンにアノードを、9〜11番ピンには抵抗を挟みカソードを接続します。&lt;/p&gt;
&lt;p&gt;配線すると下記のようになります。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/203/circuit2.png&#34; alt=&#34;circuit2&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;h2 id=&#34;プログラム&#34;&gt;プログラム&lt;/h2&gt;
&lt;p&gt;このプログラムはLEDを1つ1つ順番に点灯させるプログラムです。Arduino IDEという専用のフリーソフトを使って書き込みます。&lt;/p&gt;
&lt;p&gt;詳細はドキュメントの&lt;a href=&#34;https://dotstud.io/docs/arduinoide-setup/&#34;&gt;Arduino IDEをPCにインストール&lt;/a&gt;からご覧ください。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// LEDの列のカウンタ
int colCount;
// LEDの段のカウンタ
int rowCount;
void setup() {
colCount = 0;
rowCount = 9;
// 使うピンをセットアップ
pinMode(0, OUTPUT);
pinMode(1, OUTPUT);
pinMode(2, OUTPUT);
pinMode(3, OUTPUT);
pinMode(4, OUTPUT);
pinMode(5, OUTPUT);
pinMode(6, OUTPUT);
pinMode(7, OUTPUT);
pinMode(8, OUTPUT);
pinMode(9, OUTPUT);
pinMode(10, OUTPUT);
pinMode(11, OUTPUT);
}
void loop() {
// LEDを500ms光らせて消す
digitalWrite(colCount, HIGH);
digitalWrite(rowCount, LOW);
delay(500);
digitalWrite(colCount, LOW);
digitalWrite(rowCount, HIGH);
// 段と列をずらす
rowCount++;
if (rowCount == 12) {
rowCount = 9;
if (colCount != 8) {
colCount++;
} else {
colCount = 0;
}
}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;光らせてみよう&#34;&gt;光らせてみよう&lt;/h2&gt;
&lt;p&gt;プログラムを書き込んだらいよいよ完成です！&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/203/cube.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;
&lt;p&gt;今回の夏休み自由工作は無事完成させることができました！&lt;/p&gt;
&lt;p&gt;赤色LEDの3×3×3で作りましたが、違う色のLEDを使ったり、個数を増やしたりすることで、表現したいものの再現度を高めることができます。&lt;/p&gt;
&lt;p&gt;皆さんもぜひLEDキューブを作ってみてください！&lt;/p&gt;
&lt;p&gt;明日の担当はテクニカルエディター・&lt;a href=&#34;https://dotstud.io/members/kiki&#34;&gt;きき&lt;/a&gt;さんです。お楽しみに！&lt;/p&gt;
&lt;div class=&#34;parent&#34;&gt;
&lt;div class=&#34;dialogue&#34;&gt;
&lt;div class=&#34;speaker&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/members/chantoku/author.png&#34; /&gt;
&lt;b&gt;ちゃんとく&lt;/b&gt;
&lt;/div&gt;
&lt;div class=&#34;text&#34;&gt;
初心者向けで勉強になるし、応用も効くので100点。ただし、表紙の流れを汲めなかったので減点20点です。
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;style&gt;
.parent {
position: relative;
margin: 2em 0;
}
.dialogue {
padding: 30px;
position: relative;
margin: auto;
border: 1px solid #C0C0C0;
width: 600px;
display: table;
box-shadow: 0 3px 4px rgba(0, 0, 0, 0.32);
}
.speaker {
width: 70px;
height: 70px;
margin-right: 30px;
padding-right: 10px;
display: table-cell;
vertical-align: middle;
font-size: 90%;
}
.speaker img {
border-radius: 50%;
border: 2px solid pink;
}
.text {
display: table-cell;
padding: 0;
vertical-align: middle;
padding-left: 30px;
}
&lt;/style&gt;</description></item><item><title>【夏の自由工作2018】改札や自販機にピッとするたび光る！非接触発光LEDで光るネイル作ってみた</title><link>https://dotstud.io/blog/summer-homework-2018-chantoku/</link><pubDate>Mon, 13 Aug 2018 04:13:36 +0900</pubDate><guid>https://dotstud.io/blog/summer-homework-2018-chantoku/</guid><description>
&lt;p&gt;こんにちは、&lt;a href=&#34;https://dotstud.io/members/chantoku&#34;&gt;ちゃんとく&lt;/a&gt;です。世間はすっかり夏休みですね！&lt;/p&gt;
&lt;p&gt;弊dotstudioも絶賛夏休み中ですが、夏休みといえば宿題、宿題といえば自由工作………。&lt;/p&gt;
&lt;p&gt;ということで、&lt;strong&gt;特別企画・夏の自由工作2018&lt;/strong&gt;を開催します！！！（ドンドンドンドン）&lt;/p&gt;
&lt;p&gt;この記事を皮切りに、1週間連続でdotstudioメンバーが自由工作を発表していきますよ〜。実際の自由工作に役立つガジェットも登場するかも！？&lt;/p&gt;
&lt;p&gt;初日からギリギリ更新ですが、それも宿題の醍醐味ですねっ☆&lt;/p&gt;
&lt;h2 id=&#34;光るネイルを作ろう&#34;&gt;光るネイルを作ろう&lt;/h2&gt;
&lt;p&gt;小さな爪の上に回路やら電源やらを考えるのは面倒なので、今回は「&lt;strong&gt;非接触ICリーダーに反応して光るLEDモジュール&lt;/strong&gt;」を使っていきます。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://gyazo.com/564206a6c714e9e73b23c33194d62be5&#34;&gt;&lt;img src=&#34;https://i.gyazo.com/564206a6c714e9e73b23c33194d62be5.png&#34; alt=&#34;Image from Gyazo&#34; /&gt;&lt;/a&gt;
共立電子さんで売っている「&lt;a href=&#34;http://eleshop.jp/shop/g/g402524/&#34;&gt;NFC非接触発光LED&lt;/a&gt;」というモジュールは、改札や自動販売機の非接触ICリーダーにかざすと光る性質があります。&lt;/p&gt;
&lt;p&gt;形もサイズもネイル用に作られたと言っても過言ではないな……！&lt;/p&gt;
&lt;h2 id=&#34;ざっくりデザイン&#34;&gt;ざっくりデザイン&lt;/h2&gt;
&lt;p&gt;ネイルを作る前に、ざっくりデザインを考えます。せっかく光らせるので、電子工作風にしてみました。&lt;/p&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/201/design.png&#34; alt=&#34;design&#34;&gt;
&lt;/center&gt;
でーん。Genuino風ネイル〜！緑の丸部分がLEDの想定です。&lt;/p&gt;
&lt;p&gt;マイコンボードの中で1番好きな配色のGenuino 101（※）というArduino互換ボードをベースにしてみました。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://gyazo.com/9fe1b9fac74db201332a22408038f03a&#34;&gt;&lt;img src=&#34;https://i.gyazo.com/9fe1b9fac74db201332a22408038f03a.png&#34; alt=&#34;Image from Gyazo&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;font size=&#34;2&#34;&gt;
※残念ながら生産停止になってしまいました……。悲しい……。
&lt;/font&gt;&lt;/p&gt;
&lt;h2 id=&#34;用意するもの&#34;&gt;用意するもの&lt;/h2&gt;
&lt;h3 id=&#34;nfc非接触発光led&#34;&gt;NFC非接触発光LED&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://gyazo.com/1f05e8e9d0a32242cef1a0c9f9e8ce61&#34;&gt;&lt;img src=&#34;https://i.gyazo.com/1f05e8e9d0a32242cef1a0c9f9e8ce61.png&#34; alt=&#34;Image from Gyazo&#34; /&gt;&lt;/a&gt;
今回はネイルのデザインに合わせてブルーグリーンという色にしました！お安いので各指に乗せても大丈夫。&lt;/p&gt;
&lt;h3 id=&#34;ネイルアート用ネイルチップ&#34;&gt;ネイルアート用ネイルチップ&lt;/h3&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/201/chip.png&#34; alt=&#34;chip&#34;&gt;
&lt;/center&gt;
ドン・キホーテで購入。普通のやつです。&lt;/p&gt;
&lt;h3 id=&#34;好きな色のネイル&#34;&gt;好きな色のネイル&lt;/h3&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/201/nail.png&#34; alt=&#34;nail&#34;&gt;
&lt;/center&gt;
こちらもドン・キホーテで1番安いものを購入。ちょっと不安でしたが、発色もいいしガンガン重ね塗りできるのでオススメです！&lt;/p&gt;
&lt;p&gt;あとは剥がれるのを防止する用にトップコートがあると◎。&lt;/p&gt;
&lt;h3 id=&#34;ネイルグルー&#34;&gt;ネイルグルー&lt;/h3&gt;
&lt;p&gt;ネイルチップを貼る用に、専用のグルーやテープを用意します。&lt;/p&gt;
&lt;p&gt;100円均一などで購入できます。剥がす際にアセトンが必要なものもあるので注意！&lt;/p&gt;
&lt;h2 id=&#34;制作&#34;&gt;制作&lt;/h2&gt;
&lt;p&gt;制作といってもネイルを塗っていくだけなのですが、簡単に紹介します。&lt;strong&gt;ちゃんとく、雑なのであまり参考にしないでください&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/201/1.png&#34; alt=&#34;1&#34;&gt;
&lt;/center&gt;
ネイルチップにベース色を塗っていきます。「適当でいけるだろ！」と思ってたんですが、すごく持ちづらかったので&lt;strong&gt;セロテープを丸めたものをくっつけて&lt;/strong&gt;土台にしています。&lt;/p&gt;
&lt;p&gt;ネイルをたっぷり取って、中央からハケを平たくするイメージで塗るのがコツって聞いたような聞いてないような……。一度塗って&lt;strong&gt;完全に乾くのを待って&lt;/strong&gt;から、二、三回重ね塗りをしていきます。&lt;/p&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/201/2.png&#34; alt=&#34;2&#34;&gt;
&lt;/center&gt;
あとでラインを引くので根元は適当でOK。&lt;/p&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/201/3.png&#34; alt=&#34;3&#34;&gt;
&lt;/center&gt;
小指はデザインに沿って、ちょんちょんちょんとドットを配置。なぜか仮面ライダーを想起させる仕上がり。&lt;/p&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/201/4.png&#34; alt=&#34;4&#34;&gt;
&lt;/center&gt;
LEDを載せる爪は、まずLEDを配置（&lt;strong&gt;裏面がシールになっています、最高&lt;/strong&gt;）。&lt;/p&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/201/5.png&#34; alt=&#34;5&#34;&gt;
&lt;/center&gt;
LED部分だけ残すように、上からゴリゴリネイルを塗ります。なんか浮いてる気もするけど気にしない気にしない。&lt;/p&gt;
&lt;p&gt;全体をしっかりと乾かして完成〜！&lt;/p&gt;
&lt;p&gt;
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/201/after.png&#34; alt=&#34;after&#34;&gt;
&lt;/center&gt;
え？デザイン画と違う？&lt;/p&gt;
&lt;p&gt;&lt;font size=&#34;4&#34;&gt;Arduinoマークなんて書けるわけないだろ！！！！&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;
色は渋いのにつけてみると意外と派手な仕上がり。
&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/201/after2.png&#34; alt=&#34;after2&#34;&gt;
&lt;/center&gt;
&lt;/p&gt;
&lt;h2 id=&#34;街に出て光ってみる&#34;&gt;街に出て光ってみる&lt;/h2&gt;
&lt;p&gt;せっかく作ったので、実際にかざして光らせてみます！&lt;/p&gt;
&lt;p&gt;自販機を探して10分、なかなか非接触IC搭載の自販機が見つからない……。駅前とかじゃないと、意外とないもんです。&lt;/p&gt;
&lt;p&gt;ようやく見つけたのはタバコの自販機。TASPOも光る仕様で助かったー。&lt;/p&gt;
&lt;p&gt;リーダーに爪をかざすと……
&lt;a href=&#34;https://gyazo.com/620360121553296154cf2c5b9e90b3dc&#34;&gt;&lt;img src=&#34;https://i.gyazo.com/620360121553296154cf2c5b9e90b3dc.gif&#34; alt=&#34;Image from Gyazo&#34; /&gt;&lt;/a&gt;
ちゃんと光った〜！さりげなくて良い感じ！&lt;/p&gt;
&lt;h2 id=&#34;光るアレとコラボさせてみる&#34;&gt;光るアレとコラボさせてみる&lt;/h2&gt;
&lt;p&gt;さらにさらに、せっかくなので&lt;strong&gt;光るアレとコラボ&lt;/strong&gt;させてみます。&lt;/p&gt;
&lt;p&gt;どん。
&lt;a href=&#34;https://gyazo.com/0b99edfda6b97c48f38fd82a87c99e02&#34;&gt;&lt;img src=&#34;https://i.gyazo.com/0b99edfda6b97c48f38fd82a87c99e02.gif&#34; alt=&#34;Image from Gyazo&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;font size=&#34;4&#34;&gt;光ってる。私いま最高に光ってる。&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;
ちなみにこれ1人で撮影しているのですが、初めて「ええい、ままよっ！」という気持ちになりました。&lt;/p&gt;
&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;
&lt;p&gt;安くて超簡単に作れる上、オシャレにも自由工作にも活用できる（？）のでオススメです！&lt;/p&gt;
&lt;p&gt;ぜひ試してみてください〜！&lt;/p&gt;
&lt;p&gt;明日の自由工作発表は、しゃちょーの&lt;a href=&#34;https://dotstud.io/members/n0bisuke&#34;&gt;n0bisuke&lt;/a&gt;です！お楽しみに！&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
↓↓光るアレの紹介記事はこちら↓↓
&lt;/center&gt;
&lt;section class=&#34;link&#34; id=&#34;126&#34;&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;a href=&#34;https://dotstud.io/blog/led-eyelash-gadget-report/&#34;&gt;&lt;/a&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/126/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
&lt;/div&gt;
&lt;div class=&#34;link_content&#34;&gt;
&lt;div class=&#34;link_detail&#34;&gt;
&lt;div class=&#34;link_title&#34;&gt;
【検証】光るまつげ！？クラブで目立つこと間違いなしのLEDまつげを試してみた
&lt;/div&gt;
&lt;div class=&#34;link_date&#34;&gt;
2017-09-11
&lt;/div&gt;
&lt;div class=&#34;link_desc&#34;&gt;
秋葉原で見かけた面白プロダクトを実際に検証してみます。第一弾はLEDまつげ！使い方や使用感をレポートします！
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;/section&gt;
&lt;/p&gt;</description></item></channel></rss>