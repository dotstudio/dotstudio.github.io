<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Try on dotstudio（ドットスタジオ）</title>
    <link>https://dotstud.io/categories/try/</link>
    <description>Recent content in Try on dotstudio（ドットスタジオ）</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <copyright>© 2018 dotstudio inc.</copyright>
    <lastBuildDate>Mon, 23 Jul 2018 10:00:00 +0900</lastBuildDate>
    <atom:link href="/categories/try/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>【詳細解説】ステッピングモータの仕組みを理解しよう！解説とNefry BTでステッピングモータを使う方法</title>
      <link>https://dotstud.io/blog/stepper-motor-nefrybt-control/</link>
      <pubDate>Mon, 23 Jul 2018 10:00:00 +0900</pubDate>
      
      <guid>https://dotstud.io/blog/stepper-motor-nefrybt-control/</guid>
      
      <description>

&lt;p&gt;モータの種類にはいろいろあります。前回は回転角度を調整できる&lt;a href=&#34;https://dotstud.io/blog/nefry-servo-handson-takudooon/&#34;&gt;サーボモータ&lt;/a&gt;について紹介しました。&lt;/p&gt;



&lt;section class=&#34;link&#34; id=&#34;187&#34;&gt;
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
          &lt;div class=&#34;link_content&#34;&gt;
          &lt;a href=&#34;https://dotstud.io/blog/nefry-servo-handson-takudooon/&#34;&gt;&lt;/a&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/187/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
          &lt;/div&gt;
          &lt;div class=&#34;link_content&#34;&gt;
            &lt;div class=&#34;link_detail&#34;&gt;
              &lt;div class=&#34;link_title&#34;&gt;
                PWM制御をマスターしよう！Node-REDでサーボモータを遠隔制御する方法＆初ハンズオンレポート
              &lt;/div&gt;
              &lt;div class=&#34;link_date&#34;&gt;
                
                2018-07-12
              &lt;/div&gt;
              &lt;div class=&#34;link_desc&#34;&gt;
                PWM制御でサーボモータを操作してモノ作りの幅を広げましょう！Node-REDを使ったハンズオンの内容を紹介します。
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/section&gt;
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
&lt;/section&gt;


&lt;p&gt;今回は、&lt;strong&gt;ロボットアームや3Dプリンタの制御に使われるステッピングモータ&lt;/strong&gt;について説明し、Nefry BTで制御に挑戦してみたいと思います。&lt;/p&gt;

&lt;h2 id=&#34;ステッピングモータとは&#34;&gt;ステッピングモータとは？&lt;/h2&gt;

&lt;p&gt;ステッピングモータは、DCモータ（Direct-current motor、直流電動機）とは異なり、&lt;strong&gt;電力信号を与えることで正確に回転を制御&lt;/strong&gt;できます。&lt;/p&gt;

&lt;p&gt;例えばステッピングモータの使われている3Dプリンタでは、正確に回転を制御できているからこそ3Dプリントが実現しているとも言えます。&lt;/p&gt;

&lt;p&gt;各モータの特徴をまとめると下記のようになります。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;DCモータ: 電力を与えるとずっと回転する&lt;/li&gt;
&lt;li&gt;サーボモータ: ある信号に対応してある角度の範囲で回転する&lt;/li&gt;
&lt;li&gt;ステッピングモータ: 回転範囲に制限はなく、電力信号を与えることで正確に回転し続ける&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;ステッピングモータの種類-１&#34;&gt;ステッピングモータの種類〈１〉&lt;/h3&gt;

&lt;p&gt;ステッピングモータには3種類あります。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;PM型&lt;/strong&gt;（Permanent Magnet Type、永久磁石）

&lt;ul&gt;
&lt;li&gt;回転子として円周上にN極とS極の交互に着磁した磁性体を使用する。安価だが、着磁間隔を細かくすることに限界があり、ステップ角度は小さくできない。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;VR型&lt;/strong&gt;（Variable Reluctance Type、歯車状鉄心形）

&lt;ul&gt;
&lt;li&gt;回転子として歯車状の鉄心を使用する。ステップ角度を小さくできるが、トルクがやや低い。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HB型&lt;/strong&gt;（Hybrid Type、複合形）

&lt;ul&gt;
&lt;li&gt;PM型とVR型の特徴をもつ構造をしている。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;※回転子（ローター）…モーターとして回転する軸のこと。&lt;/p&gt;

&lt;h3 id=&#34;ステッピングモータの仕組み&#34;&gt;ステッピングモータの仕組み&lt;/h3&gt;

&lt;p&gt;PM型のステッピングモータの仕組みを簡単に説明したいと思います。&lt;/p&gt;

&lt;p&gt;まず、下記の図のようにPM型のステッピングモータは&lt;strong&gt;中心の永久磁石からなる回転子&lt;/strong&gt;と&lt;strong&gt;外側のコイルから構成されている固定子&lt;/strong&gt;から構成されています。コイルに電流を流すことで磁力が発生し、この磁力を利用して回転子を回転させていきます。&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/189/1.png&#34; alt=&#34;1&#34;&gt;

&lt;/center&gt;


&lt;ol&gt;
&lt;li&gt;コイル1に電流を流すと固定子と回転子のN極とS極が引き合う。&lt;/li&gt;
&lt;li&gt;さらにコイル2に電流を流すと、両方の固定子が磁化して回転子を引きつける。つまり45°回転する。&lt;/li&gt;
&lt;li&gt;コイル1の電流を切ると、さらに45°回転する。&lt;/li&gt;
&lt;li&gt;コイル3にコイル1に流した電流と逆方向の電流を流すと、さらに45°回転する。&lt;/li&gt;
&lt;li&gt;コイル2の電流を切ると、さらに45°回転する。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;上記と同様の動作を繰り返すと回転子が回転します。&lt;/p&gt;

&lt;p&gt;また、動画にすると下記のようなイメージです。
&lt;img src=&#34;https://dotstud.io/img/blog/189/2.gif&#34; alt=&#34;&#34; /&gt;
&lt;strong&gt;制御信号（ステップと呼びます）を与えると回転する&lt;/strong&gt;イメージです。また、&lt;strong&gt;1ステップあたりの回転角度を基本ステップ角度&lt;/strong&gt;と呼びます。&lt;/p&gt;

&lt;h3 id=&#34;ステッピングモータの種類-２&#34;&gt;ステッピングモータの種類〈２〉&lt;/h3&gt;

&lt;p&gt;先ほど述べたようにステッピングモータの種類には3種類あります。そして、&lt;strong&gt;さらに2種類&lt;/strong&gt;あります。ただし、この2種類とはステッピングモータ内部にあるコイルへの電流の流し方の違いによるものです。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ユニポーラ型&lt;/strong&gt;（単極性）

&lt;ul&gt;
&lt;li&gt;相電流の切り替えのとき、1つのコイルに対して一定方向の電流しか流さない。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;バイポーラ型&lt;/strong&gt;（双極性）

&lt;ul&gt;
&lt;li&gt;相電流の切り替えのたび、電流の方向が変わる。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;※ステッピングモータの仕組みで説明したように磁極を変えるため内部のコイルをスイッチングする必要がある。その磁極をどのように変更するかというイメージ。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/189/3.png&#34; alt=&#34;3&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;h3 id=&#34;励磁-れいじ-方式&#34;&gt;励磁（れいじ）方式&lt;/h3&gt;

&lt;p&gt;励磁方式とは、簡単に言えば「どのようにコイルに電流を流し、ステッピングモータを回転させるか」です。つまり、どのコイル（どのピン）に電圧をどの順番で印加していくかということです。&lt;/p&gt;

&lt;p&gt;これは、制御するときに方式を選ぶことができます（プログラムで書くことができます）。ライブラリを使って制御するとわかりにくい部分かもしれません。&lt;/p&gt;

&lt;p&gt;大まかに3つの励磁方式があるので、それぞれ紹介したいと思います。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/189/4.png&#34; alt=&#34;4&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h4 id=&#34;1相励磁&#34;&gt;■ 1相励磁&lt;/h4&gt;

&lt;p&gt;&lt;code&gt;A→B→A&#39;→B&#39;&lt;/code&gt;の順に電流を流します（つまり励磁します）。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/189/5.png&#34; alt=&#34;5&#34;&gt;

&lt;/center&gt;

このようにパルスを与えるたびに決められてステップ角だけ回転します。励磁の順を&lt;code&gt;A&#39;→B&#39;→A→B&lt;/code&gt;とすると逆回転します。&lt;/p&gt;

&lt;p&gt;1相励磁は最も単純な方式ですが、トルクが弱く高速回転には向いていません。また、安定性が良くないため実用的ではありません｡&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h4 id=&#34;2相励磁&#34;&gt;■ 2相励磁&lt;/h4&gt;

&lt;p&gt;次の相と1パルスずつずらして同時に励磁する方式です。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/189/6.png&#34; alt=&#34;6&#34;&gt;

&lt;/center&gt;

パルス幅が1相励磁の2倍となり、1相励磁に比べて回転が安定して、大きなトルクが得られますが消費電力も2倍になります｡&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h4 id=&#34;1-2相励磁&#34;&gt;■ 1-2相励磁&lt;/h4&gt;

&lt;p&gt;1相励磁と2相励磁を交互に繰り返す方式です。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/189/7.png&#34; alt=&#34;7&#34;&gt;

&lt;/center&gt;

各相のパルス幅が3となり、次の相とは2パルスだけずらして励磁されます。1パルスごとに回転する角度が1相励磁と2相励磁に比べて半分になり、細かいモータ制御ができます。&lt;strong&gt;基本的にこの励磁方式で制御すれば間違いない&lt;/strong&gt;でしょう。&lt;/p&gt;

&lt;h2 id=&#34;nefry-btでステッピングモータを制御しよう&#34;&gt;Nefry BTでステッピングモータを制御しよう！&lt;/h2&gt;

&lt;h3 id=&#34;ステッピングモータを購入&#34;&gt;ステッピングモータを購入&lt;/h3&gt;

&lt;p&gt;今回は、Amazonで&lt;a href=&#34;https://www.amazon.co.jp/gp/product/B010RYH74U/ref=oh_aui_detailpage_o03_s00?ie=UTF8&amp;amp;psc=1&#34;&gt;こちらのステッピングモータ&lt;/a&gt;を購入して使いました。ステッピングモータとドライバが5セット入っており、それでいて価格が約1000円という激安です。ちょっと試してみるには良い商品かと思います。&lt;/p&gt;

&lt;h4 id=&#34;28byj-48-stepper-motor&#34;&gt;■ 28BYJ-48 Stepper Motor&lt;/h4&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/189/8.png&#34; alt=&#34;8&#34;&gt;

&lt;/center&gt;


&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h4 id=&#34;uln2003-driver&#34;&gt;■ ULN2003 driver&lt;/h4&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/189/9.png&#34; alt=&#34;9&#34;&gt;

&lt;/center&gt;


&lt;h3 id=&#34;それぞれの仕様&#34;&gt;それぞれの仕様&lt;/h3&gt;

&lt;h4 id=&#34;28byj-48-stepper-motor-1&#34;&gt;■ 28BYJ-48 Stepper Motor&lt;/h4&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;概要&lt;/th&gt;
&lt;th&gt;仕様&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;種類&lt;/td&gt;
&lt;td&gt;ユニポーラ型&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;結線&lt;/td&gt;
&lt;td&gt;5線式&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;電圧&lt;/td&gt;
&lt;td&gt;5-12V（直流電圧）&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;周波数&lt;/td&gt;
&lt;td&gt;100 Hz&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;ステップモード&lt;/td&gt;
&lt;td&gt;ハーフステップモード（推奨）（8ステップの信号で制御）&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;ステップ角&lt;/td&gt;
&lt;td&gt;ハーフステップモード：64ステップで5.625°回転&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;ギア比&lt;/td&gt;
&lt;td&gt;64:1&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;※ギア比…2つの歯車（ギア）の歯数の比率のこと。自転車をイメージすると良い。&lt;br /&gt;
※ハーフステップモード…ステップ角が基本ステップ角度の1/2の角度で駆動する方式。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h4 id=&#34;uln2003-driver-1&#34;&gt;■ ULN2003 driver&lt;/h4&gt;

&lt;p&gt;ステッピングモータを使う際には、&lt;strong&gt;ステッピングモータ用のドライバ&lt;/strong&gt;を使用します。マイコンボードの信号だけでは制御できないので、制御を補助するためのものです。&lt;/p&gt;

&lt;p&gt;1-2相励磁で制御する場合は、下記のような信号の組み合わせになります。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/189/10.png&#34; alt=&#34;10&#34;&gt;

&lt;/center&gt;

（参照：&lt;a href=&#34;http://eeshop.unl.edu/pdf/Stepper+Driver.pdf&#34;&gt;http://eeshop.unl.edu/pdf/Stepper+Driver.pdf&lt;/a&gt; ）&lt;/p&gt;

&lt;p&gt;このステッピングモータでは8ステップで1つの動作を表しています。つまり、8ステップ×8ステップ=64ステップで5.625°回転します。よって1回転するには360°÷5.625°×64=4096ステップで1回転します。&lt;/p&gt;

&lt;h3 id=&#34;回路&#34;&gt;回路&lt;/h3&gt;

&lt;p&gt;Nefry BTとステッピングモータの回路は下記のようになります。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/189/11.png&#34; alt=&#34;11&#34;&gt;

&lt;/center&gt;

今回、使用するステッピングモータは5~12Vの間で動作します。また、Nefry BTとステッピングモータの電源は分けて使います。&lt;/p&gt;

&lt;h3 id=&#34;プログラム-ライブラリあり&#34;&gt;プログラム（ライブラリあり）&lt;/h3&gt;

&lt;p&gt;プログラムは下記の通りです。&lt;/p&gt;

&lt;p&gt;Nefry BT上のスイッチを押すとステッピングモータが180°回転するというものです。今回は、ステッピングモータを回転させるため「Stepper.h」ライブラリを使いました。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;// ステッピングモータとNefry BTを制御するためのライブラリをinclude
#include &amp;lt;Stepper.h&amp;gt;
#include &amp;lt;Nefry.h&amp;gt;

/*
・フルステップ方式で2相励磁の場合は1つの動作で4ステップ
・8回繰り返す（4×8 = 32ステップ）で11.25度回転
・つまり、360度回転しようとするとき360/11.25 = 32ステップ
・ギア比を考慮して32×64 = 2048ステップ
・よって、ハフルステップ方式で2相励磁の場合、2048ステップで1回転
*/

/*
・ハーフステップ方式で1-2相励磁の場合は1つの動作で8ステップ
・8回繰り返す（8×8 = 64ステップ）と5.625度回転
・つまり、360度回転しようとすると360/5.625 = 64ステップ
・ギア比を考慮して64×64 = 4096ステップ
・よって、ハーフステップ方式で1-2相励磁の場合、4096ステップで1回転
*/

#define MOTOR_1   D2   // blue
#define MOTOR_2   D3   // pink
#define MOTOR_3   D4   // yellow
#define MOTOR_4   D5   // orange

// ステッピングモータが1回転するのに必要なステップ数を定義
#define MOTOR_STEPS 2048

Stepper myStepper(MOTOR_STEPS, MOTOR_1, MOTOR_2, MOTOR_3, MOTOR_4);

void setup() {
    // setspeed()関数でrpm（1分あたりの回転数）を設定
    // 例：10rpm=10回転/分
    myStepper.setSpeed(10);//10回転/分
}

void loop() {
    if(Nefry.readSW()){
        // 1024ステップ回転、つまり180°回転
        myStepper.step(1024);
    }
    // 静止時の負荷がないので電流を止める
    stopMotor();
}

// モーターへの電流を止める
void stopMotor() {
    digitalWrite(MOTOR_1, LOW);
    digitalWrite(MOTOR_2, LOW);
    digitalWrite(MOTOR_3, LOW);
    digitalWrite(MOTOR_4, LOW);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;動かしてみると&#34;&gt;動かしてみると&lt;/h3&gt;

&lt;p&gt;実際に動かしてみると、180°回転していることがわかります。
&lt;img src=&#34;https://dotstud.io/img/blog/189/12.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;プログラム-ライブラリなし&#34;&gt;プログラム（ライブラリなし）&lt;/h3&gt;

&lt;p&gt;ステッピングモータの仕組みを理解する場合、ライブラリなしの方がわかりやすいかと思います。&lt;/p&gt;

&lt;p&gt;下記はライブラリを使わずに励磁方式を変えてステッピングモータを制御したプログラムです。先ほど示した励磁方式の図を見ながら理解すると、良くわかるかと思います。&lt;/p&gt;

&lt;p&gt;今回、使用するドライバには各相に対応してLEDが点灯するので、どの相に電圧を印加したかわかりやすいですね。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h4 id=&#34;1相励磁-1&#34;&gt;■ 1相励磁&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;#include&amp;lt;Nefry.h&amp;gt;

// 任意のピンを設定してください。基本、デジタルピンでOKです。都合上A2,A3を使っています。
#define PIN1 A2
#define PIN2 A3
#define PIN3 D3
#define PIN4 D4

void setup()
{

  Serial.begin(115200);

  pinMode(PIN1, OUTPUT);      // PIN1を出力モードにする
  pinMode(PIN2, OUTPUT);      // PIN2を出力モードにする
  pinMode(PIN3, OUTPUT);      // PIN3を出力モードにする
  pinMode(PIN4, OUTPUT);      // PIN4を出力モードにする
}

void loop()
{
  int sleep_time = 300;       // スリープ時間[ms]、時間を短くすると回転速度上昇

  digitalWrite(PIN1, 1);    
  digitalWrite(PIN2, 0);
  digitalWrite(PIN3, 0);
  digitalWrite(PIN4, 0);
  delay(sleep_time);

  digitalWrite(PIN1, 0);
  digitalWrite(PIN2, 0);
  digitalWrite(PIN3, 1);
  digitalWrite(PIN4, 0);
  delay(sleep_time);    

  digitalWrite(PIN1, 0);
  digitalWrite(PIN2, 0);
  digitalWrite(PIN3, 0);
  digitalWrite(PIN4, 1);
  delay(sleep_time);

  // 電流を流し続けると発熱するのでいったん止める
  digitalWrite(PIN1, 0);
  digitalWrite(PIN2, 0);
  digitalWrite(PIN3, 0);
  digitalWrite(PIN4, 0);
  delay(sleep_time);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/189/13.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h4 id=&#34;2相励磁-1&#34;&gt;■ 2相励磁&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;#include&amp;lt;Nefry.h&amp;gt;

#define PIN1 A2
#define PIN2 A3
#define PIN3 D3
#define PIN4 D4

void setup()
{
  Serial.begin(115200);

  pinMode(PIN1, OUTPUT);
  pinMode(PIN2, OUTPUT);
  pinMode(PIN3, OUTPUT);
  pinMode(PIN4, OUTPUT);
}

void loop()
{

  int sleep_time = 5;

  digitalWrite(PIN1, 1);    
  digitalWrite(PIN2, 1);
  digitalWrite(PIN3, 0);
  digitalWrite(PIN4, 0);
  delay(sleep_time);

  digitalWrite(PIN1, 0);
  digitalWrite(PIN2, 1);
  digitalWrite(PIN3, 1);
  digitalWrite(PIN4, 0);
  delay(sleep_time);

  digitalWrite(PIN1, 0);
  digitalWrite(PIN2, 0);
  digitalWrite(PIN3, 1);
  digitalWrite(PIN4, 1);
  delay(sleep_time);

  digitalWrite(PIN1, 1);
  digitalWrite(PIN2, 0);
  digitalWrite(PIN3, 0);
  digitalWrite(PIN4, 1);
  delay(sleep_time);

  // 電流を流し続けると発熱するのでいったん止める
  digitalWrite(PIN1, 0);
  digitalWrite(PIN2, 0);
  digitalWrite(PIN3, 0);
  digitalWrite(PIN4, 0);
  delay(sleep_time);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/189/14.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h4 id=&#34;1-2相励磁-1&#34;&gt;■ 1-2相励磁&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;#include&amp;lt;Nefry.h&amp;gt;

#define PIN1 A2
#define PIN2 A3
#define PIN3 D3
#define PIN4 D4

void setup()
{
  Serial.begin(115200);

  pinMode(PIN1, OUTPUT);
  pinMode(PIN2, OUTPUT);
  pinMode(PIN3, OUTPUT);
  pinMode(PIN4, OUTPUT);
}

void loop()
{
  int sleep_time = 5;

  digitalWrite(PIN1, 1);    
  digitalWrite(PIN2, 0);
  digitalWrite(PIN3, 0);
  digitalWrite(PIN4, 0);
  delay(sleep_time);

  digitalWrite(PIN1, 1);
  digitalWrite(PIN2, 1);
  digitalWrite(PIN3, 0);
  digitalWrite(PIN4, 0);
  delay(sleep_time);

  digitalWrite(PIN1, 0);
  digitalWrite(PIN2, 1);
  digitalWrite(PIN3, 0);
  digitalWrite(PIN4, 0);
  delay(sleep_time);

  digitalWrite(PIN1, 0);
  digitalWrite(PIN2, 1);
  digitalWrite(PIN3, 1);
  digitalWrite(PIN4, 0);
  delay(sleep_time);

  digitalWrite(PIN1, 0);
  digitalWrite(PIN2, 0);
  digitalWrite(PIN3, 1);
  digitalWrite(PIN4, 0);
  delay(sleep_time);

  digitalWrite(PIN1, 0);
  digitalWrite(PIN2, 0);
  digitalWrite(PIN3, 1);
  digitalWrite(PIN4, 1);
  delay(sleep_time);

  digitalWrite(PIN1, 0);
  digitalWrite(PIN2, 0);
  digitalWrite(PIN3, 0);
  digitalWrite(PIN4, 1);
  delay(sleep_time);

  digitalWrite(PIN1, 1);
  digitalWrite(PIN2, 0);
  digitalWrite(PIN3, 0);
  digitalWrite(PIN4, 1);
  delay(sleep_time);

  //電流を流し続けると発熱するのでいったん止める
  digitalWrite(PIN1, 0);
  digitalWrite(PIN2, 0);
  digitalWrite(PIN3, 0);
  digitalWrite(PIN4, 0);
  delay(sleep_time);
}


&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/189/15.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;作例-xy軸ステージ&#34;&gt;作例: xy軸ステージ&lt;/h2&gt;

&lt;p&gt;ステッピングモータを使えば、3Dプリンタの軸に使われているような可動式のステージを自作することも可能です。&lt;/p&gt;

&lt;p&gt;たとえば、下記が自作したxy軸の2軸ステージです。また、これはNode-REDで遠隔制御できるようにしています。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/189/16.png&#34; alt=&#34;16&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;h2 id=&#34;おわりに&#34;&gt;おわりに&lt;/h2&gt;

&lt;p&gt;モータの世界はまだまだ奥深いのですが、今回はここまでです。&lt;/p&gt;

&lt;p&gt;ステッピングモータが使えれば、さらにモノづくりの幅が広がることでしょう。また、IoT向きの開発ボードNefry BTを使えば、&lt;strong&gt;遠隔制御できる「何か」&lt;/strong&gt;を割と簡単に作ることができます。&lt;/p&gt;

&lt;h2 id=&#34;参考サイト&#34;&gt;参考サイト&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://42bots.com/tutorials/28byj-48-stepper-motor-with-uln2003-driver-and-arduino-uno/&#34;&gt;28BYJ-48 Stepper Motor with ULN2003 driver and Arduino Uno |  42 Bots&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://toshiba.semicon-storage.com/jp/design-support/e-learning/stepping_motor/chap3/1274646.html&#34;&gt;励磁モードまとめ | TOSHIBA e-ラーニング&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Alexaで自然な発話を目指そう！音声合成マークアップ言語「SSML」を使う方法</title>
      <link>https://dotstud.io/blog/alexa-skill-using-ssml/</link>
      <pubDate>Fri, 20 Jul 2018 10:00:00 +0900</pubDate>
      
      <guid>https://dotstud.io/blog/alexa-skill-using-ssml/</guid>
      
      <description>

&lt;p&gt;こんにちは、エンジニア兼ライターの&lt;a href=&#34;https://dotstud.io/members/chantoku&#34;&gt;ちゃんとく&lt;/a&gt;です。&lt;/p&gt;

&lt;p&gt;Alexaスキルの開発では、基本的に&lt;strong&gt;テキストを渡すとそのまま読み上げて&lt;/strong&gt;くれ、句読点を入れると休止に置き換えてくれたり疑問符を入れると語尾をあげたりと、ある程度は自然に調整してくれます。&lt;/p&gt;

&lt;p&gt;でも、「なんだか読み上げが不自然……」「もっと細かく調整したい……」ということがありますよね。&lt;/p&gt;

&lt;p&gt;そんな時は、Alexa Skills Kitで用意されている&lt;u&gt;&lt;strong&gt;音声合成マークアップ言語&lt;/strong&gt;「&lt;a href=&#34;https://developer.amazon.com/ja/docs/custom-skills/speech-synthesis-markup-language-ssml-reference.html&#34;&gt;&lt;strong&gt;SSML&lt;/strong&gt;&lt;/a&gt;」&lt;/u&gt;を使ってみましょう！SSMLを利用すると簡単に効果音・音源を差し込んだり、イントネーションやブレスを細かく整えたりすることができます。&lt;/p&gt;

&lt;p&gt;&lt;font size=&#34;2&#34;&gt;※SSML…Speech Synthesis Markup Language&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;はじめてAlexaスキル開発するよ！という方はこちらから。&lt;/p&gt;



&lt;section class=&#34;link&#34; id=&#34;144&#34;&gt;
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
          &lt;div class=&#34;link_content&#34;&gt;
          &lt;a href=&#34;https://dotstud.io/blog/nodejs-amazon-alexa-skill/&#34;&gt;&lt;/a&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/144/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
          &lt;/div&gt;
          &lt;div class=&#34;link_content&#34;&gt;
            &lt;div class=&#34;link_detail&#34;&gt;
              &lt;div class=&#34;link_title&#34;&gt;
                Amazon Echoを使いこなそう！Node.jsでAlexaスキル開発 - スマートスピーカーの基本とスキル開発入門
              &lt;/div&gt;
              &lt;div class=&#34;link_date&#34;&gt;
                
                2018-03-06
              &lt;/div&gt;
              &lt;div class=&#34;link_desc&#34;&gt;
                Amazon Echoで動くAlexaのスキル開発をNode.jsでやってみましょう！
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/section&gt;
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
&lt;/section&gt;


&lt;h2 id=&#34;ssmlとは&#34;&gt;SSMLとは&lt;/h2&gt;

&lt;p&gt;「SSML」は&lt;a href=&#34;https://developer.amazon.com/ja/alexa-skills-kit&#34;&gt;Alexa Skills Kit&lt;/a&gt;で用意されている&lt;strong&gt;音声合成マークアップ言語&lt;/strong&gt;です。&lt;/p&gt;

&lt;p&gt;聞きなれないかもしれませんが、HTMLのタグのように&lt;strong&gt;簡単な記述でプログラムに埋め込む&lt;/strong&gt;ことができます。&lt;/p&gt;

&lt;p&gt;例えば下記のようにテキストを渡すプログラムの場合、&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&#39;LaunchRequest&#39;: function () {
    const speechOutput = &#39;こんにちは。ちゃんとくのスキルです。&#39;
    const reprompt = &#39;ちゃんとくスキルです。&#39;
    this.emit(&#39;:ask&#39;, speechOutput, reprompt);
},
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;SSMLを組み込むと下記のような記述になります。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&#39;LaunchRequest&#39;: function () {
    const speechOutput = &#39;&amp;lt;say-as interpret-as=&amp;quot;interjection&amp;quot;&amp;gt;こんにちは。&amp;lt;/say-as&amp;gt;&amp;lt;break time=&amp;quot;0.5s&amp;quot;/&amp;gt;ちゃんとくのスキルです。&#39;
    const reprompt = &#39;ちゃんとくスキルです。&#39;
    this.emit(&#39;:ask&#39;, speechOutput, reprompt);
},
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;基本的には&lt;strong&gt;①ドキュメントからコピーして&lt;/strong&gt;、&lt;strong&gt;②埋め込むだけ&lt;/strong&gt;、です。簡単そうですよね？&lt;/p&gt;

&lt;p&gt;ここからは大まかにカテゴリ分けしてSSMLタグを紹介していきます！&lt;/p&gt;

&lt;p&gt;「サッとどんな感じか知りたいんじゃ！」という方は、&lt;a href=&#34;https://dotstud.io/blog/alexa-skill-using-ssml/#ssml%E5%85%A8%E9%83%A8%E4%B9%97%E3%81%9B%E3%82%92%E8%A9%A6%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B&#34;&gt;&lt;strong&gt;SSML全部乗せを試してみる&lt;/strong&gt;&lt;/a&gt;のデモ動画をご覧ください。&lt;/p&gt;

&lt;h2 id=&#34;特殊な読ませ方をさせるタグ&#34;&gt;特殊な読ませ方をさせるタグ&lt;/h2&gt;

&lt;h3 id=&#34;amazon-effect-エフェクト-ささやき声&#34;&gt;amazon:effect / エフェクト（ささやき声）&lt;/h3&gt;

&lt;p&gt;Amazonで提供されている固有のエフェクトが適用されます。今のところ用意されているのは「&lt;code&gt;whispered&lt;/code&gt;」というささやき声のエフェクトだけみたいです。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;let speechOut = &#39;ささやき声にしたい部分をタグで囲います。&#39;;
speechOut += &#39;&amp;lt;amazon:effect name=&amp;quot;whispered&amp;quot;&amp;gt;この部分をささやきます。&amp;lt;/amazon:effect&amp;gt;&#39;;
this.emit(&#39;:tell&#39;, speechOut);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;怒鳴り声とか、悲しい声とか、今後いろいろと実装されたら面白そうですね！&lt;/p&gt;

&lt;h3 id=&#34;say-as-特殊な文章を解釈&#34;&gt;say-as / 特殊な文章を解釈&lt;/h3&gt;

&lt;p&gt;読んで字のごとく、「〜として読ませる」タグで、テキストの形をAlexaに解釈させることができます。例えば「電話番号として読ませる」「一文字ずつとして読ませる」などの機能があります。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;let speechOut = &#39;例えば93を一文字ずつ読むと&amp;lt;break time=&amp;quot;1s&amp;quot;/&amp;gt;&#39;;
speechOut += &#39;&amp;lt;say-as interpret-as=&amp;quot;digits&amp;quot;&amp;gt;93&amp;lt;/say-as&amp;gt;&amp;lt;break time=&amp;quot;1s&amp;quot;/&amp;gt;&#39;; // きゅー、さん
speechOut += &#39;日付として読むと&amp;lt;break time=&amp;quot;1s&amp;quot;/&amp;gt;&#39;;
speechOut += &#39;&amp;lt;say-as interpret-as=&amp;quot;date&amp;quot; format=&amp;quot;m&amp;quot;&amp;gt;9&amp;lt;/say-as&amp;gt;&amp;lt;say-as interpret-as=&amp;quot;date&amp;quot; format=&amp;quot;d&amp;quot;&amp;gt;3&amp;lt;/say-as&amp;gt;&amp;lt;break time=&amp;quot;1s&amp;quot;/&amp;gt;&#39;; // くがつ、みっか
this.emit(&#39;:tell&#39;, speechOut);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ちなみに、英字はローマ字読みされるので例えば「IoT」は「いおっと」となってしまいます。&lt;/p&gt;

&lt;p&gt;「アイオーティ」と読ませたい場合は&lt;code&gt;&amp;lt;say-as interpret-as=&amp;quot;characters&amp;quot;&amp;gt;IoT&amp;lt;/say-as&amp;gt;&lt;/code&gt;と一文字ずつ読ませるか、テキストで「アイオーティ」と渡してあげましょう。&lt;/p&gt;

&lt;p&gt;また解釈の一つとして、「&lt;a href=&#34;https://developer.amazon.com/ja/docs/custom-skills/speechcon-reference-interjections-japanese.html&#34;&gt;Speechcon&lt;/a&gt;」という感嘆詞の読み上げが用意されています。「こんにちは」「まあ」「あら」など、&lt;strong&gt;日常的な発話が自然に組み込めるオススメの機能&lt;/strong&gt; です！&lt;/p&gt;

&lt;p&gt;こちらは別記事にまとめました。


&lt;section class=&#34;link&#34; id=&#34;180&#34;&gt;
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
          &lt;div class=&#34;link_content&#34;&gt;
          &lt;a href=&#34;https://dotstud.io/blog/nodejs-alexa-skill-speechcon/&#34;&gt;&lt;/a&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/180/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
          &lt;/div&gt;
          &lt;div class=&#34;link_content&#34;&gt;
            &lt;div class=&#34;link_detail&#34;&gt;
              &lt;div class=&#34;link_title&#34;&gt;
                感嘆詞でAlexaと自然な会話を実現！Speechconを使ってスキル開発
              &lt;/div&gt;
              &lt;div class=&#34;link_date&#34;&gt;
                
                2018-06-30
              &lt;/div&gt;
              &lt;div class=&#34;link_desc&#34;&gt;
                感情表現を豊かにして自然な会話を楽しもう！Speechconを使ってAlexaスキルに感嘆詞を加える方法を紹介します。
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/section&gt;
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
&lt;/section&gt;
&lt;/p&gt;

&lt;h3 id=&#34;sub-置き換え&#34;&gt;sub / 置き換え&lt;/h3&gt;

&lt;p&gt;テキストに対して指定の読み方をさせることができます。「宇宙」と書いて「コスモ」と読むような、ルビ的なあれですね……！&lt;/p&gt;

&lt;p&gt;基本的にスキルの利用シーンはVUIのみですが、プログラムの可読性を高めるのに使われるのかなあと思っています。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;let speechOut = &#39;好きなアニメは&#39;;
speechOut += &#39;とある科学の&amp;lt;sub alias=&amp;quot;レールガン&amp;quot;&amp;gt;超電磁砲&amp;lt;/sub&amp;gt;です。&#39;;
this.emit(&#39;:tell&#39;, speechOut);
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;音源を挿入するタグ&#34;&gt;音源を挿入するタグ&lt;/h2&gt;

&lt;h3 id=&#34;audio-mp3の挿入&#34;&gt;audio / MP3の挿入&lt;/h3&gt;

&lt;p&gt;スキル内にMP3音源を埋め込んで再生することができます。&lt;/p&gt;

&lt;p&gt;MP3音源は用意されているライブラリの他に自身が用意したものも利用できますが、&lt;strong&gt;長さやフォーマットが細かく指定&lt;/strong&gt; されています。&lt;/p&gt;

&lt;p&gt;使い方の詳細は下記記事にまとめました。


&lt;section class=&#34;link&#34; id=&#34;163&#34;&gt;
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
          &lt;div class=&#34;link_content&#34;&gt;
          &lt;a href=&#34;https://dotstud.io/blog/nodejs-alexa-skill-mp3/&#34;&gt;&lt;/a&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/163/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
          &lt;/div&gt;
          &lt;div class=&#34;link_content&#34;&gt;
            &lt;div class=&#34;link_detail&#34;&gt;
              &lt;div class=&#34;link_title&#34;&gt;
                AlexaスキルでMP3ファイルを流そう！効果音を入れてワンランクアップのスキル開発
              &lt;/div&gt;
              &lt;div class=&#34;link_date&#34;&gt;
                
                2018-04-30
              &lt;/div&gt;
              &lt;div class=&#34;link_desc&#34;&gt;
                Alexaスキルでは簡単にMP3ファイルを流すことができます。効果音や録音した音声を入れてステップアップしてみましょう！
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/section&gt;
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
&lt;/section&gt;
&lt;/p&gt;

&lt;h2 id=&#34;ブレス-区切りを挿入するタグ&#34;&gt;ブレス、区切りを挿入するタグ&lt;/h2&gt;

&lt;h3 id=&#34;break-休止の挿入&#34;&gt;break / 休止の挿入&lt;/h3&gt;

&lt;p&gt;休止時間を秒（s）またはミリ秒（ms）で指定します。または、&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;let speechOut = &#39;3秒間待ってやる。&amp;lt;break time=&amp;quot;3s&amp;quot;&amp;gt;&amp;lt;/break&amp;gt;&#39;;
speechOut += &#39;用意はいいな？&#39;;
this.emit(&#39;:tell&#39;, speechOut);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;font size=&#34;2&#34;&gt;※最大10秒なので、残念ながら3分待つことはできません。&lt;/font&gt;&lt;/p&gt;

&lt;h3 id=&#34;p-段落の挿入&#34;&gt;p / 段落の挿入&lt;/h3&gt;

&lt;p&gt;囲った部分を段落として解釈させます。「。」よりも長めの休止が入ります。これは&lt;code&gt;&amp;lt;break strength=&amp;quot;x-strong&amp;quot; /&amp;gt;&lt;/code&gt;を入れるのと同様の結果になります。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;let speechOut = &#39;&amp;lt;p&amp;gt;こんにちは。ちゃんとくです。今から大事な話をします。&amp;lt;/p&amp;gt;&#39;;
speechOut += &#39;&amp;lt;p&amp;gt;実は、すごく焼肉が好きなんですよ。&amp;lt;/p&amp;gt;&#39;;
this.emit(&#39;:tell&#39;, speechOut);
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;s-文章区切りの挿入&#34;&gt;S / 文章区切りの挿入&lt;/h3&gt;

&lt;p&gt;囲った部分を一文として解釈させます。これは末尾に「。」を入れたり、&lt;code&gt;&amp;lt;break strength=&amp;quot;strong&amp;quot; /&amp;gt;&lt;/code&gt;を入れたりするのと同様の結果になります。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;let speechOut = &#39;&amp;lt;s&amp;gt;こんにちは&amp;lt;/s&amp;gt;&#39;;
speechOut += &#39;今日はすごく暑いですね&amp;lt;break strength=&amp;quot;strong&amp;quot; /&amp;gt;&#39;;
speechOut += &#39;こんな日はビールが飲みたい！&#39;;
this.emit(&#39;:tell&#39;, speechOut);
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;速さ-高さ-音量-発音を詳細に設定するタグ&#34;&gt;速さ、高さ、音量、発音を詳細に設定するタグ&lt;/h2&gt;

&lt;h3 id=&#34;emphasis-速さと音量で強調&#34;&gt;emphasis / 速さと音量で強調&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;level&lt;/code&gt;という属性で、音量、速度などを調整して強調させることができます。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;const speechOut = &#39;今日は&amp;lt;emphasis level=&amp;quot;strong&amp;quot;&amp;gt;すごく&amp;lt;/emphasis&amp;gt;暑いですね。&#39;;
this.emit(&#39;:tell&#39;, speechOut);
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;prosody-音量-高さ-速さ&#34;&gt;prosody / 音量、高さ、速さ&lt;/h3&gt;

&lt;p&gt;速さ、高さ、音量をそれぞれ指定して調整することができます。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;let speechOut = &#39;今日は&amp;lt;prosody pitch=&amp;quot;x-low&amp;quot;&amp;gt;すごく&amp;lt;/prosody&amp;gt;暑いですね。&#39;;
speechOut += &#39;こんな日はビールが&amp;lt;prosody volume=&amp;quot;loud&amp;quot; pitch=&amp;quot;high&amp;quot;&amp;gt;飲みたい！&amp;lt;/prosody&amp;gt;&#39;;
this.emit(&#39;:tell&#39;, speechOut);
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ssml全部乗せを試してみる&#34;&gt;SSML全部乗せを試してみる&lt;/h2&gt;

&lt;p&gt;読ませてみなきゃわからない、ってことで、SSMLをもりもり使ったサンプルを用意してみました。百聞は一聴にしかず！&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/m7aums3aTDI&#34; frameborder=&#34;0&#34; allow=&#34;autoplay; encrypted-media&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;プログラムは下記（とりあえず動く程度でちょっと雑です）。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&#39;use strict&#39;;

const Alexa = require(&#39;alexa-sdk&#39;);

const handlers = {
    &#39;LaunchRequest&#39;: function () {
        const speechOutput = &#39;こんにちは。音を流してと言ってみてください。&#39;
        const reprompt = &#39;音を流します。&#39;
        this.emit(&#39;:ask&#39;, speechOutput, reprompt);
    },
    &#39;WhisperIntent&#39;: function () {
        let speechOut = &#39;こんな風に囁きます。&#39;;
        speechOut += &#39;&amp;lt;amazon:effect name=&amp;quot;whispered&amp;quot;&amp;gt;秘密ですよ？&amp;lt;/amazon:effect&amp;gt;&#39;;
        this.emit(&#39;:ask&#39;, speechOut);
    },
    &#39;SayAsIntent&#39;: function () {
        let speechOut = &#39;例えば93を一文字ずつ読むと&amp;lt;break time=&amp;quot;1s&amp;quot;/&amp;gt;&#39;;
        speechOut += &#39;&amp;lt;say-as interpret-as=&amp;quot;digits&amp;quot;&amp;gt;93&amp;lt;/say-as&amp;gt;&amp;lt;break time=&amp;quot;1s&amp;quot;/&amp;gt;&#39;;
        speechOut += &#39;日付として読むと&amp;lt;break time=&amp;quot;1s&amp;quot;/&amp;gt;&#39;;
        speechOut += &#39;&amp;lt;say-as interpret-as=&amp;quot;date&amp;quot; format=&amp;quot;m&amp;quot;&amp;gt;9&amp;lt;/say-as&amp;gt;&amp;lt;say-as interpret-as=&amp;quot;date&amp;quot; format=&amp;quot;d&amp;quot;&amp;gt;3&amp;lt;/say-as&amp;gt;&amp;lt;break time=&amp;quot;1s&amp;quot;/&amp;gt;&#39;;
        speechOut += &#39;ちなみにちゃんとくさんの誕生日みたいですよ。&amp;lt;say-as interpret-as=&amp;quot;interjection&amp;quot;&amp;gt;きゃ〜&amp;lt;/say-as&amp;gt;&#39;;
        this.emit(&#39;:ask&#39;, speechOut);
    },
    &#39;SubIntent&#39;: function () {
        let speechOut = &#39;例えば炭素を表すCと書いて、&#39;;
        speechOut += &#39;&amp;lt;sub alias=&amp;quot;カーボン&amp;quot;&amp;gt;C&amp;lt;/sub&amp;gt;と読ませることができます。&#39;;
        this.emit(&#39;:ask&#39;, speechOut);
    },
    &#39;SoundIntent&#39;: function () {
        let speechOut = &#39;音も簡単に流せますよ。&#39;;
        speechOut += &#39;&amp;lt;audio src=&amp;quot;https://s3.amazonaws.com/ask-soundlibrary/animals/amzn_sfx_dog_med_bark_2x_02.mp3&amp;quot;/&amp;gt;&#39;;
        this.emit(&#39;:ask&#39;, speechOut);
    },
    &#39;EmphasisIntent&#39;: function () {
        let speechOut = &#39;私本当に、&#39;;
        speechOut += &#39;&amp;lt;emphasis level=&amp;quot;strong&amp;quot;&amp;gt;本当に&amp;lt;/emphasis&amp;gt;&#39;;
        speechOut += &#39;焼肉が好きなんです。&#39;;
        this.emit(&#39;:ask&#39;, speechOut);
    },
    &#39;ProsodyIntent&#39;: function () {
        let speechOut = &#39;大事なことは&amp;lt;prosody rate=&amp;quot;x-slow&amp;quot;&amp;gt;ゆっくり&amp;lt;/prosody&amp;gt;、&#39;;
        speechOut += &#39;嬉しいことは&amp;lt;prosody pitch=&amp;quot;x-high&amp;quot;&amp;gt;高い声で&amp;lt;/prosody&amp;gt;&#39;;
        speechOut += &#39;しゃべっちゃいます。&#39;;
        this.emit(&#39;:ask&#39;, speechOut);
    },
    &#39;AMAZON.HelpIntent&#39;: function () {
        this.emit(&#39;:tell&#39;, this.t(&#39;&#39;));
    },
    &#39;AMAZON.CancelIntent&#39;: function () {
        this.emit(&#39;:tell&#39;, this.t(&#39;&#39;));
    },
    &#39;AMAZON.StopIntent&#39;: function () {
        this.emit(&#39;:tell&#39;, this.t(&#39;&#39;));
    },
};

exports.handler = function(event, context, callback) {
    const alexa = Alexa.handler(event, context, callback);
    alexa.registerHandlers(handlers);
    alexa.execute();
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;

&lt;p&gt;ドキュメントを見て試してみたところ、発音や品詞の解釈など一部日本語スキルには対応していないものもあるようです。&lt;/p&gt;

&lt;p&gt;また一部重複する機能もあるので、可読性や統一性を考えながら実装していくのがよさそうです。&lt;/p&gt;

&lt;p&gt;使いどころを抑えて、Alexaの自然な発話を目指していきましょう！&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>営業撃退！？押した人が誰かわかる「インターホン・改」を作ってみた</title>
      <link>https://dotstud.io/blog/no-more-sales-intercom/</link>
      <pubDate>Tue, 17 Jul 2018 10:00:00 +0900</pubDate>
      
      <guid>https://dotstud.io/blog/no-more-sales-intercom/</guid>
      
      <description>

&lt;p&gt;こんにちは、&lt;a href=&#34;https://dotstud.io/members/tomato&#34;&gt;佐々木さん&lt;/a&gt;です。一度はとまとというあだ名を授かりましたが、いろいろ審議ののちあだ名を得られず佐々木さんになりました。&lt;/p&gt;

&lt;p&gt;ところでdotstudioには、オフィスハックの大先輩・&lt;a href=&#34;https://dotstud.io/members/ukok&#34;&gt;うこ&lt;/a&gt;さんが作ったインターホンがあります。&lt;/p&gt;



&lt;section class=&#34;link&#34; id=&#34;133&#34;&gt;
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
          &lt;div class=&#34;link_content&#34;&gt;
          &lt;a href=&#34;https://dotstud.io/blog/office-new-door-notification/&#34;&gt;&lt;/a&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/133/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
          &lt;/div&gt;
          &lt;div class=&#34;link_content&#34;&gt;
            &lt;div class=&#34;link_detail&#34;&gt;
              &lt;div class=&#34;link_title&#34;&gt;
                オフィス移転したらインターホンがなかったのでRaspbeerry Piでカメラ付きインターホン作ってみた
              &lt;/div&gt;
              &lt;div class=&#34;link_date&#34;&gt;
                
                2017-11-20
              &lt;/div&gt;
              &lt;div class=&#34;link_desc&#34;&gt;
                インターホンがなければラズパイで作ればいいじゃない。Raspberry PiとGroveセンサでカメラ付きインターホンを自作しました。
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/section&gt;
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
&lt;/section&gt;


&lt;p&gt;今回はこのインターホンを改良して、&lt;strong&gt;しつこい訪問営業を撃退できるインターホン&lt;/strong&gt;を作ってみます。&lt;/p&gt;

&lt;h2 id=&#34;無茶振りは突然に&#34;&gt;無茶振りは突然に&lt;/h2&gt;

&lt;p&gt;&lt;center&gt;〜ある日の夕方、dotstudioオフィスにて〜&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/188/1.png&#34; alt=&#34;1&#34;&gt;

&lt;/center&gt;

&lt;center&gt;（ぽんっ）&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/188/2.png&#34; alt=&#34;2&#34;&gt;

&lt;/center&gt;

&lt;center&gt;（あっ、dotstudioしゃちょーの&lt;a href=&#34;https://dotstud.io/members/n0bisuke&#34;&gt;のびすけ&lt;/a&gt;さんだ！）&lt;/center&gt;&lt;/p&gt;

&lt;div class=&#34;parent&#34;&gt;
    &lt;div class=&#34;dialogue&#34;&gt;
        &lt;div class=&#34;image_n&#34;&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/188/nobi.png&#34; /&gt;
          &lt;section class=&#34;name&#34;&gt;のびすけ&lt;/section&gt;
        &lt;/div&gt;
        &lt;div class=&#34;text&#34;&gt;
            佐々木さん、電子工作得意だよね？営業の訪問が多くて困ってるんだけど、&lt;b&gt;営業を撃退できるインターホン作れない？&lt;/b&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&#34;parent&#34;&gt;
    &lt;div class=&#34;dialogue&#34;&gt;
        &lt;div class=&#34;image_s&#34;&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/188/sasaki.png&#34; /&gt;
          &lt;section class=&#34;name&#34;&gt;佐々木さん&lt;/section&gt;
        &lt;/div&gt;
        &lt;div class=&#34;text&#34;&gt;
            （無茶振りだ……）
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&#34;parent&#34;&gt;
    &lt;div class=&#34;dialogue&#34;&gt;
        &lt;div class=&#34;image_n&#34;&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/188/nobi.png&#34; /&gt;
          &lt;section class=&#34;name&#34;&gt;のびすけ&lt;/section&gt;
        &lt;/div&gt;
        &lt;div class=&#34;text&#34;&gt;
            じゃあ1週間後までによろしく！
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&#34;parent&#34;&gt;
    &lt;div class=&#34;dialogue&#34;&gt;
        &lt;div class=&#34;image_s&#34;&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/188/sasaki.png&#34; /&gt;
          &lt;section class=&#34;name&#34;&gt;佐々木さん&lt;/section&gt;
        &lt;/div&gt;
        &lt;div class=&#34;text&#34;&gt;
            （かなり無茶振りだ……）
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;ということで時間がないのでさっそく作りましょう！&lt;/p&gt;

&lt;h2 id=&#34;インターホン改の製作イメージ&#34;&gt;インターホン改の製作イメージ&lt;/h2&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/188/architecture.png&#34; alt=&#34;architecture&#34;&gt;

&lt;/center&gt;

来客がどんな用件か見分けるために、&lt;strong&gt;最初からボタンを複数用意し、それぞれ音を変えて判別する&lt;/strong&gt;ようにしてみました。&lt;/p&gt;

&lt;p&gt;また前回はBluetooth接続のスピーカーを利用していましたが、通信が切れやすい問題があったので今回は&lt;strong&gt;有線でスピーカーを繋ぎます&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;ボタンとなるセンサは扉の外側に、インターホンの本体となるRaspberry Piは扉の内側に設置します。&lt;/p&gt;

&lt;h2 id=&#34;使ったもの&#34;&gt;使ったもの&lt;/h2&gt;

&lt;h3 id=&#34;raspberry-pi-3-model-b&#34;&gt;Raspberry Pi 3 Model B&lt;/h3&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/188/raspi.png&#34; alt=&#34;raspi&#34;&gt;

&lt;/center&gt;


&lt;p&gt;前回に引き続き、ボードはRaspberry Pi（通称ラズパイ）を使います。ラズパイには&lt;strong&gt;スピーカーのコネクタを直接刺すことができる&lt;/strong&gt;ので便利ですね！&lt;/p&gt;

&lt;h3 id=&#34;タッチセンサ&#34;&gt;タッチセンサ&lt;/h3&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/188/touch.png&#34; alt=&#34;touch&#34;&gt;

&lt;/center&gt;


&lt;p&gt;タッチセンサは、今回安く大量に調達した&lt;a href=&#34;https://www.amazon.co.jp/HiLetgo%C2%AE-10%E5%80%8B%E3%82%BB%E3%83%83%E3%83%88-TTP223-%E9%9D%99%E9%9B%BB%E5%AE%B9%E9%87%8F%E5%BC%8F%E3%82%BF%E3%83%83%E3%83%81%E3%82%B9%E3%82%A4%E3%83%83%E3%83%81-%E3%83%87%E3%82%B8%E3%82%BF%E3%83%AB%E3%82%BF%E3%83%83%E3%83%81%E3%82%BB%E3%83%B3%E3%82%B5%E3%83%BC%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB/dp/B010RYGET4/ref=sr_1_63?m=A1XEAMF1H64GNM&amp;amp;s=merchant-items&amp;amp;ie=UTF8&amp;amp;qid=1531481468&amp;amp;sr=1-63&#34;&gt;中国製のタッチセンサ&lt;/a&gt;を使います（&lt;a href=&#34;https://www.amazon.co.jp/s/ref=sr_pg_3?me=A1XEAMF1H64GNM&amp;amp;rh=i%3Amerchant-items&amp;amp;page=3&amp;amp;ie=UTF8&amp;amp;qid=1531481449&#34;&gt;HiLetgo JP&lt;/a&gt;というストア、安く大量購入できて面白いです）。&lt;/p&gt;

&lt;h3 id=&#34;適当なスピーカー&#34;&gt;適当なスピーカー&lt;/h3&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/188/speaker.png&#34; alt=&#34;speaker&#34;&gt;

&lt;/center&gt;

インターホンの音を鳴らすため、適当なスピーカーを用意します。&lt;/p&gt;

&lt;p&gt;このスピーカーはあきばお〜さんで&lt;strong&gt;なんと300円&lt;/strong&gt;でした！（普通に使えてます！）&lt;/p&gt;

&lt;h3 id=&#34;その他&#34;&gt;その他&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;ダンボール（加工が楽なので採用しました。）&lt;/li&gt;
&lt;li&gt;音源（それぞれのボタン向けに音源を用意します。それっぽいと雰囲気が出ます。）&lt;/li&gt;
&lt;li&gt;配線用のジャンパ&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;作っていく&#34;&gt;作っていく&lt;/h2&gt;

&lt;h3 id=&#34;配線&#34;&gt;配線&lt;/h3&gt;

&lt;p&gt;下図のようにラズパイとセンサを接続していきます。図のスイッチはタッチセンサに置き換えて見てください。&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/188/circuit.png&#34; alt=&#34;circuit&#34;&gt;

&lt;/center&gt;


&lt;p&gt;それぞれ繋いでいるGPIOは下記です。&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;center&#34;&gt;役割&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;GPIO&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;電源&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;3.3V&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;GND&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;GND&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;タッチセンサ&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;23&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;タッチセンサ&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;24&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;タッチセンサ&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;25&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
&lt;li&gt;タッチセンサのGNDは、それぞれラズパイのGNDに接続します。&lt;/li&gt;
&lt;li&gt;タッチセンサのVccをラズパイの3.3Vに接続します。&lt;/li&gt;
&lt;li&gt;タッチセンサのinputをラズパイの23、24、25にそれぞれ繋ぎます。&lt;/li&gt;
&lt;li&gt;最後にスピーカーをイヤホンの部分に繋ぎます。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;以上で回路は完成です。&lt;/p&gt;

&lt;h3 id=&#34;プログラム&#34;&gt;プログラム&lt;/h3&gt;

&lt;p&gt;ラズパイ上で動かすプログラムはこんな感じです。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#!/usr/bin/python

import RPi.GPIO as GPIO
import subprocess
from time import sleep

GPIO.setmode(GPIO.BCM)
GPIO.setup(23, GPIO.IN)
GPIO.setup(24, GPIO.IN)
GPIO.setup(25, GPIO.IN)

while True:
    if GPIO.input(23) == GPIO.HIGH:
        # center
        # hoge.mp3　ここには好きな音源を入れてください
        subprocess.call(&amp;quot;mpg321 -q /home/pi/hometools/sounds/hoge.mp3&amp;quot;, shell = True)
    elif GPIO.input(24) == GPIO.HIGH:
        # right
        # fuga.mp3　ここには好きな音源を入れてください
        subprocess.call(&amp;quot;mpg321 -q /home/pi/hometools/sounds/fuga.mp3&amp;quot;, shell = True)
    elif GPIO.input(25) == GPIO.HIGH:
        # left
        # piyo.mp3　ここには好きな音源を入れてください
        subprocess.call(&amp;quot;mpg321 -g 20 /home/pi/hometools/sounds/piyo.mp3&amp;quot;, shell = True)
    else:
        sleep(0.01)

GPIO.cleanup()
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;外装&#34;&gt;外装&lt;/h3&gt;

&lt;p&gt;こんな感じでダンボールを加工して、用途に合わせた表示を作ります（1番右は前回使ったGroveのタッチセンサを流用）。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/188/gawa.png&#34; alt=&#34;gawa&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;h2 id=&#34;試してみる&#34;&gt;試してみる&lt;/h2&gt;

&lt;p&gt;&lt;center&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/unn1wIqbkKI&#34; frameborder=&#34;0&#34; allow=&#34;autoplay; encrypted-media&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;タッチしたセンサによって3種の音を流すことができました！これで完成です！&lt;/p&gt;

&lt;h2 id=&#34;のびすけさんにご報告&#34;&gt;のびすけさんにご報告&lt;/h2&gt;

&lt;div class=&#34;parent&#34;&gt;
    &lt;div class=&#34;dialogue&#34;&gt;
        &lt;div class=&#34;image_s&#34;&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/188/sasaki.png&#34; /&gt;
          &lt;section class=&#34;name&#34;&gt;佐々木さん&lt;/section&gt;
        &lt;/div&gt;
        &lt;div class=&#34;text&#34;&gt;
            のびすけさん、インターホン完成しました！
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&#34;parent&#34;&gt;
    &lt;div class=&#34;dialogue&#34;&gt;
        &lt;div class=&#34;image_n&#34;&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/188/nobi.png&#34; /&gt;
          &lt;section class=&#34;name&#34;&gt;のびすけ&lt;/section&gt;
        &lt;/div&gt;
        &lt;div class=&#34;text&#34;&gt;
            おうおう。
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;&lt;center&gt;




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/188/3.png&#34; alt=&#34;3&#34;&gt;

&lt;/center&gt;

&lt;font size=&#34;4&#34;&gt;「じゃーん！こちらです！」&lt;/font&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;div class=&#34;parent&#34;&gt;
    &lt;div class=&#34;dialogue&#34;&gt;
        &lt;div class=&#34;image_n&#34;&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/188/nobi.png&#34; /&gt;
          &lt;section class=&#34;name&#34;&gt;のびすけ&lt;/section&gt;
        &lt;/div&gt;
        &lt;div class=&#34;text&#34;&gt;
            見た目が……ださい……。
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;&lt;center&gt;




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/188/4.png&#34; alt=&#34;4&#34;&gt;

&lt;/center&gt;

「まず左右のpadding違うし！上下のpaddingも違うし！そもそも字汚いしあれやこれやくどくどくど………」
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;&lt;center&gt;




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/188/5.png&#34; alt=&#34;5&#34;&gt;

&lt;/center&gt;

「はい……。すいません……。」
&lt;/center&gt;
&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;一流のオフィスハッカーになる道のりはまだまだ遠そうです……。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
&lt;center&gt;
〜Fin〜
&lt;/center&gt;&lt;/p&gt;

&lt;style&gt;
.dialogue {
    padding: 10px;
    display: table;
}

.image_n, .image_s {
    width: 75px;
    height: 75px;
    margin-right: 10px;
    display: table-cell;
    vertical-align: middle;
}

.image_n img {
    border-radius: 50%;
    border: 2px solid blue;
}

.image_s img {
    border-radius: 50%;
    border: 2px solid green;
}

.name {
    font-weight: bold;
    text-align: center;
}

.text {
    display: table-cell;
    padding: 0;
    vertical-align: middle;
    padding-left: 20px;
}
&lt;/style&gt;
</description>
    </item>
    
    <item>
      <title>本日リリース！LINE Clovaのスキル開発の始め方〜申請編〜 #clova #linebootawards #clova_cek</title>
      <link>https://dotstud.io/blog/line-clova-skill-tutorial/</link>
      <pubDate>Thu, 12 Jul 2018 16:20:00 +0900</pubDate>
      
      <guid>https://dotstud.io/blog/line-clova-skill-tutorial/</guid>
      
      <description>

&lt;p&gt;こんにちは、&lt;a href=&#34;https://dotstud.io/members/n0bisuke&#34;&gt;n0bisuke&lt;/a&gt;です。&lt;/p&gt;

&lt;p&gt;LINEのAIアシスタントClovaのCEK（SDK的なやつ）が発表されましたね。&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://linecorp.com/ja/pr/news/ja/2018/2299&#34;&gt;2018/7/12 【LINE Clova】「Clova」のスキルを開発・拡張できる「Clova Extensions Kit」を本日より一般公開&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;center&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;ja&#34;&gt;&lt;p lang=&#34;ja&#34; dir=&#34;ltr&#34;&gt;本日、AIアシスタント「Clova」のスキルを誰でも開発できる「Clova Extensitons Kit」を公開しました。併せて公開した「Clova Developer Center」にて、チュートリアルや各種ドキュメントも掲載しています。是非お試し頂き、皆様の手で新たな「Clova」スキルを！ &lt;a href=&#34;https://twitter.com/hashtag/Clova_CEK?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#Clova_CEK&lt;/a&gt;&lt;a href=&#34;https://t.co/dk7R4SE2rB&#34;&gt;https://t.co/dk7R4SE2rB&lt;/a&gt;&lt;/p&gt; LINE_DEV (@LINE_DEV) &lt;a href=&#34;https://twitter.com/LINE_DEV/status/1017305082818322432?ref_src=twsrc%5Etfw&#34;&gt;2018年7月12日&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;これでClovaのスキルが開発スタート出来るわけですね。&lt;/p&gt;

&lt;p&gt;また、同時リリースですが、&lt;strong&gt;優勝賞金1000万円の&lt;a href=&#34;https://www.line-community.me/awards/&#34;&gt;LINE BOOT AWARDS&lt;/a&gt;が開催&lt;/strong&gt;されます。&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;ja&#34;&gt;&lt;p lang=&#34;ja&#34; dir=&#34;ltr&#34;&gt;「Clova Extensions Kit」＆「Messaging API」が対象の「LINE BOOT AWARDS 2018」も開催！今年も優勝賞金1000万円！部門賞や協賛テーマ賞なども複数設けています。ちなみに色んな思いを込めて”BOOT”になりました、誤植ではありません。 &lt;a href=&#34;https://twitter.com/hashtag/Clova_CEK?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#Clova_CEK&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/LINE_API?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#LINE_API&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/linebootawards?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#linebootawards&lt;/a&gt;&lt;a href=&#34;https://t.co/J0gQdZKllM&#34;&gt;https://t.co/J0gQdZKllM&lt;/a&gt;&lt;/p&gt; LINE_DEV (@LINE_DEV) &lt;a href=&#34;https://twitter.com/LINE_DEV/status/1017326211385647104?ref_src=twsrc%5Etfw&#34;&gt;2018年7月12日&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Clovaのスキルを開発して応募して1000万円を狙いましょう！！！&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&amp;hellip;&amp;hellip;.とテンション上げめですが、何はともあれやってみないと始まらないので解説していきます。&lt;/p&gt;

&lt;p&gt;出たばっかりで僕もまだ全然把握できてないので随時更新です。&lt;/p&gt;

&lt;p&gt;Clovaってそもそも何？って人はこちらの記事をご参照ください&lt;/p&gt;



&lt;section class=&#34;link&#34; id=&#34;185&#34;&gt;
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
          &lt;div class=&#34;link_content&#34;&gt;
          &lt;a href=&#34;https://dotstud.io/blog/clova-ifttt-nefrybt-arduino/&#34;&gt;&lt;/a&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/185/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
          &lt;/div&gt;
          &lt;div class=&#34;link_content&#34;&gt;
            &lt;div class=&#34;link_detail&#34;&gt;
              &lt;div class=&#34;link_title&#34;&gt;
                ClovaとNefryBT（ESP32）を連携させてみよう
              &lt;/div&gt;
              &lt;div class=&#34;link_date&#34;&gt;
                
                2018-07-10
              &lt;/div&gt;
              &lt;div class=&#34;link_desc&#34;&gt;
                Nefry BTを使って電子工作した勤怠システムとClovaを連携させてみました。
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/section&gt;
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
&lt;/section&gt;


&lt;h2 id=&#34;clova-developer-centerにアクセス&#34;&gt;Clova Developer Centerにアクセス&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://clova-developers.line.me/&#34;&gt;https://clova-developers.line.me/&lt;/a&gt; にアクセスしましょう。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/35a230caad75aab3685c5fdae9a81222.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Clovaの動画があるので見ると概要が掴めます。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code&gt;「スキルを開発する」&lt;/code&gt;&lt;/strong&gt;のリンクから進みましょう。&lt;/p&gt;

&lt;p&gt;LINEのログインを求められるのでログインしてください。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/87929b699f732fe3995f51de78b792e3.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code&gt;「LINE Developersでスキルチャネルを新規作成」&lt;/code&gt;&lt;/strong&gt;を押して進みます。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/459cb0f47ac41262d328ad1f8812853c.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;プロバイダーの選択または新規作成&#34;&gt;プロバイダーの選択または新規作成&lt;/h2&gt;

&lt;p&gt;LINE BOTの開発をした人は分かると思うのですがLINEのAPIを使った開発をする場合はプロバイダー登録という&lt;strong&gt;開発者情報の登録&lt;/strong&gt;があります。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;既にプロバイダーを作ったことがある場合 → 利用するプロバイダーを選択しましょう。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/718e1b7255961e90e3c5a2278c14d43a.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;初めて → 新規プロバイダー作成から進んでプロバイダー名を入力しましょう。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/46360d629ad2a79a092f2ec91b1159d7.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;clovaスキルのチャネル登録&#34;&gt;Clovaスキルのチャネル登録&lt;/h2&gt;

&lt;p&gt;LINEのAPI群ではアプリやスキルの一つ一つをチャネルと呼びます。
（自信ないけど認識間違ってたらたぶん中の人が指摘してくれる）&lt;/p&gt;

&lt;p&gt;フォームに入力して進めていきます。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;チャネル名&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/b09917a9a6139d3699a1d14d707bff90.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;作成&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;&lt;code&gt;「作成してClova Developer Centerに移動」&lt;/code&gt;&lt;/strong&gt;を選択&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/ce082e7870bf167ccd80e447cb883f60.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;チャネルの基本設定&#34;&gt;チャネルの基本設定&lt;/h2&gt;

&lt;p&gt;引き続きチャネルの基本設定です。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/c2dd4dd6e7eb3666b74da513aecf5b32.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;タイプの設定&#34;&gt;タイプの設定&lt;/h3&gt;

&lt;p&gt;タイプを選択します。&lt;/p&gt;

&lt;p&gt;現状は&lt;strong&gt;&lt;code&gt;「カスタム」&lt;/code&gt;&lt;/strong&gt;のみ選択できる模様です。&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;音楽、ゲームなど、基本的な会話にもとづいたスキルを提供するためには、カスタムExtensionを選択して下さい。今後、IoTデバイス制御サービスのためのClova Home Extensionや、カスタマーサービスのためのChatBot Extensionが追加される予定です。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/9eff932fcbefdba914ee97fabbfe6776.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;extension-id&#34;&gt;Extension ID&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;ExtensionのIDは、リバースドメインの表記で入力してください。また、Extension IDは、他のExtensionと重複しない、一意の値である必要があります。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;自分が持っているドメインなどを逆転させて他の人と被らないもの&lt;/strong&gt;にしましょう。&lt;/p&gt;

&lt;p&gt;例えばあなたが「huga.hoge.com」のようなドメインを管理していたら「com.hoge.huga.appname」などにすると良いです。&lt;/p&gt;

&lt;h3 id=&#34;スキル名&#34;&gt;スキル名&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;スキル名は審査通過後にスキルストアに表示されます。Extensionの内容と無関係な名称や、ユーザーを混乱させる可能性のあるものは、ポリシーによって審査時にリジェクトされることがあります。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;今後公開されるスキルストアに掲載される名前の模様です。
&lt;strong&gt;スキル名は審査対象になる&lt;/strong&gt;とのこと。&lt;/p&gt;

&lt;h3 id=&#34;呼び出し名&#34;&gt;呼び出し名&lt;/h3&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/de477432d1debca4c186f243035cc5f8.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;ユーザーがExtensionを利用するために呼び出す名称を入力してください。他のスキルを同じ呼び出し名を登録することはできません。ユーザーにとって呼びやすく、発音しやすい名前にすることをお勧めします。呼び出し名には汎用的な言葉は使えませんが、ブランドまたはサービス名などは使用することができます。(例：ピザという名称を登録することはできませんが、LINEピザのようにブランド名を利用した名前であれば利用可能です) また、ブランドやサービス名が長すぎたり、発音が難しい場合には、省略して使用することもできます。呼び出し名は審査対象です。ポリシーによってはリジェクトされることがあります。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Clovaに呼びかけて&lt;strong&gt;スキルを呼び出す際の名前&lt;/strong&gt;です。&lt;strong&gt;（サブ）の方に表現の揺らぎを記述&lt;/strong&gt;しておくと呼び出す際の精度が増します。&lt;/p&gt;

&lt;h3 id=&#34;audioplayerの使用&#34;&gt;AudioPlayerの使用&lt;/h3&gt;

&lt;p&gt;MP3など音源を配信するかどうかのチェックです。&lt;/p&gt;

&lt;p&gt;取り急ぎ予定が無いのでいいえにしてみました。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/58f847a87c4cbbb6b8aa417d4d118bf9.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;提供者について&#34;&gt;提供者について&lt;/h3&gt;

&lt;p&gt;提供者の情報です。個人か法人かで入力項目が分かれます。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/1bc5f94f4d4e8a0cbcafe5635d0a6578.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ちなみに&lt;strong&gt;既に同じプロバイダーでLINE BOTを作ったことがある場合は、連携させることが出来ます。&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/ef9c28a3e627a056183ce19cf1500ac5.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;入力が完了したら、規約と個人情報取り扱い同意にチェックをし、&lt;strong&gt;&lt;code&gt;「作成」&lt;/code&gt;&lt;/strong&gt;で進みましょう。&lt;/p&gt;

&lt;h2 id=&#34;サーバー設定&#34;&gt;サーバー設定&lt;/h2&gt;

&lt;p&gt;基本情報を入力したら確認画面が出るので&lt;strong&gt;&lt;code&gt;次へ&lt;/code&gt;&lt;/strong&gt;で進みます。&lt;/p&gt;

&lt;h3 id=&#34;extensionサーバーのurl&#34;&gt;ExtensionサーバーのURL&lt;/h3&gt;

&lt;p&gt;スキルのプログラムを置く&lt;strong&gt;サーバーを指定&lt;/strong&gt;します。
&lt;code&gt;https&lt;/code&gt;に対応したサーバーにする必要があります。&lt;/p&gt;

&lt;p&gt;LINE BOTの時にもよく利用する&lt;a href=&#34;https://qiita.com/n0bisuke/items/ceaa09ef8898bee8369d#4-now%E3%81%A7%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4&#34;&gt;now&lt;/a&gt;などのサービスを使うと良さそうです。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/414ed1bfb1f166a3db726242e87ac1c0.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;アカウント連携の有無&#34;&gt;アカウント連携の有無&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;サービス提供者側で管理しているユーザーアカウントとの連携が必要な場合、または新規アカウントの作成が必要な場合は[はい]を選択してください。詳細については[認証サーバーの構築]ガイドドキュメントを参照してください。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ユーザーアカウントとの連携が必要かどうかの設定です。ここでは無しを選択しました。&lt;/p&gt;

&lt;h2 id=&#34;配布情報&#34;&gt;配布情報&lt;/h2&gt;

&lt;p&gt;（おそらく）スキルストアに掲載される情報です。&lt;/p&gt;

&lt;h3 id=&#34;カテゴリ&#34;&gt;カテゴリ&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;作成するスキルが該当するカテゴリ&lt;/strong&gt;を選択しましょう。&lt;/p&gt;

&lt;h3 id=&#34;審査担当者へのコメント&#34;&gt;審査担当者へのコメント&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;審査担当者へのコメント&lt;/strong&gt;だそうです。使い方などを記述します。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/1b554328055c48282cdf73f3e0c14f6f.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;こんな雰囲気で書いてみました。よろしくお願いします！的な意気込みもありかも？&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;1. スキルの簡単な概要: 周辺のカレー店の情報を知れます。
2. Intentおよび各々のテスト発話
    - YourIntent01：今開いてるカレー屋を教えて
    - YourIntent02：近くで一番安いカレー屋を教えて
    - YourIntent03：今日のオススメのカレーは？
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;サービスを提供する国および地域&#34;&gt;サービスを提供する国および地域&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;このExtensionは、Clovaがサービスを提供する全ての国および地域で利用できます。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;現時点では日本限定など国を指定した配信はできない模様です。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/1027a5b8caa082d773dddbee168ec405.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;extensionの説明-ユーザー向け&#34;&gt;Extensionの説明（ユーザー向け）&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;この項目は、スキルストアのスキルページで表示されます。以下の要件に沿って、ユーザー向けの説明を詳しく作成してください。なお、入力内容が不足している場合は、審査時にリジェクトされることがあります。(500文字以内)
スキルの説明（ユーザー向け）の要件
必須：スキルの概要、利用可能なサービス内容
必須：スキルの利用方法
任意：問い合わせ先の情報（例：カスタマーセンターの情報）
但し、個人の開発者がメールアドレスや電話番号、住所等を記載する場合は、リスクを認識した上でご記入ください。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;この項目重要ですね。&lt;/strong&gt;他も重要だけど。&lt;/p&gt;

&lt;p&gt;ユーザーがストアページを見た際の項目です。概要を分かりやすく書きましょう！&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/f43b85570275b9030db35f0af54bc3dd.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;代表サンプル発話&#34;&gt;代表サンプル発話&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;ユーザーがどのようにExtensionを利用できるかを表すサンプルフレーズです。ここに入力した内容がユーザーにどのように表示されるか確認するには、Clovaアプリで[設定]&amp;gt;[拡張サービスの管理]メニューに移動し、ExtensionのリストからUIまたは説明を確認してください。1つ目の代表サンプル発話には「〜を起動して」「〜を開いて」など、スキルを起動するフレーズを登録してください。（例：ピザボットを起動して）&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ユーザー側にどのようにスキルを使うのかの説明を書いてあげます。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/82c9daae4c231297f3518e59f58b0747.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;検索キーワード-任意&#34;&gt;検索キーワード(任意)&lt;/h3&gt;

&lt;p&gt;ユーザーがスキルを探す際のキーワードです。 &lt;strong&gt;カンマ区切りで5つまでキーワードを設定&lt;/strong&gt;できます。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/9bea944c04f72ce28257f84e40f2433e.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;アイコン&#34;&gt;アイコン&lt;/h3&gt;

&lt;p&gt;スキルのアイコンです。 &lt;strong&gt;512x512 pxのPNGまたはJPEG&lt;/strong&gt;が利用できます。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/d5199a56355daa0e9524d3bdd5afca70.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;カレーアイコン入れてみるとこんな感じです。&lt;/p&gt;

&lt;h3 id=&#34;対象デバイス&#34;&gt;対象デバイス&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;スキルを利用可能にするClovaデバイスを選択してください。チェックを外したデバイスからはスキルを呼び出すことができません。スキルを利用できるデバイスを1つ以上選択してください。
※ AudioPlayerを利用する場合、Xperia Ear Duoでは動作しません。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;対象デバイスの指定です。現時点だと&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Clova WAVE&lt;/li&gt;
&lt;li&gt;Clova Friends&lt;/li&gt;
&lt;li&gt;Clova Friends mini&lt;/li&gt;
&lt;li&gt;Xperia Ear Duo&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;の4デバイスで利用できる模様です。 &lt;strong&gt;特に指定がない場合はデフォルトの全チェックのままでOKです。&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/e411ea1d9e5e35cfbf98b44792ac5ae7.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;最後まで記述したら&lt;strong&gt;&lt;code&gt;次へ&lt;/code&gt;&lt;/strong&gt;で進みます。&lt;/p&gt;

&lt;h2 id=&#34;個人情報の保護および規約同意&#34;&gt;個人情報の保護および規約同意&lt;/h2&gt;

&lt;p&gt;最後は個人情報保護と規約に関して登録します。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/c405642b2b0d154659b78efb3f0f35bf.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;審査をリクエストしたいが&#34;&gt;審査をリクエストしたいが……&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;対話モデル&lt;/code&gt;の設定をしないといけません。
ここの項目は説明が多くて記事を分けたいと思います。取り急ぎここまでで保存しておきましょう。&lt;/p&gt;

&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;

&lt;p&gt;速報的に作ろうと思ったのですが、思ったより申請フローは長い模様です。&lt;/p&gt;

&lt;p&gt;取り急ぎ登録して保存するところまでの紹介となります。&lt;/p&gt;

&lt;p&gt;進められたらまた更新しますね！！&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>PWM制御をマスターしよう！Node-REDでサーボモータを遠隔制御する方法＆初ハンズオンレポート</title>
      <link>https://dotstud.io/blog/nefry-servo-handson-takudooon/</link>
      <pubDate>Thu, 12 Jul 2018 10:00:00 +0900</pubDate>
      
      <guid>https://dotstud.io/blog/nefry-servo-handson-takudooon/</guid>
      
      <description>

&lt;h2 id=&#34;暑さ本番-いよいよ大好きな生ビールの季節がやってまいりました&#34;&gt;暑さ本番、いよいよ大好きな生ビールの季節がやってまいりました！&lt;/h2&gt;

&lt;p&gt;みなさまいかがお過ごしでしょうか？どうも、宇宙エンジニアの&lt;a href=&#34;https://dotstud.io/members/takudooon&#34;&gt;たくろーどん&lt;/a&gt;です。毎日、暑いですね。&lt;/p&gt;

&lt;p&gt;さて先日、&lt;strong&gt;初めてハンズオンイベント&lt;/strong&gt;を企画・実施してみました！題して、「&lt;a href=&#34;https://dotstudio.connpass.com/event/91695/&#34;&gt;&lt;strong&gt;【IoT】PWM制御をマスター！Nefry BT+Node-REDでサーボモータを遠隔制御&lt;/strong&gt;&lt;/a&gt;」！&lt;/p&gt;

&lt;p&gt;「モノづくりをしたい！」「こんなものをつくりたい！」と思っても「&lt;strong&gt;こういう技術がつかえる&lt;/strong&gt;」ということを知らないと、なかなかモノづくりが進みません。&lt;/p&gt;

&lt;p&gt;なので、動くものを作りたいときに便利な&lt;u&gt;&lt;strong&gt;サーボモータとその制御方法であるPWM制御&lt;/strong&gt;をマスターし、&lt;strong&gt;PCからサーボモータを遠隔制御をしよう&lt;/strong&gt;&lt;/u&gt;というのがハンズオンの目論見です。&lt;/p&gt;

&lt;p&gt;では、ちらっとハンズオンの内容を振り返ってみたいと思います。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/187/1.png&#34; alt=&#34;1&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;h2 id=&#34;pwm制御を用いたプログラムの書き方&#34;&gt;PWM制御を用いたプログラムの書き方&lt;/h2&gt;

&lt;h3 id=&#34;pwm制御について&#34;&gt;PWM制御について&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://dotstud.io/docs/pulse-width-modulation/&#34;&gt;PWM制御の大まかな説明&lt;/a&gt;は以前、ドキュメントに書きました。ようするに、PWM制御は「&lt;strong&gt;パルスのオン・オフ繰り返し切り替えることで出力される電力を制御&lt;/strong&gt;」するという意味です。&lt;/p&gt;

&lt;p&gt;でも結局のところ、「&lt;strong&gt;PWM制御ってどんなイメージやねん！&lt;/strong&gt;」と多くの方が思うでしょう。&lt;/p&gt;

&lt;p&gt;なので、これがわかりやすいのではないかという説明を思いつきました。それが、下記の動画です。
&lt;img src=&#34;https://dotstud.io/img/blog/187/2.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;例えば、自宅から最寄りの駅まで走らなければならない状況を考えます。まるで、小学校の算数にでてくるたかしくんの問題を彷彿させますね。知らんけど。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;100%の力で走れば5分で駅につく ≒ 100%出力されるので、5V出力される&lt;/li&gt;
&lt;li&gt;全力で走って途中で歩くと9分で駅に着く（全体的に80%の力で走る） ≒ 80%出力されるので、4V出力される&lt;/li&gt;
&lt;li&gt;全力で走って途中で歩くと10分で駅に着く（全体的に50%の力で走る） ≒ 50%出力されるので、2.5V出力される&lt;/li&gt;
&lt;li&gt;全力で走って途中で歩くと15分で駅に着く（全体的に10%の力で走る） ≒ 10%出力されるので、0.5V出力される&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;というようなイメージです。自宅から駅まで走る場合は走る速さの具合によって、到着時間が伸びます。しかし、電圧の場合は実行電圧（実際に出力される電圧）は下がっていきます。&lt;/p&gt;

&lt;h3 id=&#34;esp32開発ボードでのプログラムについて&#34;&gt;ESP32開発ボードでのプログラムについて&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://dotstud.io/docs/nefrybt&#34;&gt;Nefry BT&lt;/a&gt;のようなESP32を搭載しているような開発ボードでPWM制御する場合は、ledc関数を使います。&lt;strong&gt;ESP32ではArduinoでつかうようなanalogWrite関数が実装されていない&lt;/strong&gt;とのことなので注意しましょう（ただし、今後変更される可能性があります）。&lt;/p&gt;

&lt;p&gt;例えば、下記のようなプログラムになります。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;
//基本Iotは2.4GHz帯を使うこと
#include&amp;lt;Nefry.h&amp;gt;
#include&amp;quot;esp32-hal-ledc.h&amp;quot;

//PWM信号の周波数をPWMをつくっているクロック周波数で割ったもの
//ledcSetupでPWMの範囲を8bitに設定したとき、0～255　10bitのときは0～1023となる、2進数の話
#define PWM_BITWIDTH 16

//わかりやすいように角度に変換する関数/////////////////////
int deg2pw(int deg, int bit){
    double ms = ((double) deg - 90.0) * 0.95 / 90.0 + 1.45;
    return (int) (ms / 20.0 * pow(2, bit));
}
//////////////////////////////////////////////////////////

void setup() {
  Serial.begin(115200);
//ledcSetup(チャンネル数(0～),周波数(たとえばPWMサイクル20mHzなら50Hzになるという意味(SG90の場合))、分解能は任意(ただし限度はある))
  ledcSetup(0,50,PWM_BITWIDTH);
  ledcAttachPin(ピン番号,0);//left_motor
  Nefry.enableSW();
}

void loop(){
   if((Nefry.readSW())){
      ledcWrite(0,deg2pw(90, PWM_BITWIDTH));
      delay(800);
      ledcWrite(0,deg2pw(0, PWM_BITWIDTH));
   }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;プログラムの書き方&#34;&gt;プログラムの書き方&lt;/h3&gt;

&lt;p&gt;プログラムを詳しく見てましょう。&lt;/p&gt;

&lt;p&gt;ledc関数を使うため、ライブラリ「esp32-hal-ledc.h」を最初にインクルードします。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;#include&amp;quot;esp32-hal-ledc.h&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ライブラリ「esp32-hal-ledc.h」を使うときの主な関数は以下に示すものです。&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;ledcSetup（チャンネル,周波数,分解能）&lt;/li&gt;
&lt;li&gt;ledcAttachPin（ピン番号,チャンネル）：チャンネルはピン番号の識別番号です&lt;/li&gt;
&lt;li&gt;ledcWrite（チャンネル,パルス幅）：設定した角度になるように与えるべきパルス幅を算出する関数&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;実際の記述は以下のようになります。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;void setup() {
    Serial.begin(115200);
    ledcSetup(0,50,PWM_BITWIDTH);
    ledcAttachPin(A2,0);//left_motor
    Nefry.enableSW();
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;分解能は&lt;strong&gt;どれだけ細かく制御するのか&lt;/strong&gt;を表しているイメージです。これは&lt;strong&gt;ビット数&lt;/strong&gt;で表します。&lt;/p&gt;

&lt;p&gt;例えば、分解能を&lt;strong&gt;8ビットとするれば0〜255バイト&lt;/strong&gt;（2の8乗）、&lt;strong&gt;10ビットなら0〜1023バイト&lt;/strong&gt;（2の10乗）となります。&lt;/p&gt;

&lt;p&gt;これを、どのようにPWM制御に使えるのか説明します。PWM制御とは一定電圧の入力から&lt;strong&gt;パルス列のオンとオフの一定周期を作り、オンの時間幅を変化させる電力制御方式&lt;/strong&gt;のことです。つまり、&lt;strong&gt;実効電圧を変化させる&lt;/strong&gt;ことができます。&lt;/p&gt;

&lt;p&gt;なので、例えば、最大5[V]の出力を考えたとき、&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;分解能8ビットだと0→0[V]、127→2.5[V]、255→5[V]&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;分解能10ビットだと0→0[V]、511→2.5[V]、1023→5[V]&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;と表せます。分解能が大きい方が、細かい制御ができることがわかるかと思います。&lt;/p&gt;

&lt;h2 id=&#34;node-red-mqttでサーボモータを遠隔制御&#34;&gt;Node-RED×MQTTでサーボモータを遠隔制御&lt;/h2&gt;

&lt;h3 id=&#34;node-redとは&#34;&gt;Node-REDとは&lt;/h3&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/187/9.png&#34; alt=&#34;9&#34;&gt;

&lt;/center&gt;

&lt;a href=&#34;https://nodered.jp/&#34;&gt;Node-RED&lt;/a&gt;はハードウェアデバイス/APIおよびオンラインサービスを接続するためのツールです。ウェブ上で、フローチャートのように直感的にプログラムをつくることができます。そして、最終的に自分が欲しい仕組みを作り上げるというものです。&lt;/p&gt;

&lt;p&gt;Node-REDを使うには大まかに2パターンあります。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;自分のPC上でローカルで動かす（今回はこちらで進めていきます）&lt;/li&gt;
&lt;li&gt;外部のサービスを利用する（IBMクラウドやenebularなど）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;導入方法は、&lt;a href=&#34;https://qiita.com/minwinmin/private/6c13d2c912d0d7e8e197&#34;&gt;こちら&lt;/a&gt;で説明していますので参考にしてください。&lt;/p&gt;

&lt;p&gt;また、後ほどNode-REDにフローのコードを貼り付ける必要があるので簡単に貼り付け方法を説明します。&lt;/p&gt;

&lt;p&gt;まずフローのコードをコピーし、Node-REDを立ち上げたら右上のメニュー（3本線）をクリックします。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/187/10.png&#34; alt=&#34;10&#34;&gt;

&lt;/center&gt;

すると上記のような画面があらわれます。「読み込み」をクリックして、あらわれた画面にコピーしたコードを貼り付ければ完了です。&lt;/p&gt;

&lt;h3 id=&#34;mqttとは&#34;&gt;MQTTとは&lt;/h3&gt;

&lt;p&gt;MQTTとは、&lt;strong&gt;多数のデバイスの間で短いメッセージを頻繁に送受信する&lt;/strong&gt;ことを想定した通信プロトコルです。つまりインフラのようなもの、もしくはメッセージを送受信するので土管のようなものをイメージすると良いかと思います。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/187/3.png&#34; alt=&#34;3&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;MQTTは先ほど説明したような仕組みの名前です。なので、実際にメッセージを送受信するためにはMQTTブローカーが必要です。イメージは下記の画像のようになります。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/187/4.png&#34; alt=&#34;4&#34;&gt;

&lt;/center&gt;

MQTTブローカーを用意するには、いくつか方法があります（&lt;a href=&#34;http://acro-engineer.hatenablog.com/entry/2015/06/19/120000&#34;&gt;こちらのサイト&lt;/a&gt;にまとめられています）。今回、ハンズオンでつかったの以下の2パターンです。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ローカルホストでMQTTブローカーをたてる&lt;/strong&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/mcollina/mosca&#34;&gt;Mosca&lt;/a&gt;を利用する -&amp;gt; MQTT brokerのためのライブラリ（IBMクラウドのような外部サービスでNode-REDを使う場合、うまくいきませんでした）&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://test.mosquitto.org/&#34;&gt;mosquitto&lt;/a&gt;のテストサーバーを利用する&lt;/strong&gt;

&lt;ul&gt;
&lt;li&gt;これから記載するプログラムはこちらを使っています。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;node-redのフローのコード&#34;&gt;Node-REDのフローのコード&lt;/h3&gt;

&lt;p&gt;下記のNode-REDのフローのコードを、Node-REDにコピーして使いましょう。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[
    {
        &amp;quot;id&amp;quot;: &amp;quot;7878093f.d68778&amp;quot;,
        &amp;quot;type&amp;quot;: &amp;quot;debug&amp;quot;,
        &amp;quot;z&amp;quot;: &amp;quot;782bda22.769d84&amp;quot;,
        &amp;quot;name&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;active&amp;quot;: true,
        &amp;quot;tosidebar&amp;quot;: true,
        &amp;quot;console&amp;quot;: false,
        &amp;quot;tostatus&amp;quot;: false,
        &amp;quot;complete&amp;quot;: &amp;quot;payload&amp;quot;,
        &amp;quot;x&amp;quot;: 522.0130081176758,
        &amp;quot;y&amp;quot;: 161.99999809265137,
        &amp;quot;wires&amp;quot;: []
    },
    {
        &amp;quot;id&amp;quot;: &amp;quot;22ca4d97.8e3382&amp;quot;,
        &amp;quot;type&amp;quot;: &amp;quot;inject&amp;quot;,
        &amp;quot;z&amp;quot;: &amp;quot;782bda22.769d84&amp;quot;,
        &amp;quot;name&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;topic&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;payload&amp;quot;: &amp;quot;{\&amp;quot;motor\&amp;quot;:1}&amp;quot;,
        &amp;quot;payloadType&amp;quot;: &amp;quot;json&amp;quot;,
        &amp;quot;repeat&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;crontab&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;once&amp;quot;: false,
        &amp;quot;onceDelay&amp;quot;: 0.1,
        &amp;quot;x&amp;quot;: 220.01303100585938,
        &amp;quot;y&amp;quot;: 244.00000190734863,
        &amp;quot;wires&amp;quot;: [
            [
                &amp;quot;6b18ace.785b854&amp;quot;
            ]
        ]
    },
    {
        &amp;quot;id&amp;quot;: &amp;quot;6b18ace.785b854&amp;quot;,
        &amp;quot;type&amp;quot;: &amp;quot;mqtt out&amp;quot;,
        &amp;quot;z&amp;quot;: &amp;quot;782bda22.769d84&amp;quot;,
        &amp;quot;name&amp;quot;: &amp;quot;/sub/NefryBT/SAMPLE&amp;quot;,
        &amp;quot;topic&amp;quot;: &amp;quot;/sub/NefryBT/SAMPLE&amp;quot;,
        &amp;quot;qos&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;retain&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;broker&amp;quot;: &amp;quot;3890dddf.26f532&amp;quot;,
        &amp;quot;x&amp;quot;: 508.0130386352539,
        &amp;quot;y&amp;quot;: 293.9999957084656,
        &amp;quot;wires&amp;quot;: []
    },
    {
        &amp;quot;id&amp;quot;: &amp;quot;e0581ff4.bce8a&amp;quot;,
        &amp;quot;type&amp;quot;: &amp;quot;inject&amp;quot;,
        &amp;quot;z&amp;quot;: &amp;quot;782bda22.769d84&amp;quot;,
        &amp;quot;name&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;topic&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;payload&amp;quot;: &amp;quot;{\&amp;quot;motor\&amp;quot;:0}&amp;quot;,
        &amp;quot;payloadType&amp;quot;: &amp;quot;json&amp;quot;,
        &amp;quot;repeat&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;crontab&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;once&amp;quot;: false,
        &amp;quot;onceDelay&amp;quot;: 0.1,
        &amp;quot;x&amp;quot;: 220.01303100585938,
        &amp;quot;y&amp;quot;: 344.00000190734863,
        &amp;quot;wires&amp;quot;: [
            [
                &amp;quot;6b18ace.785b854&amp;quot;
            ]
        ]
    },
    {
        &amp;quot;id&amp;quot;: &amp;quot;3dccf617.5970da&amp;quot;,
        &amp;quot;type&amp;quot;: &amp;quot;mqtt in&amp;quot;,
        &amp;quot;z&amp;quot;: &amp;quot;782bda22.769d84&amp;quot;,
        &amp;quot;name&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;topic&amp;quot;: &amp;quot;/sub/NefryBT/SAMPLE&amp;quot;,
        &amp;quot;qos&amp;quot;: &amp;quot;2&amp;quot;,
        &amp;quot;broker&amp;quot;: &amp;quot;cd2e6f9.ab8069&amp;quot;,
        &amp;quot;x&amp;quot;: 235.09634399414062,
        &amp;quot;y&amp;quot;: 159.3697967529297,
        &amp;quot;wires&amp;quot;: [
            [
                &amp;quot;7878093f.d68778&amp;quot;
            ]
        ]
    },
    {
        &amp;quot;id&amp;quot;: &amp;quot;f5c8b0fb.93d8&amp;quot;,
        &amp;quot;type&amp;quot;: &amp;quot;comment&amp;quot;,
        &amp;quot;z&amp;quot;: &amp;quot;782bda22.769d84&amp;quot;,
        &amp;quot;name&amp;quot;: &amp;quot;Node-RED上に文字列表示&amp;quot;,
        &amp;quot;info&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;x&amp;quot;: 237.09635162353516,
        &amp;quot;y&amp;quot;: 114.08594131469727,
        &amp;quot;wires&amp;quot;: []
    },
    {
        &amp;quot;id&amp;quot;: &amp;quot;47872155.bfb16&amp;quot;,
        &amp;quot;type&amp;quot;: &amp;quot;comment&amp;quot;,
        &amp;quot;z&amp;quot;: &amp;quot;782bda22.769d84&amp;quot;,
        &amp;quot;name&amp;quot;: &amp;quot;MQTTブローカー側に文字列を送信&amp;quot;,
        &amp;quot;info&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;x&amp;quot;: 265.0130310058594,
        &amp;quot;y&amp;quot;: 206.0104217529297,
        &amp;quot;wires&amp;quot;: []
    },
    {
        &amp;quot;id&amp;quot;: &amp;quot;d5a5e79d.ec27a8&amp;quot;,
        &amp;quot;type&amp;quot;: &amp;quot;comment&amp;quot;,
        &amp;quot;z&amp;quot;: &amp;quot;782bda22.769d84&amp;quot;,
        &amp;quot;name&amp;quot;: &amp;quot;MQTTブローカー側に文字列を送信するためのフロー&amp;quot;,
        &amp;quot;info&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;x&amp;quot;: 609.0130004882812,
        &amp;quot;y&amp;quot;: 257.0104160308838,
        &amp;quot;wires&amp;quot;: []
    },
    {
        &amp;quot;id&amp;quot;: &amp;quot;3700aeb9.5a7ec2&amp;quot;,
        &amp;quot;type&amp;quot;: &amp;quot;comment&amp;quot;,
        &amp;quot;z&amp;quot;: &amp;quot;782bda22.769d84&amp;quot;,
        &amp;quot;name&amp;quot;: &amp;quot;ｍosquittoのテストサーバーを利用&amp;quot;,
        &amp;quot;info&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;x&amp;quot;: 265.0130310058594,
        &amp;quot;y&amp;quot;: 52.010416984558105,
        &amp;quot;wires&amp;quot;: []
    },
    {
        &amp;quot;id&amp;quot;: &amp;quot;3890dddf.26f532&amp;quot;,
        &amp;quot;type&amp;quot;: &amp;quot;mqtt-broker&amp;quot;,
        &amp;quot;z&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;name&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;broker&amp;quot;: &amp;quot;http://test.mosquitto.org/&amp;quot;,
        &amp;quot;port&amp;quot;: &amp;quot;1883&amp;quot;,
        &amp;quot;clientid&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;usetls&amp;quot;: false,
        &amp;quot;compatmode&amp;quot;: true,
        &amp;quot;keepalive&amp;quot;: &amp;quot;60&amp;quot;,
        &amp;quot;cleansession&amp;quot;: true,
        &amp;quot;birthTopic&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;birthQos&amp;quot;: &amp;quot;0&amp;quot;,
        &amp;quot;birthPayload&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;closeTopic&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;closeQos&amp;quot;: &amp;quot;0&amp;quot;,
        &amp;quot;closePayload&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;willTopic&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;willQos&amp;quot;: &amp;quot;0&amp;quot;,
        &amp;quot;willPayload&amp;quot;: &amp;quot;&amp;quot;
    },
    {
        &amp;quot;id&amp;quot;: &amp;quot;cd2e6f9.ab8069&amp;quot;,
        &amp;quot;type&amp;quot;: &amp;quot;mqtt-broker&amp;quot;,
        &amp;quot;z&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;name&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;broker&amp;quot;: &amp;quot;http://test.mosquitto.org/&amp;quot;,
        &amp;quot;port&amp;quot;: &amp;quot;1883&amp;quot;,
        &amp;quot;clientid&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;usetls&amp;quot;: false,
        &amp;quot;compatmode&amp;quot;: true,
        &amp;quot;keepalive&amp;quot;: &amp;quot;60&amp;quot;,
        &amp;quot;cleansession&amp;quot;: true,
        &amp;quot;birthTopic&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;birthQos&amp;quot;: &amp;quot;0&amp;quot;,
        &amp;quot;birthPayload&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;closeTopic&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;closeQos&amp;quot;: &amp;quot;0&amp;quot;,
        &amp;quot;closePayload&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;willTopic&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;willQos&amp;quot;: &amp;quot;0&amp;quot;,
        &amp;quot;willPayload&amp;quot;: &amp;quot;&amp;quot;
    }
]
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;nefry-btのプログラム&#34;&gt;Nefry BTのプログラム&lt;/h3&gt;

&lt;p&gt;下記がNefry BT側のプログラムになります。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;//Nefryがwifiにつながっているか確認、2.4Ghzにつなごう
//できたtest.mosquitto.orgで使える！
#include &amp;lt;Nefry.h&amp;gt;
#include &amp;lt;WiFiClient.h&amp;gt;
#include &amp;lt;PubSubClient.h&amp;gt;
#include &amp;lt;ArduinoJson.h&amp;gt;
#include&amp;quot;esp32-hal-ledc.h&amp;quot;
#define URL &amp;quot;mosquitto.org&amp;quot;

#define PWM_BITWIDTH 16

int deg2pw(int deg, int bit){
    double ms = ((double) deg - 90.0) * 0.95 / 90.0 + 1.45;
    return (int) (ms / 20.0 * pow(2, bit));
}

IPAddress endpoint;
const int port = 1883;

const char *pubTopic;
const char *subTopic;
const char *deviceName;
const char *mqtt_server = &amp;quot;test.mosquitto.org&amp;quot;;

WiFiClient httpsClient;
PubSubClient mqttClient(httpsClient);



void setup() {
  ledcSetup(0,50,PWM_BITWIDTH);
  ledcAttachPin(A2,0);

  //// NefryBT設定画面まわり ////////////////////////////////////////

  // NefryBT
  pubTopic = &amp;quot;/pub/NefryBT/SAMPLE&amp;quot;;
  subTopic = &amp;quot;/sub/NefryBT/SAMPLE&amp;quot;;
  deviceName = &amp;quot;NefryBT_SAMPLE&amp;quot;;  // 複数台で利用する場合は必ずかぶらないように変更する
  // ローカルホストでMQTTブローカーを立てている場合は、パソコンのIPAddress型に収納。配列っぽく入れる。ここはその都度確認すること
  //endpoint指定部
  endpoint[0] = 192;
  endpoint[1] = 168;
  endpoint[2] = 43;
  endpoint[3] = 105;

  //// 以下通常処理 ////////////////////////////////////////

  Serial.begin(115200);
  //mqttClient.setServer()関数でMQTTブローカーを指定する
  mqttClient.setServer(mqtt_server, port);
  mqttClient.setCallback(mqttCallback);

  connectMQTT();
}

//MQTTがちゃんと動いているか、つながっているかを判断  
void connectMQTT() {
    Serial.println(&amp;quot;connectMQTT&amp;quot;);
    Serial.println(deviceName);
    while (!mqttClient.connected()) {
      Serial.print(&amp;quot;.&amp;quot;);
        if (mqttClient.connect(deviceName)) {
            Serial.println(&amp;quot;Connected.&amp;quot;);
            int qos = 0;
            mqttClient.subscribe(subTopic, qos);
            Serial.println(&amp;quot;Subscribed.&amp;quot;);
        } else {
            Serial.print(&amp;quot;Failed. Error state=&amp;quot;);
            Serial.print(mqttClient.state());
            // Wait 5 seconds before retrying
            delay(5000);
        }
    }
}
///////////////////////////////////////////////////////

char pubMessage[128];

void mqttCallback (char* topic, byte* payload, unsigned int length) {

    String str = &amp;quot;&amp;quot;;
    Serial.print(&amp;quot;Received. topic=&amp;quot;);
    Serial.println(topic);
    for (int i = 0; i &amp;lt; length; i++) {
        Serial.print((char)payload[i]);
        str += (char)payload[i];
    }
    Serial.print(&amp;quot;\n&amp;quot;);

    StaticJsonBuffer&amp;lt;200&amp;gt; jsonBuffer;

    JsonObject&amp;amp; root = jsonBuffer.parseObject(str);

    // 読み取った文字列をパース
    if (!root.success()) {
      Serial.println(&amp;quot;parseObject() failed&amp;quot;);
      return;
    }
//Node-REDから文字列を読み取ってくる部分//////
    const char* message = root[&amp;quot;message&amp;quot;];
    int motor = root[&amp;quot;motor&amp;quot;];
////////////////////////////////////////////
    Serial.print(&amp;quot;motor = &amp;quot;);
    Serial.println(motor);
///サーボモータを動かす処理//////////////////
    if( motor == 1 ){
       for(int i=90; i&amp;lt;=115; i++){
          ledcWrite(0,deg2pw(i, PWM_BITWIDTH));
       }
       delay(800);
       ledcWrite(0,deg2pw(90, PWM_BITWIDTH));
    } else {
       for(int i=90; i&amp;gt;=65; --i){//0～180°の位置で考える、90度が基準点としてそこからどう動くかを考える
          ledcWrite(0,deg2pw(i, PWM_BITWIDTH));
       }
       delay(800);
       ledcWrite(0,deg2pw(90, PWM_BITWIDTH));
    }

    Nefry.ndelay(1000);

}
//////////////////////////////////////////////

//mqttを動かしている部分///////////////////////  
void mqttLoop() {
    if (!mqttClient.connected()) {
        connectMQTT();
    }
    mqttClient.loop();
}

void loop() {
  mqttLoop();
 }
//////////////////////////////////////////////

&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;動作させてみると&#34;&gt;動作させてみると……&lt;/h3&gt;

&lt;p&gt;このように、PC上から遠隔でサーボモータを制御できるようになります。
&lt;img src=&#34;https://dotstud.io/img/blog/187/5.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;node-red-mqttでサーボモータをui-ブラウザ-から制御&#34;&gt;Node-RED×MQTTでサーボモータをUI（ブラウザ）から制御&lt;/h2&gt;

&lt;p&gt;先ほどのプログラムはNode-RED上のボタンを押すとある角度回転するというものでした。次はそれを発展させて、&lt;strong&gt;ブラウザから操作して角度を遠隔で制御&lt;/strong&gt;してみます。&lt;/p&gt;

&lt;p&gt;ハンズオンでは、製作途中にタイムアップしてしまいました。少し難易度高めです。&lt;/p&gt;

&lt;h3 id=&#34;node-redのフローのコード-1&#34;&gt;Node-REDのフローのコード&lt;/h3&gt;

&lt;p&gt;下記のNode-REDのフローのコードをNode-REDにコピーして使いましょう。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[
    {
        &amp;quot;id&amp;quot;: &amp;quot;f2dc1b0b.520f98&amp;quot;,
        &amp;quot;type&amp;quot;: &amp;quot;mqtt out&amp;quot;,
        &amp;quot;z&amp;quot;: &amp;quot;fab71764.66ef78&amp;quot;,
        &amp;quot;name&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;topic&amp;quot;: &amp;quot;servo/pan&amp;quot;,
        &amp;quot;qos&amp;quot;: &amp;quot;1&amp;quot;,
        &amp;quot;retain&amp;quot;: &amp;quot;false&amp;quot;,
        &amp;quot;broker&amp;quot;: &amp;quot;954b988c.ec1e08&amp;quot;,
        &amp;quot;x&amp;quot;: 520,
        &amp;quot;y&amp;quot;: 400,
        &amp;quot;wires&amp;quot;: []
    },
    {
        &amp;quot;id&amp;quot;: &amp;quot;954b988c.ec1e08&amp;quot;,
        &amp;quot;type&amp;quot;: &amp;quot;mqtt-broker&amp;quot;,
        &amp;quot;z&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;name&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;broker&amp;quot;: &amp;quot;https://test.mosquitto.org/&amp;quot;,
        &amp;quot;port&amp;quot;: &amp;quot;1883&amp;quot;,
        &amp;quot;clientid&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;usetls&amp;quot;: false,
        &amp;quot;compatmode&amp;quot;: true,
        &amp;quot;keepalive&amp;quot;: &amp;quot;60&amp;quot;,
        &amp;quot;cleansession&amp;quot;: true,
        &amp;quot;birthTopic&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;birthQos&amp;quot;: &amp;quot;0&amp;quot;,
        &amp;quot;birthPayload&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;closeTopic&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;closePayload&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;willTopic&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;willQos&amp;quot;: &amp;quot;0&amp;quot;,
        &amp;quot;willPayload&amp;quot;: &amp;quot;&amp;quot;
    }
]
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;nefry-btのプログラム-1&#34;&gt;Nefry BTのプログラム&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;
#include &amp;lt;Nefry.h&amp;gt;
#include &amp;lt;WiFiClient.h&amp;gt;
#include &amp;lt;PubSubClient.h&amp;gt;
#include &amp;lt;ArduinoJson.h&amp;gt;
//esp32でPWMを使えるようにするためのライブラリー//
#include&amp;quot;esp32-hal-ledc.h&amp;quot;
//////////////////////////////////////////////

//分解能//////////////////////////////////////
#define PWM_BITWIDTH 16
//////////////////////////////////////////////

//PWM制御：周波数-&amp;gt;角度に変換(プログラムするときにわかりやすい)//
int deg2pw(int deg, int bit){
    double ms = ((double) deg - 90.0) * 0.95 / 90.0 + 1.45;
    return (int) (ms / 20.0 * pow(2, bit));
}
////////////////////////////////////////////////////////////


IPAddress endpoint;
const int port = 1883;

const char *pubTopic;
const char *subTopic;
const char *deviceName;
const char *mqtt_server = &amp;quot;test.mosquitto.org&amp;quot;;

WiFiClient httpsClient;
PubSubClient mqttClient(httpsClient);



void setup() {
  ledcSetup(0,50,PWM_BITWIDTH);
  ledcAttachPin(A1,0);

  //// NefryBT設定 ////////////////////////////////////////

  // NefryBT
  pubTopic = &amp;quot;/pub/NefryBT/SAMPLE&amp;quot;;
  subTopic = &amp;quot;/sub/NefryBT/SAMPLE&amp;quot;;
  deviceName = &amp;quot;NefryBT_SAMPLE&amp;quot;;  // 複数台で利用する場合は必ずかぶらないように変更する
  // ローカルホストならパソコンのIPAddress型に収納。配列っぽく入れる。ここはその都度確認すること
  //mosquittoのテストサーバーを使うときは下記のednpointは気にしなくて大丈夫です
  endpoint[0] = 192;
  endpoint[1] = 168;
  endpoint[2] = 1;
  endpoint[3] = 1;

  ////////////////////////////////////////////

  Serial.begin(115200);

  mqttClient.setServer(mqtt_server, port);
  mqttClient.setCallback(mqttCallback);

  connectMQTT();
}

void connectMQTT() {
    Serial.println(&amp;quot;connectMQTT&amp;quot;);
    Serial.println(deviceName);
    while (!mqttClient.connected()) {
      Serial.print(&amp;quot;.&amp;quot;);
        if (mqttClient.connect(deviceName)) {
            Serial.println(&amp;quot;Connected.&amp;quot;);
            int qos = 0;
            mqttClient.subscribe(subTopic, qos);
            Serial.println(&amp;quot;Subscribed.&amp;quot;);
        } else {
            Serial.print(&amp;quot;Failed. Error state=&amp;quot;);
            Serial.print(mqttClient.state());
            // Wait 5 seconds before retrying
            delay(5000);
        }
    }
}

char pubMessage[128];

void mqttCallback (char* topic, byte* payload, unsigned int length) {

    String str = &amp;quot;&amp;quot;;
    Serial.print(&amp;quot;Received. topic=&amp;quot;);
    Serial.println(topic);
    for (int i = 0; i &amp;lt; length; i++) {
        Serial.print((char)payload[i]);
        str += (char)payload[i];
    }
    Serial.print(&amp;quot;\n&amp;quot;);

    StaticJsonBuffer&amp;lt;200&amp;gt; jsonBuffer;

    JsonObject&amp;amp; root = jsonBuffer.parseObject(str);

    // パースが成功かどうか判断
    if (!root.success()) {
      Serial.println(&amp;quot;parseObject() failed&amp;quot;);
      return;
    }

    const char* message = root[&amp;quot;message&amp;quot;];
    int takudooon = root[&amp;quot;takudooon&amp;quot;];

    Serial.print(&amp;quot;takudooon = &amp;quot;);
    Serial.println(takudooon);

    if( takudooon == 1 ){
       for(int i=90; i&amp;lt;=115; i++){
          ledcWrite(0,deg2pw(i, PWM_BITWIDTH));
       }
       delay(800);
       ledcWrite(0,deg2pw(90, PWM_BITWIDTH));
    } else {
       for(int i=90; i&amp;gt;=65; --i){//0～180°の位置で考える、90度が基準点としてそこからどう動くかを考える
          ledcWrite(0,deg2pw(i, PWM_BITWIDTH));
       }
       delay(800);
       ledcWrite(0,deg2pw(90, PWM_BITWIDTH));
    }

    Nefry.ndelay(1000);

}

void mqttLoop() {
    if (!mqttClient.connected()) {
        connectMQTT();
    }
    mqttClient.loop();
}

void loop() {
  mqttLoop();
 }

&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;操作画面を用意&#34;&gt;操作画面を用意&lt;/h3&gt;

&lt;p&gt;それぞれのプログラムが準備できたら、Node-REDの画面から、




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/187/6.png&#34; alt=&#34;6&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;URLの「&lt;code&gt;http://localhost:1880&lt;/code&gt;」を「&lt;code&gt;http://localhost:1880/ui&lt;/code&gt;」と記述すると以下のような操作画面があらわれます。ここから、直感的にサーボモータの角度を遠隔制御できるようになります。&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/187/7.png&#34; alt=&#34;7&#34;&gt;

&lt;/center&gt;


&lt;h3 id=&#34;実際に動かすと&#34;&gt;実際に動かすと……&lt;/h3&gt;

&lt;p&gt;このようになります。
&lt;img src=&#34;https://dotstud.io/img/blog/187/8.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;おわりに&#34;&gt;おわりに&lt;/h2&gt;

&lt;p&gt;いろいろな技術を知ることでモノづくりの幅が増え、作ってみたいものを自由に作れるようになってもらえればな、と思います。&lt;/p&gt;

&lt;p&gt;では！&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ClovaとNefryBT（ESP32）を連携させてみよう</title>
      <link>https://dotstud.io/blog/clova-ifttt-nefrybt-arduino/</link>
      <pubDate>Tue, 10 Jul 2018 10:00:00 +0900</pubDate>
      
      <guid>https://dotstud.io/blog/clova-ifttt-nefrybt-arduino/</guid>
      
      <description>

&lt;p&gt;こんにちは、代表の&lt;a href=&#34;https://twitter.com/n0bisuke&#34;&gt;n0bisuke&lt;/a&gt;です。&lt;/p&gt;

&lt;p&gt;LINEのスマートスピーカーClova（正式にはAIアシスタントの名前）が&lt;a href=&#34;http://clova-blog.line.me/ja/archives/7990256.html&#34;&gt;IFTTTに対応&lt;/a&gt;したのでNefry BT（ESP32）と連携してみました。（実は結構前から対応してたんだけど試せてなかった）&lt;/p&gt;

&lt;p&gt;先日作った勤怠システムについては以下の記事をご参照ください。&lt;/p&gt;



&lt;section class=&#34;link&#34; id=&#34;183&#34;&gt;
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
          &lt;div class=&#34;link_content&#34;&gt;
          &lt;a href=&#34;https://dotstud.io/blog/keyboard-kintai-system-diy/&#34;&gt;&lt;/a&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/183/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
          &lt;/div&gt;
          &lt;div class=&#34;link_content&#34;&gt;
            &lt;div class=&#34;link_detail&#34;&gt;
              &lt;div class=&#34;link_title&#34;&gt;
                NefryBTとキーボードで作る簡易勤怠管理システム
              &lt;/div&gt;
              &lt;div class=&#34;link_date&#34;&gt;
                
                2018-07-05
              &lt;/div&gt;
              &lt;div class=&#34;link_desc&#34;&gt;
                今日はとある電子工作向けキーパッドを手に入れたのでNefry BTで使ってみて勤怠管理システムを作ってみた話です。
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/section&gt;
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
&lt;/section&gt;


&lt;p&gt;ちなみにこの勤怠システムは割と運用できてます。今の所は。&lt;/p&gt;

&lt;h2 id=&#34;clovaって&#34;&gt;Clovaって？&lt;/h2&gt;

&lt;p&gt;ClovaはLINEが開発したAIアシスタントです。Clova FriendsやClova Friends mini、Clova Waveなどの対応スマートスピーカー端末が販売されています。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;公式サイト: &lt;a href=&#34;https://clova.line.me/&#34;&gt;https://clova.line.me/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;GoogleのGoogle アシスタント（Google Home）やAmazonのAlexa（Amazon Echo）などと同じ並びの立ち位置という認識で大丈夫です。&lt;/p&gt;

&lt;p&gt;LINEといえばスタンプやキャラクターが特徴的ですが、Clova Friendsに関してもLINEが提供しているということもあり、 &lt;strong&gt;キャラクターをベースにしたデバイスが特徴的です&lt;/strong&gt;。&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/185/1.png&#34; alt=&#34;1&#34;&gt;

  ─ ちなみにこの写真は先日のLINE CONFERENCE 2018で発表があったミニオンズモデル

&lt;/center&gt;


&lt;p&gt;この記事の執筆時点（2018年7月7日）ではまだ開発用SDKは公開されていませんが、IFTTTに対応したというリリースが出ているのでIFTTT経由で色々なサービスと接続することが出来ます。&lt;/p&gt;

&lt;h2 id=&#34;出勤するとclovaがしゃべる&#34;&gt;出勤するとClovaがしゃべる&lt;/h2&gt;

&lt;p&gt;今回作ったものはこんな感じです。&lt;/p&gt;

&lt;p&gt;試してるのはアルバイトの佐々木さんです。ドヤ顔は素です。&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;blockquote class=&#34;instagram-media&#34; data-instgrm-captioned data-instgrm-permalink=&#34;https://www.instagram.com/p/Bk4KrVtl1qU/&#34; data-instgrm-version=&#34;8&#34; style=&#34; background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);&#34;&gt;&lt;div style=&#34;padding:8px;&#34;&gt; &lt;div style=&#34; background:#F8F8F8; line-height:0; margin-top:40px; padding:28.194444444444443% 0; text-align:center; width:100%;&#34;&gt; &lt;div style=&#34; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;&#34;&gt;&lt;/div&gt;&lt;/div&gt; &lt;p style=&#34; margin:8px 0 0 0; padding:0 4px;&#34;&gt; &lt;a href=&#34;https://www.instagram.com/p/Bk4KrVtl1qU/&#34; style=&#34; color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;&#34; target=&#34;\_blank&#34;&gt;Nefryとclovaをつないでみた。 #nefry #clova&lt;/a&gt;&lt;/p&gt; &lt;p style=&#34; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;&#34;&gt;&lt;a href=&#34;https://www.instagram.com/n0bisuke/&#34; style=&#34; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px;&#34; target=&#34;\_blank&#34;&gt; n0bisuke&lt;/a&gt;さん(@n0bisuke)がシェアした投稿 - &lt;time style=&#34; font-family:Arial,sans-serif; font-size:14px; line-height:17px;&#34; datetime=&#34;2018-07-06T05:00:48+00:00&#34;&gt;2018年 7月月5日午後10時00分PDT&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt; &lt;script async defer src=&#34;//www.instagram.com/embed.js&#34;&gt;&lt;/script&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;先日作った勤怠システムと連携してキーパッドのボタンを押して出勤登録するとClovaに通知がいきます。&lt;/p&gt;

&lt;h2 id=&#34;nefry-btとclovaを連携してみよう&#34;&gt;Nefry BTとClovaを連携してみよう&lt;/h2&gt;

&lt;p&gt;IFTTTのWebhookを用いてNefry BTからPOSTリクエストを送り、Clova側に通知させます。&lt;/p&gt;

&lt;p&gt;イメージはこんな感じです。&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/185/2.png&#34; alt=&#34;2&#34;&gt;

&lt;/center&gt;


&lt;h3 id=&#34;iftttでアプレットの登録&#34;&gt;IFTTTでアプレットの登録&lt;/h3&gt;

&lt;p&gt;アプレットとは連携させるサービスとサービスの組み合わせのことを指します。&lt;/p&gt;

&lt;p&gt;IFTTTのユーザー登録などを完了したら&lt;a href=&#34;https://ifttt.com/create&#34;&gt;アプレット作成&lt;/a&gt;のページから新規のアプレットを作成します。&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/185/3.png&#34; alt=&#34;3&#34;&gt;

&lt;/center&gt;


&lt;p&gt;まず&lt;code&gt;this&lt;/code&gt;を押すとトリガーとなるサービスを選択します。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/185/4.gif&#34; alt=&#34;&#34; /&gt;
Webhookを選択しましょう。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/185/5.png&#34; alt=&#34;5&#34;&gt;

&lt;/center&gt;

任意のEvent Nameを指定します。&lt;code&gt;clova_things&lt;/code&gt;としました。&lt;/p&gt;

&lt;p&gt;次に&lt;code&gt;that&lt;/code&gt;を押してアウトプットとなるサービスを選択します。
&lt;img src=&#34;https://dotstud.io/img/blog/185/6.gif&#34; alt=&#34;&#34; /&gt;
clovaを選択しましょう。&lt;/p&gt;

&lt;p&gt;メッセージ内容の箇所に&lt;code&gt;Value1&lt;/code&gt;を指定します。これはNefry BTから受け取る1つ目の値を指します。
&lt;img src=&#34;https://i.gyazo.com/d868fea0c1d1738593a1f82d26ffbde2.png&#34; alt=&#34;&#34; /&gt;
&lt;code&gt;Create action&lt;/code&gt;のボタンを押して次のページで&lt;code&gt;Finish&lt;/code&gt;で完了です。&lt;/p&gt;

&lt;h3 id=&#34;curlで試してみる&#34;&gt;curlで試してみる&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://ifttt.com/services/maker_webhooks/settings&#34;&gt;IFTTTのWebhooksの設定画面&lt;/a&gt;を見てAPI KEYを確認しましょう。&lt;/p&gt;

&lt;p&gt;&lt;code&gt;https://maker.ifttt.com/use/xxxxxxxxx&lt;/code&gt;というURLが表示されていると思いますが、&lt;code&gt;xxxxxxxxx&lt;/code&gt;の箇所がAPI KEYになります。&lt;/p&gt;

&lt;p&gt;curlでは以下のように試せます。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ curl -X POST -H &amp;quot;Content-Type: application/json&amp;quot; -d &#39;{&amp;quot;value1&amp;quot;:&amp;quot;てすと&amp;quot;}&#39; https://maker.ifttt.com/trigger/clova_things/with/key/xxxxxxxxx
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;リクエストするURLはこのような形です。&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;https://maker.ifttt.com/trigger/{{Event Name}}/with/key/{{API KEY}}&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Event Nameは今回の場合は任意の名前として&lt;code&gt;clova_things&lt;/code&gt;としていて、API KEYは&lt;code&gt;xxxxxxxxx&lt;/code&gt;の部分です。&lt;/p&gt;

&lt;h3 id=&#34;nefry-bt側のコード&#34;&gt;Nefry BT側のコード&lt;/h3&gt;

&lt;p&gt;勤怠システムの記事のコードとほぼ同様です。&lt;/p&gt;



&lt;section class=&#34;link&#34; id=&#34;183&#34;&gt;
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
          &lt;div class=&#34;link_content&#34;&gt;
          &lt;a href=&#34;https://dotstud.io/blog/keyboard-kintai-system-diy/&#34;&gt;&lt;/a&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/183/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
          &lt;/div&gt;
          &lt;div class=&#34;link_content&#34;&gt;
            &lt;div class=&#34;link_detail&#34;&gt;
              &lt;div class=&#34;link_title&#34;&gt;
                NefryBTとキーボードで作る簡易勤怠管理システム
              &lt;/div&gt;
              &lt;div class=&#34;link_date&#34;&gt;
                
                2018-07-05
              &lt;/div&gt;
              &lt;div class=&#34;link_desc&#34;&gt;
                今日はとある電子工作向けキーパッドを手に入れたのでNefry BTで使ってみて勤怠管理システムを作ってみた話です。
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/section&gt;
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
&lt;/section&gt;


&lt;p&gt;適宜読み替えてください。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#include &amp;lt;WiFiClientSecure.h&amp;gt;
WiFiClientSecure client;
const int HTTP_PORT = 443;

//途中省略
//・
//・
//・

void iftttClovaPost(String message){
  const char* HOST = &amp;quot;maker.ifttt.com&amp;quot;;

  String url = &amp;quot;/trigger/clova_things/with/key/xxxxxxxxx&amp;quot;;
  url += &amp;quot;?value1=&amp;quot;; //value1にデータを送る
  url += StrPerEncord(escapeParameter(message).c_str()); //勤怠システム記事参照

  Serial.print(&amp;quot;connecting to &amp;quot;);
  Serial.println(HOST);

  if (!client.connect(HOST, HTTP_PORT)) {
    Serial.println(&amp;quot;connection failed&amp;quot;);
    return;
  }

  client.println(&amp;quot;POST &amp;quot; + url + &amp;quot; HTTP/1.1&amp;quot;);
  client.println(&amp;quot;Content-Type: application/json&amp;quot;);
  client.println(&amp;quot;Content-Type: application/x-www-form-urlencoded&amp;quot;);
  client.println(&amp;quot;Host: &amp;quot; + String(HOST));
  client.println(&amp;quot;Connection: close&amp;quot;);
  client.println();

  unsigned long timeout = millis();
  while (client.available() == 0) {    
    if (millis() - timeout &amp;gt; 5000) {
        Serial.println(&amp;quot;&amp;gt;&amp;gt;&amp;gt; Client Timeout !&amp;quot;);
        client.stop();
        return;
    }
  }

  // Read all the lines of the reply from server and print them to Serial
  while(client.available()) {
      String line = client.readStringUntil(&#39;\r&#39;);
      Serial.print(line);
  }

  Serial.println();
  Serial.println(&amp;quot;closing connection&amp;quot;);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;全体コードは&lt;a href=&#34;https://gist.github.com/n0bisuke/d2fab404e5073e936339a6c3442c1e4c#file-kintai-ino-L94-L133&#34;&gt;こちら&lt;/a&gt;です。&lt;/p&gt;

&lt;h2 id=&#34;試し方と使う際の注意点&#34;&gt;試し方と使う際の注意点&lt;/h2&gt;

&lt;p&gt;さて完成したら試してみます。&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;blockquote class=&#34;instagram-media&#34; data-instgrm-captioned data-instgrm-permalink=&#34;https://www.instagram.com/p/Bk4KrVtl1qU/&#34; data-instgrm-version=&#34;8&#34; style=&#34; background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);&#34;&gt;&lt;div style=&#34;padding:8px;&#34;&gt; &lt;div style=&#34; background:#F8F8F8; line-height:0; margin-top:40px; padding:28.194444444444443% 0; text-align:center; width:100%;&#34;&gt; &lt;div style=&#34; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;&#34;&gt;&lt;/div&gt;&lt;/div&gt; &lt;p style=&#34; margin:8px 0 0 0; padding:0 4px;&#34;&gt; &lt;a href=&#34;https://www.instagram.com/p/Bk4KrVtl1qU/&#34; style=&#34; color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;&#34; target=\_blank&#34;&gt;Nefryとclovaをつないでみた。 #nefry #clova&lt;/a&gt;&lt;/p&gt; &lt;p style=&#34; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;&#34;&gt;&lt;a href=&#34;https://www.instagram.com/n0bisuke/&#34; style=&#34; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px;&#34; target=&#34;\_blank&#34;&gt; n0bisuke&lt;/a&gt;さん(@n0bisuke)がシェアした投稿 - &lt;time style=&#34; font-family:Arial,sans-serif; font-size:14px; line-height:17px;&#34; datetime=&#34;2018-07-06T05:00:48+00:00&#34;&gt;2018年 7月月5日午後10時00分PDT&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt; &lt;script async defer src=&#34;//www.instagram.com/embed.js&#34;&gt;&lt;/script&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;キーパッドを押すとClovaに通知がいき、&lt;strong&gt;「通知を読み上げて」&lt;/strong&gt;とClovaに話かけてあげると読み上げてくれます。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;はじめはWebhooksで通知するとそのままClovaが喋ってくれると思ったのですがそうではないので注意です。&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;ja&#34;&gt;&lt;p lang=&#34;ja&#34; dir=&#34;ltr&#34;&gt;clovaのifttt試してみてるけどぜんぜん喋ってくれない… なんだろう&lt;/p&gt; のびすけ / sugawara (@n0bisuke) &lt;a href=&#34;https://twitter.com/n0bisuke/status/1015057186026737664?ref_src=twsrc%5Etfw&#34;&gt;2018年7月6日&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;通知が来た時点で何も喋ってくれないのは分かりにくいですね。現時点だと「通知を読み上げて」と言わないと読み上げてくれないので注意ですね。&lt;/p&gt;

&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;

&lt;p&gt;Nefry BTをClovaを繋げることが出来ました。&lt;/p&gt;

&lt;p&gt;IFTTTに繋がると実質何とでも繋げられるので嬉しいですね。&lt;/p&gt;

&lt;p&gt;人間が「通知を読み上げて」と言わなくても喋ってくれるように機能追加してくれることに期待です。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>NefryBTとキーボードで作る簡易勤怠管理システム</title>
      <link>https://dotstud.io/blog/keyboard-kintai-system-diy/</link>
      <pubDate>Thu, 05 Jul 2018 10:00:00 +0900</pubDate>
      
      <guid>https://dotstud.io/blog/keyboard-kintai-system-diy/</guid>
      
      <description>

&lt;p&gt;こんにちは、代表の&lt;a href=&#34;https://dotstud.io/members/n0bisuke&#34;&gt;n0bisuke&lt;/a&gt;です。&lt;/p&gt;

&lt;p&gt;今日はとある電子工作向けキーパッドを手に入れたので、&lt;strong&gt;Nefry BTで簡易的な勤怠管理システム&lt;/strong&gt;を作ってみました。ちなみにオチとかないです。&lt;/p&gt;

&lt;h2 id=&#34;使うもの&#34;&gt;使うもの&lt;/h2&gt;

&lt;h3 id=&#34;マトリックスフィルムボタンキーボード-メンブレン式キーボード-4-4&#34;&gt;マトリックスフィルムボタンキーボード メンブレン式キーボード 4*4&lt;/h3&gt;

&lt;p&gt;HiLetgoというストアから出品されています。眺めていて使ってみたいなぁという欲求が湧いたのでポチりました。&lt;/p&gt;

&lt;p&gt;ちなみに5個セットなので、あと4個なにか作れます。&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;iframe style=&#34;width:120px;height:240px;&#34; marginwidth=&#34;0&#34; marginheight=&#34;0&#34; scrolling=&#34;no&#34; frameborder=&#34;0&#34; src=&#34;//rcm-fe.amazon-adsystem.com/e/cm?lt1=\å_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=n0bisuke-22&amp;o=9&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B010Q17I8E&amp;linkId=9116436de3640fbe22f359a3eb280f43&#34;&gt;&lt;/iframe&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;h2 id=&#34;arduino-unoで動かしてみる&#34;&gt;Arduino Unoで動かしてみる&lt;/h2&gt;

&lt;p&gt;AmazonのページにはArduino対応と書いているのでどうやら使えるらしい。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://techtutorialsx.com/2017/03/18/esp8266-interfacing-with-a-4x4-matrix-keypad/&#34;&gt;ESP8266: Interfacing with a 4×4 Matrix Keypad
&lt;/a&gt;という記事があったので参考にArduinoで動かしてみました。&lt;/p&gt;

&lt;h3 id=&#34;配線&#34;&gt;配線&lt;/h3&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/3c3b4883c69f25b562906e38f853beb4.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Arduino Unoとあとで紹介するNefry BTでの配線はこんな感じです。&lt;/p&gt;

&lt;h3 id=&#34;プログラム&#34;&gt;プログラム&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;Chris--A/Keypad&#34;&gt;こちらのライブラリ&lt;/a&gt;をインストールしましょう。&lt;/p&gt;

&lt;p&gt;ライブラリマネージャからもインストールできます。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/d1d90cb4712729faac8272bcf3274767.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#include &amp;lt;Keypad.h&amp;gt;

const byte n_rows = 4;
const byte n_cols = 4;

char keys[n_rows][n_cols] = {
  {&#39;1&#39;,&#39;2&#39;,&#39;3&#39;,&#39;A&#39;},
  {&#39;4&#39;,&#39;5&#39;,&#39;6&#39;,&#39;B&#39;},
  {&#39;7&#39;,&#39;8&#39;,&#39;9&#39;,&#39;C&#39;},
  {&#39;*&#39;,&#39;0&#39;,&#39;#&#39;,&#39;D&#39;}
};

byte colPins[n_rows] = {3, 2, 1, 0};
byte rowPins[n_cols] = {7, 6, 5, 4};

Keypad myKeypad = Keypad( makeKeymap(keys), rowPins, colPins, n_rows, n_cols);

void setup(){
  Serial.begin(115200);
}

void loop(){
  char myKey = myKeypad.getKey();

  if (myKey != NULL){
    Serial.print(&amp;quot;Key pressed: &amp;quot;);
    Serial.println(myKey);
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;実行&#34;&gt;実行&lt;/h3&gt;

&lt;p&gt;&lt;blockquote class=&#34;instagram-media&#34; data-instgrm-captioned data-instgrm-permalink=&#34;https://www.instagram.com/p/BkzAcUMB-3K/&#34; data-instgrm-version=&#34;8&#34; style=&#34; background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);&#34;&gt;&lt;div style=&#34;padding:8px;&#34;&gt; &lt;div style=&#34; background:#F8F8F8; line-height:0; margin-top:40px; padding:28.194444444444443% 0; text-align:center; width:100%;&#34;&gt; &lt;div style=&#34; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;&#34;&gt;&lt;/div&gt;&lt;/div&gt; &lt;p style=&#34; margin:8px 0 0 0; padding:0 4px;&#34;&gt; &lt;a href=&#34;https://www.instagram.com/p/BkzAcUMB-3K/&#34; style=&#34; color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;&#34; target=&#34;_blank&#34;&gt;電子工作用のキーボード使ってみたけどハマることなく試せた 勤怠記録とかオフィスハックの何かに使いたい #dotstudio&lt;/a&gt;&lt;/p&gt; &lt;p style=&#34; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;&#34;&gt;&lt;a href=&#34;https://www.instagram.com/n0bisuke/&#34; style=&#34; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px;&#34; target=&#34;_blank&#34;&gt; n0bisuke&lt;/a&gt;さん(@n0bisuke)がシェアした投稿 - &lt;time style=&#34; font-family:Arial,sans-serif; font-size:14px; line-height:17px;&#34; datetime=&#34;2018-07-04T04:53:24+00:00&#34;&gt;2018年 7月月3日午後9時53分PDT&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt; &lt;script async defer src=&#34;//www.instagram.com/embed.js&#34;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;h2 id=&#34;nefry-btで動作させて勤怠システムに&#34;&gt;Nefry BTで動作させて勤怠システムに&lt;/h2&gt;

&lt;p&gt;出退勤の記録を付ける電子工作は、&lt;strong&gt;今まで何度か作りはしたものの導入まで至っていなかった&lt;/strong&gt;です。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;作り込もうとして力を入れすぎて力尽きる問題&lt;/strong&gt;が大きいと思っています。&lt;/p&gt;

&lt;p&gt;ということで&lt;u&gt;実装がシンプルな勤怠システムをとりあえず導入&lt;/u&gt;してみました。&lt;/p&gt;

&lt;h3 id=&#34;ボタン入力式&#34;&gt;ボタン入力式&lt;/h3&gt;

&lt;p&gt;仕様は&lt;strong&gt;数字を押して選択し、Aボタンで出勤記録、Bボタンで退勤記録&lt;/strong&gt;です。&lt;/p&gt;

&lt;p&gt;ディスプレイには登録している名前が出ます。&lt;/p&gt;

&lt;p&gt;多分そのうちSuica連携とかBLEデバイス連携とか指紋とか声門とかそういうのも試してみる気はするのですが、 &lt;strong&gt;ボタン入力とHTTP通信だけの実装のシンプルさ&lt;/strong&gt;がとりあえず始めるには重要な気がしました。&lt;/p&gt;

&lt;p&gt;制作時間1時間程度。HTTP POST周りで少し手こずってました。&lt;/p&gt;

&lt;p&gt;&lt;blockquote class=&#34;instagram-media&#34; data-instgrm-captioned data-instgrm-permalink=&#34;https://www.instagram.com/p/Bkz8a0ihnYF/&#34; data-instgrm-version=&#34;8&#34; style=&#34; background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);&#34;&gt;&lt;div style=&#34;padding:8px;&#34;&gt; &lt;div style=&#34; background:#F8F8F8; line-height:0; margin-top:40px; padding:28.194444444444443% 0; text-align:center; width:100%;&#34;&gt; &lt;div style=&#34; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;&#34;&gt;&lt;/div&gt;&lt;/div&gt; &lt;p style=&#34; margin:8px 0 0 0; padding:0 4px;&#34;&gt; &lt;a href=&#34;https://www.instagram.com/p/Bkz8a0ihnYF/&#34; style=&#34; color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;&#34; target=&#34;_blank&#34;&gt;Nefryとつないでみた。キーの押し心地がよい&lt;/a&gt;&lt;/p&gt; &lt;p style=&#34; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;&#34;&gt;&lt;a href=&#34;https://www.instagram.com/n0bisuke/&#34; style=&#34; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px;&#34; target=&#34;_blank&#34;&gt; n0bisuke&lt;/a&gt;さん(@n0bisuke)がシェアした投稿 - &lt;time style=&#34; font-family:Arial,sans-serif; font-size:14px; line-height:17px;&#34; datetime=&#34;2018-07-04T13:35:59+00:00&#34;&gt;2018年 7月月4日午前6時35分PDT&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt; &lt;script async defer src=&#34;//www.instagram.com/embed.js&#34;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;h3 id=&#34;実装&#34;&gt;実装&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://dotstud.io/docs/nefrybt-http-post/&#34;&gt;Nefry BTでのHTTP POST&lt;/a&gt;も合わせて読むとコード理解が進みます。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#include &amp;lt;Keypad.h&amp;gt;
#include &amp;lt;NefryDisplay.h&amp;gt;
#include &amp;lt;WiFiClientSecure.h&amp;gt;
WiFiClientSecure client;

String StrPerEncord(const char* c_str);
String escapeParameter(String param);
void hipchatPost(String message);

const int HTTP_PORT = 443;
const char* HOST = &amp;quot;xxxxxxxxxx.hipchat.com&amp;quot;;

const byte n_rows = 4;
const byte n_cols = 4;

char keys[n_rows][n_cols] = {
  {&#39;1&#39;,&#39;2&#39;,&#39;3&#39;,&#39;A&#39;},
  {&#39;4&#39;,&#39;5&#39;,&#39;6&#39;,&#39;B&#39;},
  {&#39;7&#39;,&#39;8&#39;,&#39;9&#39;,&#39;C&#39;},
  {&#39;*&#39;,&#39;0&#39;,&#39;#&#39;,&#39;D&#39;}
};

byte colPins[n_rows] = {D3, D2, D1, D0};
byte rowPins[n_cols] = {D7, D6, D5, D4};
Keypad myKeypad = Keypad( makeKeymap(keys), rowPins, colPins, n_rows, n_cols);

String storeMessage = &amp;quot;&amp;quot;;

//3行目だけにPrint
void nfDisplay3Print(String mes){
  NefryDisplay.print(&amp;quot;&amp;quot;);
  NefryDisplay.print(&amp;quot;&amp;quot;);
  NefryDisplay.print(mes);
}

void setup() {
  Serial.begin(115200);
  NefryDisplay.setTitle(&amp;quot;KINTAI&amp;quot;);
  nfDisplay3Print(&amp;quot;Please Input...&amp;quot;);
}

void loop() {
  char myKey = myKeypad.getKey();
  String member = &amp;quot;&amp;quot;;

  //ボタンが押された時の処理
  if (myKey != NULL){
    Serial.print(&amp;quot;Key pressed: &amp;quot;);
    Serial.println(myKey);

    if(String(myKey) == &amp;quot;1&amp;quot;){
      member += &amp;quot;n0bisuke&amp;quot;;
      storeMessage = member;
    }else if(String(myKey) == &amp;quot;2&amp;quot;){
      member += &amp;quot;chantoku&amp;quot;;
      storeMessage = member;
    }else if(String(myKey) == &amp;quot;3&amp;quot;){
      member += &amp;quot;kiki&amp;quot;;
      storeMessage = member;
    }else if(String(myKey) == &amp;quot;4&amp;quot;){
      member += &amp;quot;takudon&amp;quot;;
      storeMessage = member;
    }else if(String(myKey) == &amp;quot;5&amp;quot;){
      member += &amp;quot;sasakitomohiro&amp;quot;;
      storeMessage = member;
    }

    nfDisplay3Print(String(myKey) + &amp;quot;:&amp;quot; + member);

    if(String(myKey) == &amp;quot;A&amp;quot;){
      nfDisplay3Print(String(myKey) + &amp;quot;: [Office IN] post to HipChat...&amp;quot;);

      storeMessage += &amp;quot;さんが出勤しました。&amp;quot;;
      hipchatPost(storeMessage); //HipChatに投稿
      storeMessage = &amp;quot;&amp;quot;; //リセット

      nfDisplay3Print(String(myKey) + &amp;quot;: POST DONE&amp;quot;);
    }else if(String(myKey) == &amp;quot;B&amp;quot;){
      nfDisplay3Print(String(myKey) + &amp;quot;: [Office OUT] post to HipChat...&amp;quot;);

      storeMessage += &amp;quot;さんが退勤しました。&amp;quot;;
      hipchatPost(storeMessage); //HipChatに投稿
      storeMessage = &amp;quot;&amp;quot;; //リセット

      nfDisplay3Print(String(myKey) + &amp;quot;: POST DONE&amp;quot;);
    }  
  }
}

void hipchatPost(String message){
  String url = &amp;quot;/v2/room/4651875/notification?auth_token=xxxxxxxxxxxxxxxx&amp;quot;;
  url += &amp;quot;&amp;amp;color=green&amp;amp;notify=false&amp;amp;message_format=text&amp;amp;message=&amp;quot;;
  url += StrPerEncord(escapeParameter(message + &amp;quot; (yey)&amp;quot;).c_str());

  Serial.print(&amp;quot;connecting to &amp;quot;);
  Serial.println(HOST);

  if (!client.connect(HOST, HTTP_PORT)) {
    Serial.println(&amp;quot;connection failed&amp;quot;);
    return;
  }

  client.println(&amp;quot;POST &amp;quot; + url + &amp;quot; HTTP/1.1&amp;quot;);
  client.println(&amp;quot;Content-Type: application/json&amp;quot;);
  client.println(&amp;quot;Content-Type: application/x-www-form-urlencoded&amp;quot;);
  client.println(&amp;quot;Host: &amp;quot; + String(HOST));
  client.println(&amp;quot;Connection: close&amp;quot;);
  client.println();

  unsigned long timeout = millis();
  while (client.available() == 0) {    
    if (millis() - timeout &amp;gt; 5000) {
        Serial.println(&amp;quot;&amp;gt;&amp;gt;&amp;gt; Client Timeout !&amp;quot;);
        client.stop();
        return;
    }
  }

  // Read all the lines of the reply from server and print them to Serial
  while(client.available()) {
      String line = client.readStringUntil(&#39;\r&#39;);
      Serial.print(line);
  }

  Serial.println();
  Serial.println(&amp;quot;closing connection&amp;quot;);
}

String StrPerEncord(const char* c_str) {
  uint16_t i = 0;
  String str_ret = &amp;quot;&amp;quot;;
  char c1[3], c2[3], c3[3];

  while (c_str[i] != &#39;\0&#39;) {
    if (c_str[i] &amp;gt;= 0xC2 &amp;amp;&amp;amp; c_str[i] &amp;lt;= 0xD1) { //2バイト文字
      sprintf(c1, &amp;quot;%2x&amp;quot;, c_str[i]);
      sprintf(c2, &amp;quot;%2x&amp;quot;, c_str[i + 1]);
      str_ret += &amp;quot;%&amp;quot; + String(c1) + &amp;quot;%&amp;quot; + String(c2);
      i = i + 2;
    } else if (c_str[i] &amp;gt;= 0xE2 &amp;amp;&amp;amp; c_str[i] &amp;lt;= 0xEF) {
      sprintf(c1, &amp;quot;%2x&amp;quot;, c_str[i]);
      sprintf(c2, &amp;quot;%2x&amp;quot;, c_str[i + 1]);
      sprintf(c3, &amp;quot;%2x&amp;quot;, c_str[i + 2]);
      str_ret += &amp;quot;%&amp;quot; + String(c1) + &amp;quot;%&amp;quot; + String(c2) + &amp;quot;%&amp;quot; + String(c3);
      i = i + 3;
    } else {
      str_ret += String(c_str[i]);
      i++;
    }
  }
  return str_ret;
}

String escapeParameter(String param) {
  param.replace(&amp;quot;%&amp;quot;, &amp;quot;%25&amp;quot;);
  param.replace(&amp;quot;+&amp;quot;, &amp;quot;%2B&amp;quot;);
  param.replace(&amp;quot; &amp;quot;, &amp;quot;+&amp;quot;);
  param.replace(&amp;quot;\&amp;quot;&amp;quot;, &amp;quot;%22&amp;quot;);
  param.replace(&amp;quot;#&amp;quot;, &amp;quot;%23&amp;quot;);
  param.replace(&amp;quot;$&amp;quot;, &amp;quot;%24&amp;quot;);
  param.replace(&amp;quot;&amp;amp;&amp;quot;, &amp;quot;%26&amp;quot;);
  param.replace(&amp;quot;&#39;&amp;quot;, &amp;quot;%27&amp;quot;);
  param.replace(&amp;quot;(&amp;quot;, &amp;quot;%28&amp;quot;);
  param.replace(&amp;quot;)&amp;quot;, &amp;quot;%29&amp;quot;);
  param.replace(&amp;quot;*&amp;quot;, &amp;quot;%2A&amp;quot;);
  param.replace(&amp;quot;,&amp;quot;, &amp;quot;%2C&amp;quot;);
  param.replace(&amp;quot;/&amp;quot;, &amp;quot;%2F&amp;quot;);
  param.replace(&amp;quot;:&amp;quot;, &amp;quot;%3A&amp;quot;);
  param.replace(&amp;quot;;&amp;quot;, &amp;quot;%3B&amp;quot;);
  param.replace(&amp;quot;&amp;lt;&amp;quot;, &amp;quot;%3C&amp;quot;);
  param.replace(&amp;quot;=&amp;quot;, &amp;quot;%3D&amp;quot;);
  param.replace(&amp;quot;&amp;gt;&amp;quot;, &amp;quot;%3E&amp;quot;);
  param.replace(&amp;quot;?&amp;quot;, &amp;quot;%3F&amp;quot;);
  param.replace(&amp;quot;@&amp;quot;, &amp;quot;%40&amp;quot;);
  param.replace(&amp;quot;[&amp;quot;, &amp;quot;%5B&amp;quot;);
  param.replace(&amp;quot;\\&amp;quot;, &amp;quot;%5C&amp;quot;);
  param.replace(&amp;quot;]&amp;quot;, &amp;quot;%5D&amp;quot;);
  param.replace(&amp;quot;^&amp;quot;, &amp;quot;%5E&amp;quot;);
  param.replace(&amp;quot;&#39;&amp;quot;, &amp;quot;%60&amp;quot;);
  param.replace(&amp;quot;{&amp;quot;, &amp;quot;%7B&amp;quot;);
  param.replace(&amp;quot;|&amp;quot;, &amp;quot;%7C&amp;quot;);
  param.replace(&amp;quot;}&amp;quot;, &amp;quot;%7D&amp;quot;);
  return param;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;運用1日目ですが問題ないです（謎）&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;実際にはシートに記録したりした方が良いと思いますが今後検討です！&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.gyazo.com/fcc920005a4a691f37081c936f6968d1.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;HipChatの部分はうちの社内がHipChatだからというだけですが、LINEだったりSlackだったりも同様のやり方で連携できます。&lt;/p&gt;

&lt;p&gt;思ったより簡単に試せたなぁという印象なのでみなさんもぜひ試してみてください。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Let&#39;s 顔面製造！ダンボールとサーボモータで喋る顔面ロボットを作ろう</title>
      <link>https://dotstud.io/blog/face-robot-making-basic/</link>
      <pubDate>Wed, 04 Jul 2018 10:00:00 +0900</pubDate>
      
      <guid>https://dotstud.io/blog/face-robot-making-basic/</guid>
      
      <description>

&lt;p&gt;都内でひっそりOLやってるへっぽこまるこです！&lt;/p&gt;

&lt;p&gt;電子工作に入門してサーボモータが動かせるようになったので、顔面ロボット（っぽいもの）を工作してみました！&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;メインの材料で使う材料はダンボールです&lt;/strong&gt;！Amazonさんからたくさん届きますよね！ダンボール！！&lt;/p&gt;

&lt;p&gt;その他にも身近な材料をかき集めて図工感覚で作れるので、ぜひ試してみてください！&lt;/p&gt;

&lt;h2 id=&#34;完成イメージ&#34;&gt;完成イメージ&lt;/h2&gt;

&lt;p&gt;下記のような動きをもたせると、それっぽい顔面ロボットを作ることができます。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;目が開閉する&lt;/li&gt;
&lt;li&gt;目ん玉が左右に動く&lt;/li&gt;
&lt;li&gt;口が上下に動く&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;これまでに制作した顔面ロボットの作例は前回記事で紹介しています。&lt;/p&gt;



&lt;section class=&#34;link&#34; id=&#34;172&#34;&gt;
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
          &lt;div class=&#34;link_content&#34;&gt;
          &lt;a href=&#34;https://dotstud.io/blog/face-robot-making-maruko/&#34;&gt;&lt;/a&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/172/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
          &lt;/div&gt;
          &lt;div class=&#34;link_content&#34;&gt;
            &lt;div class=&#34;link_detail&#34;&gt;
              &lt;div class=&#34;link_title&#34;&gt;
                Lチカ入門者がロボット入門！歌ったり喋ったりする顔面ロボット作ってみた
              &lt;/div&gt;
              &lt;div class=&#34;link_date&#34;&gt;
                
                2018-06-14
              &lt;/div&gt;
              &lt;div class=&#34;link_desc&#34;&gt;
                Lチカ入門者でもロボット制作はできまぁす！歌ったり喋ったりIoTだったりする顔面ロボットの制作記です。
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/section&gt;
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
&lt;/section&gt;


&lt;p&gt;今回は顔面ロボット入門として、喋ってるように口が動くものを作ってみます！&lt;/p&gt;

&lt;p&gt;完成イメージはこちら。
&lt;img src=&#34;https://dotstud.io/img/blog/173/demo.gif&#34; alt=&#34;&#34; /&gt;
よく見ると&lt;strong&gt;下顎（下唇）が上がったり下がったりしてるだけ&lt;/strong&gt;ですね？！&lt;/p&gt;

&lt;p&gt;これぐらいだったらどうにかできそうだと思いませんか？？&lt;/p&gt;

&lt;h2 id=&#34;動作の制御はサーボモータ&#34;&gt;動作の制御はサーボモータ&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://akizukidenshi.com/catalog/g/gM-08761/&#34;&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/172/servo1.png&#34; alt=&#34;servo1&#34;&gt;

&lt;/center&gt;
&lt;/a&gt;
サーボモータの仕組みについては、dotstudioさんドキュメントの「&lt;a href=&#34;https://dotstud.io/docs/pulse-width-modulation/&#34;&gt;PWM制御（サーボモータの仕組み）&lt;/a&gt;」に詳しく書いてありますので、
ぜひそちらをご覧ください！&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/servo2.png&#34; alt=&#34;servo2&#34;&gt;

&lt;/center&gt;

サーボモータは角度を制御できるモジュールですが、取り付けるサーボホーン（サーボモータの羽の部分）にちょっと手を加えることで工作の幅が広がります！&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://www.amazon.co.jp/gp/product/B018VYJIEU/ref=oh_aui_search_detailpage?ie=UTF8&amp;amp;psc=1&#34;&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/arduino.png&#34; alt=&#34;arduino&#34;&gt;

&lt;/center&gt;
&lt;/a&gt;
マイコンボードは、今回はArduino Unoの互換ボード&lt;a href=&#34;https://www.amazon.co.jp/gp/product/B018VYJIEU/ref=oh_aui_search_detailpage?ie=UTF8&amp;amp;psc=1&#34;&gt;EasyWordMall UNO R3開発ボード&lt;/a&gt;を使います。Arduino Unoでも同じピンに配線すれば同様に動かせますので、試してみてください！&lt;/p&gt;

&lt;h2 id=&#34;let-s-工作&#34;&gt;Let&amp;rsquo;s 工作！&lt;/h2&gt;

&lt;h3 id=&#34;設計して切り出す&#34;&gt;設計して切り出す&lt;/h3&gt;

&lt;p&gt;作りたい顔のイメージを書いて、なんとなくサーボモータなどの位置を掴んでみます。
細かいことはやりながら考えるとして（適当！)、ベースの顔の型紙を作成します。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make1.png&#34; alt=&#34;make1&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;設計図を元に型紙を作成します。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make2.png&#34; alt=&#34;make2&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;型紙に合わせてダンボールをカットします。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make3.png&#34; alt=&#34;make3&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;ダンボールのパーツを貼り合わせます。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make4.png&#34; alt=&#34;make4&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;ダンボールに貼る布に切り込みを入れます。
(口をパクパクさせるためです)
ほつれ止めのため、切り込みにはトップコートを塗っておくとよいです。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make5.png&#34; alt=&#34;make5&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;h3 id=&#34;布を貼り付ける&#34;&gt;布を貼り付ける&lt;/h3&gt;

&lt;p&gt;布を貼って行きます。
ダンボールに適量ボンドを塗り、上から布を被せるように貼っていきます。
ボンドのつけすぎには注意です。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make6.png&#34; alt=&#34;make6&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;おもて面が全て貼れたら、余った部分を裏面に貼り付け、余分な布をカットします。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make7.png&#34; alt=&#34;make7&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;一通り貼るとこんな感じです。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make8.png&#34; alt=&#34;make8&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;裏面にも布を貼ります。
首が折れそうだったので、竹ひごを入れてついでに補強をしておきます。
また、底面には、百均タッパの蓋をグルーガンで貼っておきます。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make9.png&#34; alt=&#34;make9&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;h3 id=&#34;サーボホーンを拡張&#34;&gt;サーボホーンを拡張&lt;/h3&gt;

&lt;p&gt;サーボモータで口を動かせるよう、サーボホーンを拡張します。&lt;/p&gt;

&lt;p&gt;コンビニなんかでもらえるフォークを加工します。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make10.png&#34; alt=&#34;make10&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;ライターで少しずつ炙ると曲げることができるので、だいたい直角になるように折り曲げます。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make11.png&#34; alt=&#34;make11&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make13.png&#34; alt=&#34;make13&#34;&gt;

&lt;/center&gt;


&lt;p&gt;ペンチやカッターなどで必要な長さにカットして、ピンバイスで穴を開けます。
（カットの際は充分に気をつけましょう！）




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make14.png&#34; alt=&#34;make14&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;サーボモータに付属しているサーボホーンと今作ったフォークのパーツをくっつけます。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make15.png&#34; alt=&#34;make15&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make16.png&#34; alt=&#34;make16&#34;&gt;

&lt;/center&gt;






&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make17.png&#34; alt=&#34;make17&#34;&gt;

&lt;/center&gt;


&lt;p&gt;グルーガンで補強しておましょう。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make18.png&#34; alt=&#34;make18&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;h3 id=&#34;パーツを合体&#34;&gt;パーツを合体&lt;/h3&gt;

&lt;p&gt;サーボモータを本体と合体させていきます。&lt;/p&gt;

&lt;p&gt;裏面から、サーボホーンの先と下唇にあたる部分の接着部分を確認します。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make19.png&#34; alt=&#34;make19&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;強力粘着テープで貼り付けます。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/make20.png&#34; alt=&#34;make20&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;h3 id=&#34;唇と顔パーツを貼り付け&#34;&gt;唇と顔パーツを貼り付け&lt;/h3&gt;

&lt;p&gt;唇を作ります。唇に厚みをもたせるため、唇の形にカットしたダンボールに、一回り小さい赤のフェルトを貼ります。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/mouse1.png&#34; alt=&#34;mouse1&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;上から再度フェルトを貼ります。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/mouse2.png&#34; alt=&#34;mouse2&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;おもて面から唇をグルーガンなどで接着します。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/mouse3.png&#34; alt=&#34;mouse3&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;お好みで口以外の顔のパーツを貼り付けます。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/parts1.png&#34; alt=&#34;parts1&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;私は、目（発泡スチロールの球を加工）、眉毛（フェルトをカット）、まつ毛（百均のつけまつ毛）と髪の毛（百均の付け毛）を用意してみました！




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/parts2.png&#34; alt=&#34;parts2&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;h2 id=&#34;サーボモータを動かすプログラム&#34;&gt;サーボモータを動かすプログラム&lt;/h2&gt;

&lt;p&gt;以下のようなプログラムを準備して、マイコンボードに書き込んでおきます。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;# include &amp;lt;Servo.h&amp;gt;

Servo myservo;
int pos = 0;  

void setup() {
  myservo.attach(9);
}

void loop() {
  for (pos = 0; pos &amp;lt;= 25; pos += 1) {
    myservo.write(pos);
    delay(5);
  }
  for (pos = 25; pos &amp;gt;= 0; pos -= 1) {
    myservo.write(pos);
    delay(5);
  }
  for (pos = 0; pos &amp;lt;= 25; pos += 1) {
    myservo.write(pos);
    delay(5);
  }
  for (pos = 25; pos &amp;gt;= 0; pos -= 1) {
    myservo.write(pos);
    delay(5);
  }
    delay(20);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;配線して動作を調整&#34;&gt;配線して動作を調整&lt;/h2&gt;

&lt;p&gt;サーボモータから出ている３つの線の先端をカットします。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/circuit1.png&#34; alt=&#34;circuit1&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;先端の皮を１センチほど向いて、こよりのように撚り合せます。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/circuit2.png&#34; alt=&#34;circuit2&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;マイコンボードに配線します。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/circuit3.png&#34; alt=&#34;circuit3&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/circuit4.png&#34; alt=&#34;circuit4&#34;&gt;

&lt;/center&gt;


&lt;p&gt;制御を微調整します。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/circuit5.png&#34; alt=&#34;circuit5&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;h2 id=&#34;試してみる&#34;&gt;試してみる&lt;/h2&gt;

&lt;p&gt;動かします！
&lt;img src=&#34;https://dotstud.io/img/blog/173/demo2.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;

&lt;p&gt;図工感覚で電子工作して動くものができました！&lt;/p&gt;

&lt;p&gt;サーボモータを増やしたりスピーカをつけたりと、同じような機構でさまざまな工夫ができます。&lt;/p&gt;



&lt;section class=&#34;link&#34; id=&#34;172&#34;&gt;
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
          &lt;div class=&#34;link_content&#34;&gt;
          &lt;a href=&#34;https://dotstud.io/blog/face-robot-making-maruko/&#34;&gt;&lt;/a&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/172/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
          &lt;/div&gt;
          &lt;div class=&#34;link_content&#34;&gt;
            &lt;div class=&#34;link_detail&#34;&gt;
              &lt;div class=&#34;link_title&#34;&gt;
                Lチカ入門者がロボット入門！歌ったり喋ったりする顔面ロボット作ってみた
              &lt;/div&gt;
              &lt;div class=&#34;link_date&#34;&gt;
                
                2018-06-14
              &lt;/div&gt;
              &lt;div class=&#34;link_desc&#34;&gt;
                Lチカ入門者でもロボット制作はできまぁす！歌ったり喋ったりIoTだったりする顔面ロボットの制作記です。
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/section&gt;
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
&lt;/section&gt;


&lt;p&gt;イベントの受付や、お子さんとの工作のネタにいかがでしょうか？！ぜひ、いろんなオリジナルの顔面を作ってみてください！！&lt;/p&gt;

&lt;h2 id=&#34;おまけ-パリピモード&#34;&gt;おまけ：パリピモード&lt;/h2&gt;

&lt;p&gt;目ん玉を加工して瞳にマイコン内臓フルカラーLED（HIGHにするとランダムに光るもの）を埋め込んで……




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/paripi1.png&#34; alt=&#34;paripi1&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;ぶっさします……




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/173/paripi2.png&#34; alt=&#34;paripi2&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;Arduinoのデジタル出力ピン（今回は11と12）にLEDを接続して&lt;a href=&#34;https://github.com/hepppook/project-cardboard/blob/master/src/face-paripi.ino&#34;&gt;プログラム&lt;/a&gt;を書き込み……&lt;/p&gt;

&lt;p&gt;動かします！
&lt;img src=&#34;https://dotstud.io/img/blog/173/demo3.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>感嘆詞でAlexaと自然な会話を実現！Speechconを使ってスキル開発</title>
      <link>https://dotstud.io/blog/nodejs-alexa-skill-speechcon/</link>
      <pubDate>Sat, 30 Jun 2018 10:00:00 +0900</pubDate>
      
      <guid>https://dotstud.io/blog/nodejs-alexa-skill-speechcon/</guid>
      
      <description>

&lt;p&gt;こんにちは、エンジニア兼ライターの&lt;a href=&#34;https://dotstud.io/members/chantoku&#34;&gt;ちゃんとく&lt;/a&gt;です。&lt;/p&gt;

&lt;p&gt;前回、Alexaスキル開発で手軽に使えるmp3群「&lt;a href=&#34;https://developer.amazon.com/ja/docs/custom-skills/ask-soundlibrary.html&#34;&gt;Alexa Skills Kit Sound Library&lt;/a&gt;」を紹介しました。&lt;/p&gt;



&lt;section class=&#34;link&#34; id=&#34;163&#34;&gt;
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
          &lt;div class=&#34;link_content&#34;&gt;
          &lt;a href=&#34;https://dotstud.io/blog/nodejs-alexa-skill-mp3/&#34;&gt;&lt;/a&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/163/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
          &lt;/div&gt;
          &lt;div class=&#34;link_content&#34;&gt;
            &lt;div class=&#34;link_detail&#34;&gt;
              &lt;div class=&#34;link_title&#34;&gt;
                AlexaスキルでMP3ファイルを流そう！効果音を入れてワンランクアップのスキル開発
              &lt;/div&gt;
              &lt;div class=&#34;link_date&#34;&gt;
                
                2018-04-30
              &lt;/div&gt;
              &lt;div class=&#34;link_desc&#34;&gt;
                Alexaスキルでは簡単にMP3ファイルを流すことができます。効果音や録音した音声を入れてステップアップしてみましょう！
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/section&gt;
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
&lt;/section&gt;


&lt;p&gt;今回は、Alexaのセリフを&lt;u&gt;超簡単に感情豊かにできる感嘆詞群&lt;/u&gt;「&lt;a href=&#34;https://developer.amazon.com/ja/docs/custom-skills/speechcon-reference-interjections-japanese.html&#34;&gt;&lt;strong&gt;Speechcon&lt;/strong&gt;&lt;/a&gt;」を紹介します！&lt;strong&gt;既存のスキルにほぼコピペで組み込めますので&lt;/strong&gt;、ぜひ試してみてください！&lt;/p&gt;

&lt;p&gt;ちなみにこの記事は&lt;a href=&#34;https://alexaskillawards.connpass.com/event/91338/&#34;&gt;Alexaスキルアワード公式ハッカソン東京&lt;/a&gt;のサポートをしながら書いています。&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;ja&#34;&gt;&lt;p lang=&#34;ja&#34; dir=&#34;ltr&#34;&gt;やたら「似合う」って言われるんだけど喜んでいいやつ？ &lt;a href=&#34;https://twitter.com/hashtag/alexadevs?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#alexadevs&lt;/a&gt; &lt;a href=&#34;https://t.co/CshKsJpef3&#34;&gt;pic.twitter.com/CshKsJpef3&lt;/a&gt;&lt;/p&gt; ちゃんとく( ˙꒳​˙ ) (@tokutoku393) &lt;a href=&#34;https://twitter.com/tokutoku393/status/1012955230579744768?ref_src=twsrc%5Etfw&#34;&gt;2018年6月30日&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;h2 id=&#34;おさらい-スキルの実装方法&#34;&gt;おさらい: スキルの実装方法&lt;/h2&gt;

&lt;p&gt;まず、「Alexaスキルを初めて作る！」という方は下記の記事から実装方法を見てみてください！&lt;/p&gt;



&lt;section class=&#34;link&#34; id=&#34;144&#34;&gt;
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
          &lt;div class=&#34;link_content&#34;&gt;
          &lt;a href=&#34;https://dotstud.io/blog/nodejs-amazon-alexa-skill/&#34;&gt;&lt;/a&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/144/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
          &lt;/div&gt;
          &lt;div class=&#34;link_content&#34;&gt;
            &lt;div class=&#34;link_detail&#34;&gt;
              &lt;div class=&#34;link_title&#34;&gt;
                Amazon Echoを使いこなそう！Node.jsでAlexaスキル開発 - スマートスピーカーの基本とスキル開発入門
              &lt;/div&gt;
              &lt;div class=&#34;link_date&#34;&gt;
                
                2018-03-06
              &lt;/div&gt;
              &lt;div class=&#34;link_desc&#34;&gt;
                Amazon Echoで動くAlexaのスキル開発をNode.jsでやってみましょう！
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/section&gt;
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
&lt;/section&gt;


&lt;p&gt;Alexaスキルは文字列を渡すだけで読み上げてくれますが、イントネーションや文の区切りがやや不自然になることがあります。&lt;/p&gt;

&lt;p&gt;自然な発話にするために「&lt;a href=&#34;https://developer.amazon.com/ja/docs/custom-skills/speech-synthesis-markup-language-ssml-reference.html&#34;&gt;&lt;strong&gt;SSML&lt;/strong&gt;&lt;/a&gt;」という音声合成マークアップ言語が用意されており、HTMLのような「タグ」を使って実装することができます。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/180/1.png&#34; alt=&#34;1&#34;&gt;

&lt;/center&gt;

今回使うSpeechconの組み込みには、&lt;code&gt;&amp;lt;say-as interpret-as=&amp;quot;interjection&amp;quot;&amp;gt;&lt;/code&gt;というSSMLタグを利用します。&lt;/p&gt;

&lt;h2 id=&#34;speechconとは&#34;&gt;Speechconとは&lt;/h2&gt;

&lt;p&gt;「&lt;a href=&#34;https://developer.amazon.com/ja/docs/custom-skills/speechcon-reference-interjections-japanese.html&#34;&gt;&lt;strong&gt;Speechcon&lt;/strong&gt;&lt;/a&gt;」のページを見てみると、たくさんの感嘆詞がリストになっています。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/180/2.png&#34; alt=&#34;2&#34;&gt;

&lt;/center&gt;

ざっと見てみても、面白そうな感嘆詞が並んでいますよね。&lt;/p&gt;

&lt;p&gt;基本の使い方は&lt;strong&gt;使いたい感嘆詞を見つけるだけ&lt;/strong&gt;です。さっそくやってみましょう！&lt;/p&gt;

&lt;h2 id=&#34;用意したスキル&#34;&gt;用意したスキル&lt;/h2&gt;

&lt;p&gt;組み込むベースとして、こんなスキルを用意しました。&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/180/3.png&#34; alt=&#34;3&#34;&gt;

&lt;/center&gt;


&lt;p&gt;実装プログラムはこんな感じです。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&#39;use strict&#39;;

const Alexa = require(&#39;alexa-sdk&#39;);

const handlers = {
    // アプリ起動時の返答
    &#39;LaunchRequest&#39;: function () {
        const speechOutput = &#39;こんにちは。今日はなんのお祝いですか？&#39;
        const reprompt = &#39;お祝いします。&#39;
        this.emit(&#39;:ask&#39;, speechOutput, reprompt);
    },
    // RecomendIntentへの返答
    &#39;CongratsIntent&#39;: function () {
        const intent = this.event.request.intent;
        const speechOutput = &#39;おめでとうございます。&#39;
        this.emit(&#39;:tell&#39;, speechOutput);
    },
    // ヘルプ（デフォルト）への返答
    &#39;AMAZON.HelpIntent&#39;: function () {
        const speechOutput = &#39;今日は誕生日、のように、なんのお祝いか教えてください。&#39;;
        const reprompt = &#39;なんのお祝いか教えてください。&#39;
        this.emit(&#39;:ask&#39;, speechOutput, reprompt);
    },
    // キャンセル（デフォルト）への返答
    &#39;AMAZON.CancelIntent&#39;: function () {
        this.emit(&#39;:tell&#39;, this.t(&#39;STOP_MESSAGE&#39;));
    },
    // 対応できないアクションへの返答
    &#39;AMAZON.StopIntent&#39;: function () {
        const speechOutput = &#39;すみません。わかりません。&#39;;
        const reprompt = &#39;もう一度お願いします。&#39;
        this.emit(&#39;:tell&#39;, this.t(&#39;STOP_MESSAGE&#39;));
    },
};

// 下記のように修正
exports.handler = function(event, context, callback) {
    const alexa = Alexa.handler(event, context, callback);
    alexa.registerHandlers(handlers);
    alexa.execute();
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Speechconを使っていない状態の読み上げはこんな感じです。
&lt;center&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/r8tgeo-Qh3w&#34; frameborder=&#34;0&#34; allow=&#34;autoplay; encrypted-media&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;ちょっと違和感のある読み上げになっていますね。おめでとうも、&lt;strong&gt;あまり祝ってくれている感じがしません&lt;/strong&gt;（笑）。&lt;/p&gt;

&lt;h2 id=&#34;speechconを追加&#34;&gt;Speechconを追加&lt;/h2&gt;

&lt;p&gt;このスキルにSpeechconを組み込んで、感情豊かなAlexaにしてみます。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/180/4.png&#34; alt=&#34;4&#34;&gt;

&lt;/center&gt;

ページからよさそうな感嘆詞を探して……&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://gyazo.com/3f4d5770cf0ec5483905fa83372764c6&#34;&gt;&lt;img src=&#34;https://i.gyazo.com/3f4d5770cf0ec5483905fa83372764c6.png&#34; alt=&#34;https://gyazo.com/3f4d5770cf0ec5483905fa83372764c6&#34; /&gt;&lt;/a&gt;
&lt;code&gt;&amp;lt;&amp;lt;say-as interpret-as=&amp;quot;interjection&amp;quot;&amp;gt;&amp;lt;/say-as&amp;gt;&lt;/code&gt;で囲んで入れ込んだら完成です。&lt;/p&gt;

&lt;p&gt;&lt;font size=&#34;5&#34;&gt;簡単すぎますよね？&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
組み込んだあとのプログラムは下記のようになりました。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&#39;use strict&#39;;

const Alexa = require(&#39;alexa-sdk&#39;);

const handlers = {
    // アプリ起動時の返答
    &#39;LaunchRequest&#39;: function () {
        const speechOutput = &#39;&amp;lt;say-as interpret-as=&amp;quot;interjection&amp;quot;&amp;gt;こんにちは&amp;lt;/say-as&amp;gt;&amp;lt;break time=&amp;quot;0.5s&amp;quot;/&amp;gt;今日はなんのお祝いですか？&#39;
        const reprompt = &#39;お祝いします。&#39;
        this.emit(&#39;:ask&#39;, speechOutput, reprompt);
    },
    // RecomendIntentへの返答
    &#39;CongratsIntent&#39;: function () {
        const intent = this.event.request.intent;
        const speechOutput = &#39;&amp;lt;say-as interpret-as=&amp;quot;interjection&amp;quot;&amp;gt;まぁ&amp;lt;/say-as&amp;gt;&amp;lt;break time=&amp;quot;0.5s&amp;quot;/&amp;gt;&amp;lt;say-as interpret-as=&amp;quot;interjection&amp;quot;&amp;gt;お誕生日おめでとう&amp;lt;/say-as&amp;gt;&amp;lt;break time=&amp;quot;0.5s&amp;quot;/&amp;gt;&amp;lt;say-as interpret-as=&amp;quot;interjection&amp;quot;&amp;gt;万歳&amp;lt;/say-as&amp;gt;&#39;
        this.emit(&#39;:tell&#39;, speechOutput);
    },
    // ヘルプ（デフォルト）への返答
    &#39;AMAZON.HelpIntent&#39;: function () {
        const speechOutput = &#39;今日は誕生日、のように、なんのお祝いか教えてください。&#39;;
        const reprompt = &#39;なんのお祝いか教えてください。&#39;
        this.emit(&#39;:ask&#39;, speechOutput, reprompt);
    },
    // キャンセル（デフォルト）への返答
    &#39;AMAZON.CancelIntent&#39;: function () {
        this.emit(&#39;:tell&#39;, this.t(&#39;STOP_MESSAGE&#39;));
    },
    // 対応できないアクションへの返答
    &#39;AMAZON.StopIntent&#39;: function () {
        const speechOutput = &#39;すみません。わかりません。&#39;;
        const reprompt = &#39;もう一度お願いします。&#39;
        this.emit(&#39;:tell&#39;, this.t(&#39;STOP_MESSAGE&#39;));
    },
};

// 下記のように修正
exports.handler = function(event, context, callback) {
    const alexa = Alexa.handler(event, context, callback);
    alexa.registerHandlers(handlers);
    alexa.execute();
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;SpeechconとSpeechconの間は、&lt;code&gt;&amp;lt;break time=&amp;quot;0.5s&amp;quot;/&amp;gt;&lt;/code&gt;（0.5秒休止）や&lt;code&gt;&amp;lt;s&amp;gt;&lt;/code&gt;（センテンスの休止）などを入れて自然な発話にします。&lt;/p&gt;

&lt;h2 id=&#34;試してみる&#34;&gt;試してみる&lt;/h2&gt;

&lt;p&gt;感情豊かになったアレクサスキルを試してみます。
&lt;center&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/vKX6uzXqPFQ&#34; frameborder=&#34;0&#34; allow=&#34;autoplay; encrypted-media&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;アレクサに心から祝われてる！すごい！！&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;

&lt;p&gt;用意されている感嘆詞を組み込むだけで、&lt;strong&gt;会話がぐっとリアルになった&lt;/strong&gt;ように思います。Speechcon以外のSSMLもどんどん使ってスキルをブラッシュアップしていきたくなりますよね。&lt;/p&gt;

&lt;p&gt;日本語以外にも、英語（英国）・英語（米国）・英語（インド）・ドイツ語のSpeechconが用意されているのでいろいろ試してみてください！&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>M5Stack&#43;GPS&#43;臭気センサをつかってトイレの臭いマップをつくりたい！</title>
      <link>https://dotstud.io/blog/m5stack-toilet-smell-map/</link>
      <pubDate>Thu, 28 Jun 2018 10:00:00 +0900</pubDate>
      
      <guid>https://dotstud.io/blog/m5stack-toilet-smell-map/</guid>
      
      <description>

&lt;h2 id=&#34;公衆トイレ1級判定士を目指します&#34;&gt;公衆トイレ1級判定士を目指します！&lt;/h2&gt;

&lt;p&gt;ある日の出来事、お出掛け中……&lt;/p&gt;

&lt;div class=&#34;parent&#34;&gt;
    &lt;div class=&#34;dialogue&#34;&gt;
        &lt;div class=&#34;image&#34;&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/177/takudooon.png&#34; /&gt;
          &lt;b&gt;たくろーどん&lt;/b&gt;
        &lt;/div&gt;
        &lt;div class=&#34;text&#34;&gt;
            あー、トイレ、トイレ～！！トイレどこ？どこ？　ﾄﾞｺﾄﾞｺ┗(^o^)┛ﾄﾞｺﾄﾞｺ┏(^o^)┓
            &lt;br /&gt;
            &lt;br /&gt;
            あっ、あの公園に公衆トイレあるやん！！！！
            &lt;br /&gt;
            &lt;br /&gt;
            助かったぁ～～～ L( ＾ω＾ )┘ﾑﾞｫｰﾑﾞｫｰ└( ＾ω＾ )」
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;公衆トイレに急いで駆け込む 三└(┐卍^o^)卍ﾄﾞｩﾙﾙﾙﾙﾙ&lt;/p&gt;

&lt;p&gt;すると……&lt;/p&gt;

&lt;div class=&#34;parent&#34;&gt;
    &lt;div class=&#34;dialogue&#34;&gt;
        &lt;div class=&#34;image&#34;&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/177/takudooon.png&#34; /&gt;
          &lt;b&gt;たくろーどん&lt;/b&gt;
        &lt;/div&gt;
        &lt;div class=&#34;text&#34;&gt;
          臭い、臭い過ぎる！！！！なんやこれは！！！！(`ิิд´ิ)ｷｴｴｴｴｴｰ
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;気分、萎え萎え……。みなさん、こんな経験ありませんか？&lt;/p&gt;

&lt;p&gt;お出掛け中に公衆トイレにお世話になるも、臭いがひどくて気分が下がってしまうなんてことありますよね？&lt;/p&gt;

&lt;p&gt;良い（無臭）公衆トイレと悪い（悪臭）公衆トイレが、どこにあるのか分かったらいいなぁ……。&lt;/p&gt;

&lt;div class=&#34;parent&#34;&gt;
    &lt;div class=&#34;dialogue&#34;&gt;
        &lt;div class=&#34;image&#34;&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/177/takudooon.png&#34; /&gt;
          &lt;b&gt;たくろーどん&lt;/b&gt;
        &lt;/div&gt;
        &lt;div class=&#34;text bold&#34;&gt;
            &lt;b&gt;無ければ自分でつくればええやん！&lt;/b&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;ということで、そんな公衆トイレマップが作れるようなデバイスをつくってみたいと思います。
たぶん、僕は先駆者なので&lt;strong&gt;公衆トイレ1級判定士&lt;/strong&gt;と名乗ることにします。&lt;/p&gt;

&lt;h2 id=&#34;とりあえずつくってみる&#34;&gt;とりあえずつくってみる&lt;/h2&gt;

&lt;p&gt;今回はM5Stackというとても便利な開発ボードを使ってデバイスを作成していきます（&lt;a href=&#34;https://codezine.jp/article/detail/10853&#34;&gt;M5Stackが便利な話はこちらの記事が参考になります&lt;/a&gt;）。&lt;/p&gt;

&lt;p&gt;下記がイメージ図です。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/177/architecture.png&#34; alt=&#34;architecture&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;M5Stackの拡張ボードのGPSを使って位置情報を取得し、臭気センサ（&lt;a href=&#34;http://akizukidenshi.com/catalog/g/gP-00989/&#34;&gt;TGS2450&lt;/a&gt;）で計測した値と紐づけます。そして、&lt;a href=&#34;https://ambidata.io/&#34;&gt;Ambient&lt;/a&gt;（IoT可視化サービス）を使って地図上にマッピングし、良い（無臭）公衆トイレと悪い（悪臭）公衆トイレを可視化していくといった具合です。&lt;/p&gt;

&lt;h2 id=&#34;今回使用する電子部品たち&#34;&gt;今回使用する電子部品たち&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.switch-science.com/catalog/3648/&#34;&gt;M5Stack Gray
&lt;/a&gt;（今回はM5Stack BasicでもOK）&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.switch-science.com/catalog/3861/&#34;&gt;M5Stack用GPSモジュール&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://akizukidenshi.com/catalog/g/gP-00989/?customer=z&#34;&gt;TGS2450&lt;/a&gt;（臭気センサ）&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://akizukidenshi.com/catalog/g/gI-04268/&#34;&gt;2SC1815Y&lt;/a&gt;（トランジスタ、60V150mA）&lt;/li&gt;
&lt;li&gt;抵抗&lt;/li&gt;
&lt;li&gt;ユニバーサル基板&lt;/li&gt;
&lt;li&gt;ジャンパワイヤ&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;実装&#34;&gt;実装&lt;/h2&gt;

&lt;h3 id=&#34;とりあえずarduinoで臭気センサを動かしてみる&#34;&gt;とりあえずArduinoで臭気センサを動かしてみる&lt;/h3&gt;

&lt;p&gt;まず安定感のあるArduinoで臭気センサが動くをことを確認してみます。&lt;/p&gt;

&lt;p&gt;TGS2450のデータシートにあるサンプル回路を試してみたのですがうまくいきませんでした（要検証）。なので、検索した結果、トランジスタを2つ使用した回路が良く使われているようです。&lt;/p&gt;

&lt;p&gt;回路図は以下の通りです。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/177/circuit.png&#34; alt=&#34;circuit&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;配線がジャングルになりながらも……




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/177/circuit2.png&#34; alt=&#34;circuit2&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;下記のプログラムを動かすと……&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;#include &amp;lt;Arduino.h&amp;gt;

int val = 0;

void setup() {
    pinMode(3,OUTPUT);
    pinMode(4,OUTPUT);
    Serial.begin(115200);
}

void loop() {
    for (int i = 0; i &amp;lt;= 3; i++){
        delay(242);
        digitalWrite(4,HIGH);
        delay(8);
        digitalWrite(4,LOW);
    }     
    delay(237);
    digitalWrite(3,HIGH);
    delay(3);
    val = analogRead(5);
    delay(2);
    digitalWrite(3,LOW);
    digitalWrite(4,HIGH);
    delay(8);
    digitalWrite(4,LOW);
    val = 1023 - val;
    val = val * 5;
    Serial.println(val);
    // 3msec loop
    delay(3000);
}

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;自室ではこのようにデータが取れました。部屋の中では約345、ユニットバスの中では約360です。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/177/graph.png&#34; alt=&#34;graph&#34;&gt;

&lt;/center&gt;

これをM5Stackに応用していきます。&lt;/p&gt;

&lt;h3 id=&#34;m5stackに実装&#34;&gt;M5Stackに実装&lt;/h3&gt;

&lt;p&gt;M5StackにGPSモジュールをスタックします。そして、先ほどの回路図に従って回路をつくり、ジャンパワイヤを使ってM5Stackとつなげます。&lt;/p&gt;

&lt;p&gt;配線後は以下の様になります。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/177/circuit3.png&#34; alt=&#34;circuit3&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;h2 id=&#34;プログラム&#34;&gt;プログラム&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;#include &amp;lt;M5Stack.h&amp;gt;
#include &amp;lt;TinyGPS++.h&amp;gt;
#include &amp;lt;math.h&amp;gt;
#include &amp;lt;Ambient.h&amp;gt;

WiFiClient client;
Ambient ambient;

//臭気の強度が代入される変数////////////
int val = 0;
/////////////////////////////////////

//デザリングパスワード/////////////////
//屋外で使用するのでスマートフォンのデザリングを使用します
//これでAmbientにデータを送信できます
//const char* ssid = &amp;quot;yourSSID&amp;quot;;
//const char* password = &amp;quot;yourPW&amp;quot;;
/////////////////////////////////////

//Ambientの設定//////////////////////
unsigned int channelId = yourID; // AmbientのチャネルID
const char* writeKey = &amp;quot;yourWriteKey&amp;quot;; // ライトキー
////////////////////////////////////

//GPSの設定/////////////////////////
HardwareSerial GPS_s(2);
TinyGPSPlus gps;
////////////////////////////////////

void setup(){
  //WiFi////////////////////////////////////////////////////////
  WiFi.begin(ssid, password);  //  Wi-Fi APに接続
  while (WiFi.status() != WL_CONNECTED) {  //  Wi-Fi AP接続待ち
      delay(100);
  }
  //////////////////////////////////////////////////////////////

  //臭気センサ//////////////////////////////////////////////////
  pinMode(21,OUTPUT);
  pinMode(22,OUTPUT);
  //////////////////////////////////////////////////////////////
  Serial.begin(115200);
  M5.begin();
  GPS_s.begin(9600);

  ambient.begin(channelId, writeKey, &amp;amp;client);
}

void loop(){
  char buf[16];

  M5.Lcd.setCursor(0, 70);
  M5.Lcd.setTextColor(WHITE, BLACK);

  while(!gps.location.isUpdated()){
    while(GPS_s.available()&amp;gt;0){
      if(gps.encode(GPS_s.read())){
         break;
      }
     }
   }

   Serial.printf(&amp;quot;lat: %f, lng: %f\r\n&amp;quot;, gps.location.lat(), gps.location.lng());
   M5.Lcd.printf(&amp;quot;lat: %f, lng: %f\r\n&amp;quot;, gps.location.lat(), gps.location.lng());

  //GPS測定と臭気の測定&amp;amp;Ambientへ送信////////////////
  if(M5.BtnA.wasPressed()){
    //臭気をAmbientに送信///////
    //計測データの平均値を送信//
    for (int i = 0; i &amp;lt;= 3; i++){
        delay(242);
        digitalWrite(22,HIGH);
        delay(8);
        digitalWrite(22,LOW);
    }     
    delay(237);
    digitalWrite(21,HIGH);
    delay(3);
    val = analogRead(36);
    delay(2);
    digitalWrite(21,LOW);
    digitalWrite(22,HIGH);
    delay(8);
    digitalWrite(22,LOW);
    val = 1023 - val;
    val = val * 5;
    Serial.println(val);
    // 3msec loop
    delay(3000);
    ambient.set(1,val);
    /////////////////////////////////////////

    //経度・緯度をAmbientを送信///////////////
    dtostrf(gps.location.lat(),12,8,buf);
    ambient.set(9, buf);
    dtostrf(gps.location.lng(), 12, 8, buf);
    ambient.set(10, buf);
    ambient.send();
    /////////////////////////////////////////
  }
//////////////////////////////////////////////////
    m5.update();

}


&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;動作確認&#34;&gt;動作確認&lt;/h2&gt;

&lt;p&gt;実際に完成したデバイスを動かしてみます。&lt;/p&gt;

&lt;p&gt;M5Stackのボタンを押すと計測されたデータと位置情報がAmbientに表示されるようになりました。自室で試してみたところ以下の図のようになりました（具体的な地名は隠してあります）。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/177/map.png&#34; alt=&#34;map&#34;&gt;

&lt;/center&gt;

屋内なのでGPSに誤差があるようですね。ですが、臭気の強さが強いほど赤く、弱いほど青くマッピングされていることがわかります。&lt;/p&gt;

&lt;p&gt;しかし、疑問があります。それは、&lt;strong&gt;「臭気センサの値が高すぎる！」&lt;/strong&gt;ということです。&lt;/p&gt;

&lt;p&gt;Arduinoの値が信頼できそうなので、明らかにM5Stackで検出した値は間違っていると考えられます。回路は変更していないのですが……「なんでだろう？」という感じです……。&lt;/p&gt;

&lt;h2 id=&#34;とりあえずフィールドワーク&#34;&gt;とりあえずフィールドワーク&lt;/h2&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/177/field.png&#34; alt=&#34;field&#34;&gt;

&lt;/center&gt;

とりあえず、完成した（？）デバイスをもってフィールドワークに出かけてみます。公衆トイレを探しに行きます（在籍している大学で探します）。&lt;/p&gt;

&lt;p&gt;&lt;font size=&#34;2&#34;&gt;
※ここで公衆トイレとは、「屋外にあるトイレ」を意味します。
&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;意外と公衆トイレはないものですね……。臭気の数値は正しい値ではないので、この臭気マップは参考になりませんが……




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/177/map2.png&#34; alt=&#34;map2&#34;&gt;

&lt;/center&gt;

このデバイスにはどうやら改良が必要のようです……。&lt;/p&gt;

&lt;h2 id=&#34;おわりに&#34;&gt;おわりに&lt;/h2&gt;

&lt;p&gt;M5Stackと拡張モジュールのGPSを使うと簡単に位置情報を取得できることがわかりました。また、Ambientを使えばマッピングも自由自在です。&lt;/p&gt;

&lt;p&gt;さらにセンサを組み合わせて使えば、ロガーのようなものが簡単につくれるでしょう。&lt;/p&gt;

&lt;p&gt;しかし、今回は周期を計測する回路がArduinoでは正常で、M5Stackではうまく計測データがとれないという問題がおこりました。おそらく回路を改良する必要があると思います。&lt;/p&gt;

&lt;p&gt;どうやら、公衆トイレ1級判定士の道のりはまだまだ長いようです……。&lt;/p&gt;

&lt;style&gt;
.parent {
    position: relative;
    margin: 2em 0;
}

.dialogue {
    padding: 40px;
    position: relative;
    margin: auto;
    border: 1px solid #C0C0C0;
    width: 600px;
    display: table;
    box-shadow: 0 3px 4px rgba(0, 0, 0, 0.32);
}

.image {
    width: 90px;
    height: 90px;
    margin-right: 30px;
    padding-right: 10px;
    display: table-cell;
    vertical-align: middle;
}

.image img {
    border-radius: 50%;
    border: 2px solid pink;
}

.text {
    display: table-cell;
    padding: 0;
    vertical-align: middle;
    padding-left: 30px;
}

.bold {
    font-size: 120%;
}
&lt;/style&gt;
</description>
    </item>
    
    <item>
      <title>Lチカ入門者がロボット入門！歌ったり喋ったりする顔面ロボット作ってみた</title>
      <link>https://dotstud.io/blog/face-robot-making-maruko/</link>
      <pubDate>Thu, 14 Jun 2018 10:00:00 +0900</pubDate>
      
      <guid>https://dotstud.io/blog/face-robot-making-maruko/</guid>
      
      <description>

&lt;p&gt;都内でひっそりOLやってるへっぽこまるこです。&lt;/p&gt;

&lt;p&gt;電子工作でLチカを覚えたので、そろそろロボット作れるんじゃないかな……。無知が故、そんなことを思い立ってしまったのでロボット（的なのもの）制作に挑戦してみました！&lt;/p&gt;

&lt;p&gt;最初は２分の１サイズぐらいの人型ロボットを作りたかったのですが、なんせLチカ入門レベルでしたので、全身を作って制御するのは厳しいことに気づきました。そこでひとまずは&lt;strong&gt;顔面ロボット&lt;/strong&gt;から挑戦しました！&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;顔のパーツが動く基本の顔面ロボット&lt;/li&gt;
&lt;li&gt;歌う顔面ロボット&lt;/li&gt;
&lt;li&gt;IoTな顔面ロボット&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;を制作してみたので、作例と作り方を紹介していきます。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;マイコンボードとコピペと気合いで意外とやれる&lt;/strong&gt;ので、「ロボットって難しいでしょ？」と思っている方、ぜひ試してみてください！&lt;/p&gt;

&lt;h2 id=&#34;顔面ロボット制作の基本&#34;&gt;顔面ロボット制作の基本&lt;/h2&gt;

&lt;p&gt;顔面ロボットはその名の通り、顔のロボットです……。顔の造形を作って、目や口などの動かせそうなパーツをマイコンボードから制御します。&lt;/p&gt;

&lt;h3 id=&#34;動作制御&#34;&gt;動作制御&lt;/h3&gt;

&lt;p&gt;動作制御に使うのは、基本的に&lt;strong&gt;サーボモータ&lt;/strong&gt;（&lt;a href=&#34;http://akizukidenshi.com/catalog/g/gM-08761/&#34;&gt;SG90&lt;/a&gt;）です。
&lt;a href=&#34;http://akizukidenshi.com/catalog/g/gM-08761/&#34;&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/172/servo1.png&#34; alt=&#34;servo1&#34;&gt;

&lt;/center&gt;
&lt;/a&gt;
サーボモータは回転方向や角度を細かく調整でき、ロボットのパーツ制御に向いています。SG90はお手頃価格（400円程度）なので、試行錯誤も躊躇せずできてうってつけですね。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/172/servo2.png&#34; alt=&#34;servo2&#34;&gt;

&lt;/center&gt;

顔面パーツを動かすには主に&lt;strong&gt;サーボホーン&lt;/strong&gt;（サーボモータの羽の部分）をどうごにょごにょするかを試行錯誤します。&lt;/p&gt;

&lt;p&gt;サーボモータの仕組みについては、ドキュメントの「&lt;a href=&#34;https://dotstud.io/docs/pulse-width-modulation/&#34;&gt;PWM制御（サーボモータの仕組み）&lt;/a&gt;」に詳しく書いてありますので、ぜひそちらをご覧ください！&lt;/p&gt;

&lt;h3 id=&#34;外装&#34;&gt;外装&lt;/h3&gt;

&lt;p&gt;ロボットの外装は主に3Dプリンタで制作します。&lt;/p&gt;

&lt;p&gt;そんな機材ないよ！という方は、既存のものを動かしたり、ファブリケーションスペース（工作機材を利用できる施設）を利用したりしてみてください！&lt;/p&gt;

&lt;p&gt;それでは、ここからは出来上がった顔ロボットと作り方を紹介させていただきます！&lt;/p&gt;

&lt;h2 id=&#34;初号機-あけみ&#34;&gt;初号機（あけみ）&lt;/h2&gt;

&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/172/akemi.gif&#34; alt=&#34;&#34; /&gt;
あけみちゃんです。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;浮世絵の中の美人を立体にしてみたい&lt;/strong&gt;、そんなことを思いついて、生まれてしまったのがあけみちゃんです。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://www.amazon.co.jp/%E8%87%AA%E4%BD%9C%E3%83%AD%E3%83%9C%E3%83%83%E3%83%88%E5%85%A5%E9%96%80%E2%80%95%E3%82%A2%E3%83%8B%E3%83%9E%E3%83%88%E3%83%AD%E3%83%8B%E3%82%AF%E3%82%B9%E7%B7%A8-%E6%B5%85%E8%8D%89-%E3%82%AE%E7%A0%94/dp/4901676199/ref=sr_1_1?s=books&amp;amp;ie=UTF8&amp;amp;qid=1526820137&amp;amp;sr=1-1&#34;&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/172/book.png&#34; alt=&#34;book&#34;&gt;

&lt;/center&gt;
&lt;/a&gt;
&lt;a href=&#34;https://www.amazon.co.jp/%E8%87%AA%E4%BD%9C%E3%83%AD%E3%83%9C%E3%83%83%E3%83%88%E5%85%A5%E9%96%80%E2%80%95%E3%82%A2%E3%83%8B%E3%83%9E%E3%83%88%E3%83%AD%E3%83%8B%E3%82%AF%E3%82%B9%E7%B7%A8-%E6%B5%85%E8%8D%89-%E3%82%AE%E7%A0%94/dp/4901676199/ref=sr_1_1?s=books&amp;amp;ie=UTF8&amp;amp;qid=1526820137&amp;amp;sr=1-1&#34;&gt;浅草ギ研さんの「自作ロボット製作入門」&lt;/a&gt;という書籍から、機構の動かし方なんかを参考にさせていただきました！
（久しぶりにamazonでみたらめっちゃ値上がりしてる！！）&lt;/p&gt;

&lt;h3 id=&#34;外装を制作&#34;&gt;外装を制作&lt;/h3&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/172/akemi1.png&#34; alt=&#34;akemi1&#34;&gt;

&lt;/center&gt;

まずは粘土で、作りたい顔のベースを造形します。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/172/akemi2.png&#34; alt=&#34;akemi2&#34;&gt;

&lt;/center&gt;

作った造形を3Dスキャンし、3Dプリントで出力します。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/172/akemi3.png&#34; alt=&#34;akemi3&#34;&gt;

&lt;/center&gt;

出力した造形を元に、パーツ（皮膚や目ん玉やら）を作成します。あけみちゃんの場合、皮膚はラテックス、目ん玉は樹脂粘土でできています。&lt;/p&gt;

&lt;p&gt;&lt;font size=&#34;2&#34;&gt;※写真はラテックスの皮膚を作るためのシリコーン型を作っているところです。&lt;/font&gt;&lt;/p&gt;

&lt;h3 id=&#34;動く機構を作る&#34;&gt;動く機構を作る&lt;/h3&gt;

&lt;p&gt;ここでは、サーボホーンに繋がるところがどのようにしたら連携できるかを考え作成します。あけみちゃんは下記2つが実現できるよう、いじりながら模索しました。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;目ん玉が左右に動く&lt;/li&gt;
&lt;li&gt;口が開閉する&lt;/li&gt;
&lt;/ul&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/172/akemi4.png&#34; alt=&#34;akemi4&#34;&gt;

&lt;/center&gt;


&lt;p&gt;とりあえず自分が扱えるもの（発砲スチロールやプラ板やアルミの棒など）で無理矢理動くように仕上げたので、なかなかひどいことになっていますね。&lt;/p&gt;

&lt;h3 id=&#34;回路を組む&#34;&gt;回路を組む&lt;/h3&gt;

&lt;p&gt;どのサーボモータが何度動けばいいか考えながら、電子部品の配線やプログラムを準備します。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/172/akemi5.png&#34; alt=&#34;akemi5&#34;&gt;

&lt;/center&gt;

あけみちゃんは&lt;a href=&#34;http://gadget.renesas.com/ja/product/sakura.html&#34;&gt;GR-SAKURA&lt;/a&gt;というArduino互換のボードを利用しました。Arduino Unoでも同じ配線・プログラムで動かすことができます！&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/172/akemi6.png&#34; alt=&#34;akemi6&#34;&gt;

&lt;/center&gt;


&lt;p&gt;こんな適当な作りでも、どこがどう動いて欲しいか、サーボの動きがどこと連携しているか、&lt;strong&gt;なんとなーくわかっていれば、動くものは作れるぞ&lt;/strong&gt;、と悟ることができました。&lt;/p&gt;

&lt;h2 id=&#34;弐号機-お誕生日ケーキ&#34;&gt;弐号機（お誕生日ケーキ）&lt;/h2&gt;

&lt;p&gt;お世話になっていた社長さんが誕生日！サプライズケーキを作ろう！！！&lt;/p&gt;

&lt;p&gt;ということで、弐号機はお誕生日ケーキの顔面ロボットを制作しました。
&lt;img src=&#34;https://dotstud.io/img/blog/172/cake.gif&#34; alt=&#34;&#34; /&gt;
驚いていただきたかったので、生クリームは本物を使用しました！&lt;/p&gt;

&lt;h3 id=&#34;外装を制作-1&#34;&gt;外装を制作&lt;/h3&gt;

&lt;p&gt;この時は、Fusion360というCADソフトを使ってデータ作成をし、3Dプリント出力をしました。
造形部分についてはFusion360ののファンサイト&lt;a href=&#34;https://fusion360.3dworks.co.jp/2017/08/01/cake/&#34;&gt;FUSION BASE&lt;/a&gt;でも紹介していただいています！&lt;/p&gt;

&lt;h3 id=&#34;録音した歌を歌わせる&#34;&gt;録音した歌を歌わせる&lt;/h3&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/172/cake1.png&#34; alt=&#34;cake1&#34;&gt;

&lt;/center&gt;

今回はバースデーソングを歌わせたかったので、簡単に実装できそう且つ安価な&lt;a href=&#34;https://www.amazon.co.jp/EasyWordMall-ISD1820-%E9%9F%B3%E5%A3%B0%E9%8C%B2%E9%9F%B3%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-%E3%83%AC%E3%82%B3%E3%83%BC%E3%83%80%E3%83%BC-%E3%82%B5%E3%82%A6%E3%83%B3%E3%83%89%E3%82%AA%E3%83%BC%E3%83%87%E3%82%A3%E3%82%AA%E3%82%B9%E3%83%94%E3%83%BC%E3%82%AB%E3%83%BC/dp/B0175U5J08/ref=pd_lpo_vtph_147_bs_lp_t_1?_encoding=UTF8&amp;amp;psc=1&amp;amp;refRID=WNFEK5ESWBE59NKY54ZR&#34;&gt;ISD1820&lt;/a&gt;というチップを使った音声録音・再生モジュールを使いました。&lt;/p&gt;

&lt;p&gt;事前に適当な音源を録音しておき、Lチカの要領でデジタル出力するだで簡単に音声を再生できます。&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/172/cake2.png&#34; alt=&#34;cake2&#34;&gt;

&lt;/center&gt;


&lt;p&gt;ただしこの方法だと、音声に合わせて一文字一文字サーボの角度を調整しなければいけません。一文字の音声が何秒かを測って、&lt;strong&gt;口の開閉に何秒かけるかを一つ一つ書く&lt;/strong&gt;、という地味作業をやっていました。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;
////口の開閉の制御　一部抜粋

  //mouth1 start  
  //は
  m_open();　//口を開ける関数
  delay(v4);　//v4 待機時間の変数
  m_close();　//口を閉じる関数
  //ぴ
  m_open();
  delay(v2);
  m_close();
  //ば
  m_open();
  delay(v4);
  m_close();
  //す
  m_open();
  delay(v2);
  m_close();
  //で
  m_open();
  delay(v6);
  m_close();
  //とぅ
  m_open();
  delay(v6);
  m_close();
  //ゆ
  m_open();
  delay(v12);
  m_close();
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;参号機-リアルアンパンマン&#34;&gt;参号機（リアルアンパンマン）&lt;/h2&gt;

&lt;p&gt;ケーキを作り終え、せっかくだから&lt;a href=&#34;https://iotlt.connpass.com/event/56277/&#34;&gt;IoTLT&lt;/a&gt;で登壇しようと「食べるIoT」で申し込んでいたのですが、よく考えてみたら、&lt;strong&gt;こいつ、Internetに繋がってない……ただのThingsじゃねーか……&lt;/strong&gt;！と気づいてしまいました。&lt;/p&gt;

&lt;p&gt;食べるIoT……食べられる顔面……あんぱんまん……&lt;strong&gt;これだ！&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/172/anpan.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ということで、リアルアンパンマンと題してこんなものを作ってしまったのでした。&lt;/p&gt;

&lt;p&gt;リアルアンパンマンなので&lt;strong&gt;あんぱんは本物&lt;/strong&gt;です。&lt;/p&gt;

&lt;p&gt;また、「お腹すいた」というLINEを送ったらあんぱんが喋る、という機能をつけてIoTっぽくしてみました。&lt;/p&gt;

&lt;h3 id=&#34;あんぱんが喋る機構を制作&#34;&gt;あんぱんが喋る機構を制作&lt;/h3&gt;

&lt;p&gt;あんぱんの中身はこんな感じです。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/172/anpan1.png&#34; alt=&#34;anpan1&#34;&gt;

&lt;/center&gt;

Internetを使いたかったので、マイコンボードはがじぇるねの&lt;a href=&#34;http://gadget.renesas.com/ja/product/citrus.html&#34;&gt;GR-CITRUS + WA-MIKAN&lt;/a&gt;を使用しています。&lt;/p&gt;

&lt;p&gt;ESP8266というWi-Fiモジュールが搭載されているので、&lt;a href=&#34;http://gadget.renesas.com/ja/product/com_sp_milkcocoa.html&#34;&gt;公式サイトのチュートリアル&lt;/a&gt;を参考に簡単にインターネット連携のアプリケーションを作ることができます。&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/172/anpan2.png&#34; alt=&#34;anpan2&#34;&gt;

&lt;/center&gt;


&lt;h3 id=&#34;line連携であんぱんが喋るプログラム&#34;&gt;LINE連携であんぱんが喋るプログラム&lt;/h3&gt;

&lt;p&gt;Node Girls主催の&lt;a href=&#34;https://nodegirls-jp.github.io/2017-05-14/&#34;&gt;LINE BOT開発ハンズオン&lt;/a&gt;を参考に（というかほぼ丸っと使わせていただき）、LINE通知をトリガーとして、サーボモータ動かす＆音声再生を実行するようにしています。&lt;/p&gt;

&lt;p&gt;またLINEから送られたデータの受け取りは&lt;strong&gt;簡単にリアルタイムなデータやりとりを実現できる&lt;/strong&gt;&lt;a href=&#34;https://mlkcca.com/&#34;&gt;Milkcocoa&lt;/a&gt;を利用しました。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://speakerdeck.com/n0bisuke/hazimetefalseline-botzuo-cheng&#34;&gt;LINE BOT開発ハンズオンの資料&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/hepppook/project-anpan/blob/master/src/grcitrus_milkcocoa.cpp&#34;&gt;Milkcocoaからデータを受け取るGR-CITRUS側のコード&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;外装を制作-2&#34;&gt;外装を制作&lt;/h3&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/172/anpan3.png&#34; alt=&#34;anpan3&#34;&gt;

&lt;/center&gt;

機構にカバーをつけて、&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/172/anpan4.png&#34; alt=&#34;anpan4&#34;&gt;

&lt;/center&gt;

あんぱん（西友で購入）でデコレーション（？）して完成です。&lt;/p&gt;

&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;

&lt;p&gt;電子工作の技術的には初心者レベルなものばがりですが、
それでも自分で作ったものが動くのは感動です。&lt;/p&gt;

&lt;p&gt;初心者でも玄人でも、自由なものづくりって楽しいですよね！&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Raspberry Piとサーボモータで踊るはにわ制作</title>
      <link>https://dotstud.io/blog/dancing-haniwa-servo-raspi/</link>
      <pubDate>Fri, 01 Jun 2018 10:00:00 +0900</pubDate>
      
      <guid>https://dotstud.io/blog/dancing-haniwa-servo-raspi/</guid>
      
      <description>

&lt;p&gt;あ、どうもはにわと申します。
港町横浜で専門学生やってるものづくりがそこそこ好きなメガネです。&lt;/p&gt;

&lt;p&gt;今回はですねタイトルと名前にあるように動く&lt;strong&gt;┌|∵|┘&lt;/strong&gt;←を作りたいと思うんですよね。&lt;/p&gt;

&lt;p&gt;なぜ作るか……なんですけども&lt;strong&gt;何か大層なことを考えて趣味でものづくりする人ってそうそういない&lt;/strong&gt;と思うんです（┌|∵|┘が作りたいだけ←）。&lt;/p&gt;

&lt;p&gt;今回はRaspberry Piとサーボモータを使って、&lt;strong&gt;踊る┌|∵|┘&lt;/strong&gt;を作ってみます！&lt;/p&gt;

&lt;h2 id=&#34;raspberry-pi-サーボモータ&#34;&gt;Raspberry Pi？サーボモータ？┌|∵|┘？&lt;/h2&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/170/1.png&#34; alt=&#34;1&#34;&gt;

&lt;/center&gt;

「&lt;a href=&#34;https://www.raspberrypi.org/&#34;&gt;&lt;strong&gt;Raspberry Pi&lt;/strong&gt;&lt;/a&gt;」は、Arduinoに似た何でもできると噂のつよいボードです。
強さの秘訣は内部でLinux OSが動いたり、直接ディスプレイやキーボード、マウス等を接続できたりすることで、超小型のパソコンと考えてもらって大丈夫です！&lt;/p&gt;

&lt;p&gt;LANケーブルを接続すればネットにも繋がり、中にはWi-Fiモジュールが搭載されていて無線で繋がるものもあります。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/170/2.png&#34; alt=&#34;2&#34;&gt;

&lt;/center&gt;

「&lt;strong&gt;サーボモータ&lt;/strong&gt;」は、
普通のモータとは違い回転角度・速度を細かく調整することができ、ラジコンの翼の制御やロボットのアームの制御などに使われます。&lt;/p&gt;

&lt;p&gt;PWMという方法で制御するのですが、詳細は、ドキュメントの「&lt;a href=&#34;https://dotstud.io/docs/pulse-width-modulation/&#34;&gt;PWM制御&lt;/a&gt;」を参考にしてください。&lt;/p&gt;

&lt;p&gt;そして&lt;strong&gt;┌|∵|┘&lt;/strong&gt;です！




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/170/3.png&#34; alt=&#34;3&#34;&gt;

&lt;/center&gt;

みなさん知ってますよね！？可愛いですよねうん。説明不要ですようん。&lt;/p&gt;

&lt;h2 id=&#34;今回使うもの-欲しいもの&#34;&gt;今回使うもの、欲しいもの&lt;/h2&gt;

&lt;h3 id=&#34;raspberry-pi3-http-akizukidenshi-com-catalog-g-gm-10414&#34;&gt;&lt;a href=&#34;http://akizukidenshi.com/catalog/g/gM-10414/&#34;&gt;Raspberry Pi3&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;http://akizukidenshi.com/catalog/g/gM-10414/&#34;&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/170/4.png&#34; alt=&#34;4&#34;&gt;

&lt;/center&gt;
&lt;/a&gt;
Raspberry Pi、通称ラズパイです。今回はRaspberry Pi3を使いますが、別に2でもzeroでも大丈夫かと思われます。ラズパイ上で動かす言語は、RaspbianというOS標準のPython3系を使います。&lt;/p&gt;

&lt;h3 id=&#34;マイクロサーボ9g-sg-90-http-akizukidenshi-com-catalog-g-gm-08761&#34;&gt;&lt;a href=&#34;http://akizukidenshi.com/catalog/g/gM-08761/&#34;&gt;マイクロサーボ9g SG-90&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;http://akizukidenshi.com/catalog/g/gM-08761/&#34;&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/170/5.png&#34; alt=&#34;5&#34;&gt;

&lt;/center&gt;
&lt;/a&gt;
安価でお求めやすいサーボモータです。PWMサイクルや制御パルス等色々ありますがそんなことを気にしても物は作れません！とりあえず気にせず行きましょう！&lt;/p&gt;

&lt;h3 id=&#34;ジャンパピン&#34;&gt;ジャンパピン&lt;/h3&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/170/7.png&#34; alt=&#34;7&#34;&gt;

&lt;/center&gt;

各機器をつなぎ合わせるために使用します。うーん説明終わり！&lt;/p&gt;

&lt;p&gt;Amazon等で「&lt;a href=&#34;https://www.amazon.co.jp/s/ref=nb_sb_noss_1?__mk_ja_JP=%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A&amp;amp;url=search-alias%3Daps&amp;amp;field-keywords=%E3%82%B8%E3%83%A3%E3%83%B3%E3%83%91%E3%83%94%E3%83%B3&amp;amp;rh=i%3Aaps%2Ck%3A%E3%82%B8%E3%83%A3%E3%83%B3%E3%83%91%E3%83%94%E3%83%B3&#34;&gt;&lt;strong&gt;ジャンパピン&lt;/strong&gt;&lt;/a&gt;」などと検索してみると、かなり安価で大量に手に入ることがわかります。こんないらねえよ！と思いますよね？私も思います。&lt;/p&gt;

&lt;h3 id=&#34;ブレッドボード&#34;&gt;ブレッドボード&lt;/h3&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/170/6.png&#34; alt=&#34;6&#34;&gt;

&lt;/center&gt;

「&lt;a href=&#34;https://www.amazon.co.jp/s/ref=nb_sb_noss_1?__mk_ja_JP=%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A&amp;amp;url=search-alias%3Daps&amp;amp;field-keywords=%E3%83%96%E3%83%AC%E3%83%83%E3%83%89%E3%83%9C%E3%83%BC%E3%83%89&#34;&gt;&lt;strong&gt;ブレッドボード&lt;/strong&gt;&lt;/a&gt;」と検索するとこんな感じの穴あきの板が手に入ります。ここに先ほどのピン等をさしていきます。&lt;/p&gt;

&lt;p&gt;ブレッドボードの使い方がよくわからない、という方は、ドキュメントの「&lt;a href=&#34;https://dotstud.io/docs/breadboard&#34;&gt;&lt;strong&gt;ブレッドボード&lt;/strong&gt;&lt;/a&gt;」を参照してください。&lt;/p&gt;

&lt;h2 id=&#34;実際に動かす&#34;&gt;実際に動かす&lt;/h2&gt;

&lt;h3 id=&#34;配線&#34;&gt;配線&lt;/h3&gt;

&lt;p&gt;こういった感じに配線していきましょう。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/170/8.png&#34; alt=&#34;8&#34;&gt;

&lt;/center&gt;

モータを動かすにはパワーを使うため通常は別で電源を用意することが多いですが、1個だけでしたらラズパイからの給電で動くので接続していきましょう。&lt;/p&gt;

&lt;p&gt;SG90の黒をラズパイの「&lt;strong&gt;GND&lt;/strong&gt;」へ、SG90の赤はラズパイの「&lt;strong&gt;5V&lt;/strong&gt;」へ、そして黄色をラズパイの任意のピンへ接続します。今回は2番ピンに接続しておきましょう。近いですし。&lt;/p&gt;

&lt;p&gt;慣習的に5Vを赤、GNDを黒、その他はそれぞれ違う色のジャンパで繋ぐと見やすいです。わかりやすさって大事！！&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/170/pin.png&#34; alt=&#34;pin&#34;&gt;

&lt;/center&gt;

ラズパイのボード上にはピン名称の記載がありませんが、「&lt;a href=&#34;https://www.google.co.jp/search?q=raspberry+pi+%E3%83%94%E3%83%B3%E3%82%A2%E3%82%B5%E3%82%A4%E3%83%B3&amp;amp;safe=off&amp;amp;rlz=1C5CHFA_enJP706JP706&amp;amp;source=lnms&amp;amp;tbm=isch&amp;amp;sa=X&amp;amp;ved=0ahUKEwjRkLTTw6rbAhWIx7wKHYGRAMEQ_AUICigB&amp;amp;biw=1163&amp;amp;bih=895&#34;&gt;Raspberry Pi ピンアサイン&lt;/a&gt;」などと検索すると調べることができます。&lt;/p&gt;

&lt;h3 id=&#34;プログラム&#34;&gt;プログラム&lt;/h3&gt;

&lt;p&gt;ラズパイの初期設定等はとても詳しく説明してくださってる方がたくさんいるので割愛します！！！Python3とpipがあればOKです。&lt;/p&gt;

&lt;p&gt;SSH接続とかNotepad++とかで遠隔で書き込むのもありですが、それができる人は自分で頑張ってください。今回はラズパイに直接書き込んでいきましょう！&lt;/p&gt;

&lt;p&gt;ラズパイへ電源、HDMI、キーボードを接続しログイン。&lt;/p&gt;

&lt;p&gt;シェルが起動しましたら&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ pip3 install RPi.GPIO
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;とPython上でGPIOを操作できるライブラリを落とします。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ touch motor_test.py
$ nano motor_test.py
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;でファイルを作成して編集モードにし、以下を記述していきます。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;import RPi.GPIO as GPIO
import time
GPIO.setmode(GPIO.BCM)

gp_out = 2 // SG90の黄色を刺したピン
GPIO.setup(gp_out, GPIO.OUT)
motor = GPIO.PWM(gp_out, 50)
motor.start(0.0)

bot = 2.5
mid = 7.2
top = 12.0

motor.ChangeDutyCycle(bot)
time.sleep(0.5)

motor.ChangeDutyCycle(top)
time.sleep(0.5)

motor.ChangeDutyCycle(mid)
time.sleep(0.5)

GPIO.cleanup()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ctrl + x で終了し、yキーで保存します。&lt;/p&gt;

&lt;h3 id=&#34;確認&#34;&gt;確認&lt;/h3&gt;

&lt;p&gt;プログラムを書き込めたら、動かしてみましょう。配線を確認し次のコマンドを叩きましょう。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ python3 motor_test.py
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;https://dotstud.io/img/blog/170/9.gif&#34; alt=&#34;&#34; /&gt;
おお！動いた！という事で&lt;code&gt;ChangeDutyCycle()&lt;/code&gt;の中身を変えることで好きな角度に変えることができます。とりあえずの指標として0、90、180度をtop、mid、botという変数に入れていますが、直接数値を入力してもOKです。&lt;/p&gt;

&lt;h2 id=&#34;モータを増やす&#34;&gt;モータを増やす。&lt;/h2&gt;

&lt;p&gt;一つのサーボモータを動かすことには成功しました。なので次はもっと増やしてみましょう。&lt;/p&gt;

&lt;p&gt;具体的には上のプログラムの使いまわしで大丈夫です。使うモータ毎に名前とどのピンを使うかを記述し、&lt;code&gt;名前.ChangeDutyCycle()&lt;/code&gt;とすると対応するサーボモータが作動するようになります。&lt;/p&gt;

&lt;h3 id=&#34;配線-1&#34;&gt;配線&lt;/h3&gt;

&lt;p&gt;では全部で3台動くように追加していきましょう！ラズパイからの給電ではSG90を3台も動かせないので、単3電池2本を追加して電力を補強しつつこういった感じに配線します。&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/170/circuit.png&#34; alt=&#34;circuit&#34;&gt;

&lt;/center&gt;


&lt;p&gt;電池の赤（+）をブレッドボードの+列へ、黒（-）をｰ列へ刺します。&lt;/p&gt;

&lt;p&gt;各サーボモータの赤をブレッドボードの+列に、サーボモーターの黒をブレッドボードの-列に、ラズパイのGNDをボードの-列へ接続し電源を確保します。&lt;/p&gt;

&lt;p&gt;そしてサーボモータの黄色はGPIO端子の対応するところ（今回は2、3、4番ピン）にぶっ刺します。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/170/10.png&#34; alt=&#34;10&#34;&gt;

&lt;/center&gt;

Oh…ｺﾞﾁｬｺﾞﾁｬ……&lt;/p&gt;

&lt;h3 id=&#34;プログラム-1&#34;&gt;プログラム&lt;/h3&gt;

&lt;p&gt;さっき書いたプログラムのように記述します。さっきのを書き換えてもOKです！&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;import RPi.GPIO as GPIO
import time
GPIO.setmode(GPIO.BCM)

gp_out = 2
GPIO.setup(gp_out, GPIO.OUT)
right = GPIO.PWM(gp_out, 50)
right.start(0.0)

gp_out = 3
GPIO.setup(gp_out, GPIO.OUT)
left = GPIO.PWM(gp_out, 50)
left.start(0.0)

gp_out = 4
GPIO.setup(gp_out, GPIO.OUT)
chest = GPIO.PWM(gp_out, 50)
chest.start(0.0)

bot = 2.5
mid = 7.2
top = 12.0

right.ChangeDutyCycle(bot)
left.ChangeDutyCycle(bot)
time.sleep(0.5)

chest.ChangeDutyCycle(mid)
time.sleep(0.5)

right.ChangeDutyCycle(top)
chest.ChangeDutyCycle(bot)
time.sleep(0.5)

chest.ChangeDutyCycle(top)
right.ChangeDutyCycle(bot)
left.ChangeDutyCycle(top)
time.sleep(0.5)

chest.ChangeDutyCycle(mid)
right.ChangeDutyCycle(top)
left.ChangeDutyCycle(bot)
time.sleep(0.5)

GPIO.cleanup()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;こんな感じで！もう好きにやっちゃってくださいな。&lt;/p&gt;

&lt;h2 id=&#34;図工&#34;&gt;図工&lt;/h2&gt;

&lt;p&gt;それでは本題である&lt;strong&gt;┌|∵|┘&lt;/strong&gt;を作ります！皆さん童心に帰って好きな素材で作ってください！&lt;/p&gt;

&lt;p&gt;私は今回牛乳パックで作成していきます。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/170/11.png&#34; alt=&#34;11&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;( ＾ω＾)&lt;br /&gt;
≡⊃⊂≡&lt;br /&gt;
こうしてこうして




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/170/12.png&#34; alt=&#34;12&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;( ＾ω＾)&lt;br /&gt;
⊃ .. ⊂&lt;br /&gt;
こうじゃ




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/170/haniwa.png&#34; alt=&#34;haniwa&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;h2 id=&#34;やったぜ&#34;&gt;やったぜ&lt;/h2&gt;

&lt;p&gt;さあさあここまで来たんです！動かしましょうよ！ね！
&lt;strong&gt;┌|∵|┘起動!!!!!&lt;/strong&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/170/14.gif&#34; alt=&#34;&#34; /&gt;
&lt;center&gt;
&lt;font size=&#34;5&#34;&gt;動いたあああああ！躍ったああああああああ！&lt;/font&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
と、いう事で好きにパーツを作ってもらえればどんなものも躍らせられますね……！！踊り自体もPythonで記述しているので、forやifを駆使すれば複雑な踊りだっていけます。ここから皆さんの創造力が試されますぞ！&lt;/p&gt;

&lt;p&gt;それでは長くなりましたがお疲れ様です！皆もなんか動かしてみようぜ！！&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>micro:bit同士で通信してみよう！腕の動きに合わせて光る帽子の作り方</title>
      <link>https://dotstud.io/blog/microbit-flickering-light-hat/</link>
      <pubDate>Tue, 29 May 2018 10:40:00 +0900</pubDate>
      
      <guid>https://dotstud.io/blog/microbit-flickering-light-hat/</guid>
      
      <description>

&lt;p&gt;はじめまして、りんろくです。&lt;/p&gt;

&lt;p&gt;マイコンボード初心者ながらmicro:bitのデザインやサイズ感がすごく好きで、四苦八苦しながらちょっとしたゲームを作ったり、LEDをチカチカさせてみたりしています！&lt;/p&gt;

&lt;p&gt;そんな私ですが、机の上で触っているだけでなく、いつかmicro:bitを外に持ち出せるアイテムとして使えないかなあ……と漠然と思っていました。&lt;/p&gt;

&lt;p&gt;ぼーっとmicro:bitのことを考えていたある日、音楽をやっている知り合いから、数日後のライブに出演するという連絡とともに、&lt;/p&gt;

&lt;p&gt;「ステージから発見できるぐらいの&lt;strong&gt;ちょっと&lt;/strong&gt;目立つアイテムを身につけてきてよ！」&lt;/p&gt;

&lt;p&gt;とのお達しが。&lt;/p&gt;

&lt;p&gt;これはmicro:bitを実戦投入するしかない！この機を逃してはならない！と思いついた私は、その瞬間から動き出しました。&lt;/p&gt;

&lt;p&gt;ということで今回はmicro:bitのチュートリアルも兼ねて、micro:bitを2台使用し、&lt;strong&gt;腕の動きに合わせて光り方を変える帽子を作っていきたい&lt;/strong&gt;と思います！&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/1.png&#34; alt=&#34;1&#34;&gt;

&lt;/center&gt;


&lt;h2 id=&#34;micro-bitとは&#34;&gt;micro:bitとは&lt;/h2&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/2.png&#34; alt=&#34;2&#34;&gt;

&lt;/center&gt;

今回使用する&lt;a href=&#34;http://microbit.org/ja/guide/&#34;&gt;micro:bit&lt;/a&gt;はイギリス発の教育用マイコンボードです。イギリスで11歳と12歳の小学生に無料配布されたことが話題になりました。&lt;/p&gt;

&lt;p&gt;micro:bitには、温度計や加速度センサーを初めとした&lt;a href=&#34;http://microbit.org/ja/guide/features/&#34;&gt;様々な機能&lt;/a&gt;が搭載されており、簡単に制御することができます。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/3.png&#34; alt=&#34;3&#34;&gt;

&lt;/center&gt;

また、micro:bitの特徴の一つとして、様々な機能やイベントを表したブロックを配置することによってプログラムを作成する&lt;strong&gt;ブロックコーディングを採用していること&lt;/strong&gt;が挙げられます（JavaScriptやPythonを用いてコーディングすることも可能です）。&lt;/p&gt;

&lt;p&gt;概要や基本の操作方法はこちらの記事でも紹介しています。


&lt;section class=&#34;link&#34; id=&#34;165&#34;&gt;
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
          &lt;div class=&#34;link_content&#34;&gt;
          &lt;a href=&#34;https://dotstud.io/blog/microbit-getting-started-pokio/&#34;&gt;&lt;/a&gt;
          &lt;img src=&#34;https://dotstud.io/img/blog/165/00_thumbnail.png&#34; alt=&#34;サムネイル&#34;&gt;
          &lt;/div&gt;
          &lt;div class=&#34;link_content&#34;&gt;
            &lt;div class=&#34;link_detail&#34;&gt;
              &lt;div class=&#34;link_title&#34;&gt;
                子供も大人もmicro:bit！基本の操作と初めてのプログラミング
              &lt;/div&gt;
              &lt;div class=&#34;link_date&#34;&gt;
                
                2018-05-14
              &lt;/div&gt;
              &lt;div class=&#34;link_desc&#34;&gt;
                巷で人気なマイコンボードのmicro:bit。安い！早い！楽しい！のプログラミングを楽しみましょう！
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/section&gt;
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
      
      
  
&lt;/section&gt;
&lt;/p&gt;

&lt;h3 id=&#34;micro-bitのここが良い&#34;&gt;micro:bitのここが良い！&lt;/h3&gt;

&lt;p&gt;先に言及した通り、micro:bitはイギリスでは無料配布された有名なマイコンボードです。しかしながら日本では未だ広く知られているとは言えません。ではなぜ私はmicro:bitを使うのか、なぜ紹介記事を書いているのか。&lt;/p&gt;

&lt;p&gt;それにはもちろん理由があります。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h4 id=&#34;とにかく安い&#34;&gt;■ とにかく安い！&lt;/h4&gt;

&lt;p&gt;ArduinoやRaspberry Piといった、現在の主流と言えるマイコンボードが3000円〜6000円程度の価格設定であるのに対し、&lt;strong&gt;micro:bitは2000円前後で買えます！&lt;/strong&gt; とりあえず買ってからどう使うか考えましょう！&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h4 id=&#34;webコーディングのため環境構築不要&#34;&gt;■ Webコーディングのため環境構築不要！&lt;/h4&gt;

&lt;p&gt;多くのマイコンボードは、プログラミングする際に制御用ソフトウェアのインストールなどの手順を踏む必要があります。&lt;/p&gt;

&lt;p&gt;しかしながら！&lt;/p&gt;

&lt;p&gt;Webコーディングの場合、ネット環境さえあればWebページにアクセスするだけでプログラムを作り始めることができるのです！&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h4 id=&#34;ledがいっぱいある&#34;&gt;■ LEDがいっぱいある！&lt;/h4&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/4.png&#34; alt=&#34;4&#34;&gt;

&lt;/center&gt;


&lt;p&gt;LEDが25個搭載されており、自分の好きなマークや文字列を表現することができます！また、光らせたいLEDを自分で選択するほか、いくつかのマークは初めから用意されているため簡単に制御できます！&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
以上3点のポイントが、私がmicro:bitを愛する理由です。&lt;/p&gt;

&lt;p&gt;そうなのです。とにかく「&lt;strong&gt;ハードルが低い&lt;/strong&gt;」という点においてmicro:bitは非常に優秀なのです！&lt;/p&gt;

&lt;p&gt;この記事は、micro:bitの諸機能のうち、最も難しい（ように思われるであろう）通信機能に焦点を当てています。&lt;/p&gt;

&lt;p&gt;私もmicro:bitを購入して、様々なプログラムについて触れたあと、通信機能だけが難解であるように感じました。しかし実際にプログラムを作成してみると、そんなことはないのです。&lt;/p&gt;

&lt;p&gt;この記事を読み終わり、自分の手で通信機能を制御したとき、きっとmicro:bitが「触れやすい」マイコンボードであると感じるはずです。&lt;/p&gt;

&lt;h2 id=&#34;全体の流れ&#34;&gt;全体の流れ&lt;/h2&gt;

&lt;p&gt;今回は送信用、受信用としてmicro:bit2台を準備します。&lt;/p&gt;

&lt;p&gt;送信側のmicro:bitは手に持ち、腕を振った際の振動を検知、2種類の信号を送信します。それに対して受信側のmicro:bitは頭（帽子）に装着し、受け取った信号に合わせて光り方を変えます。&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/5.png&#34; alt=&#34;5&#34;&gt;

&lt;/center&gt;


&lt;h3 id=&#34;使ったもの&#34;&gt;使ったもの&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;micro:bit 2台（送信用・受信用）&lt;/li&gt;
&lt;li&gt;バッテリー付属型ケース（&lt;a href=&#34;https://www.switch-science.com/catalog/3177/&#34;&gt;micro:bit用 bat:bitバッテリーケース&lt;/a&gt;）&lt;/li&gt;
&lt;li&gt;保護用ケース（&lt;a href=&#34;https://www.sengoku.co.jp/mod/sgk_cart/detail.php?code=EEHD-56JT&#34;&gt;MI:pro Case for micro:bit&lt;/a&gt;）&lt;/li&gt;
&lt;li&gt;単3電池ホルダー（&lt;a href=&#34;https://www.sengoku.co.jp/mod/sgk_cart/detail.php?code=EEHD-55YE&#34;&gt;単3形×2本&lt;/a&gt;）&lt;/li&gt;
&lt;li&gt;micro:bitを貼り付けるための帽子&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;手首につける側のmicro:bitは余計なコード類が邪魔にならないよう、バッテリーが一体型のケース&lt;a href=&#34;https://www.switch-science.com/catalog/3177/&#34;&gt;&lt;strong&gt;bat:bit&lt;/strong&gt;&lt;/a&gt;を利用します。&lt;/p&gt;

&lt;p&gt;帽子に貼り付ける側は、micro:bitの保護のために&lt;a href=&#34;https://www.sengoku.co.jp/mod/sgk_cart/detail.php?code=EEHD-56JT&#34;&gt;&lt;strong&gt;MI:pro Case for micro:bit&lt;/strong&gt;&lt;/a&gt;というケースを利用しました。バッテリー付属型のbat:bitは背面が電池ケースになっていて帽子への貼り付けが難しいと感じたため、&lt;strong&gt;取り外し可能な単3電池ホルダーから給電を行うこちらのケース&lt;/strong&gt;を採用しました。&lt;/p&gt;

&lt;p&gt;重量の分散もできて一石二鳥といった感じです。&lt;/p&gt;

&lt;h2 id=&#34;2つのmicro-bitで通信する方法&#34;&gt;2つのmicro:bitで通信する方法&lt;/h2&gt;

&lt;p&gt;手に持ったmicro:bitを送信側とし、帽子にくっつけたmicro:bitを受信側として細かい仕様を決めていきます！&lt;/p&gt;

&lt;p&gt;micro:bitでは2つの通信機能が用意されています。&lt;/p&gt;

&lt;h3 id=&#34;標準搭載の無線-radio&#34;&gt;標準搭載の無線（radio）&lt;/h3&gt;

&lt;p&gt;この無線機能はmicro:bit同士の通信を想定したものとなっており、基本的にPCや他デバイスへの信号の送受信はできません。
グループを設定するだけで通信を開始できるため、他の通信方式と比較して利用しやすいというメリットがあります。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/6.png&#34; alt=&#34;6&#34;&gt;

&lt;/center&gt;

無線機能に関して用意されているブロックはピンク色に統一されています。&lt;/p&gt;

&lt;h3 id=&#34;ble-bluetooth-low-eenergy&#34;&gt;BLE（Bluetooth Low Eenergy）&lt;/h3&gt;

&lt;p&gt;BLEではBluetooth対応のPCやスマートフォンとの通信が可能で、音楽の再生・停止などの特殊なコマンドを使用することができます。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/7.png&#34; alt=&#34;7&#34;&gt;

&lt;/center&gt;

ブロックコーディングの場合、BLEのブロックは拡張機能として実装されているため、パッケージの追加を行う必要があります。&lt;/p&gt;

&lt;p&gt;また、&lt;strong&gt;無線機能とBLEを同時に利用することはできない&lt;/strong&gt;ため、注意が必要です。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
各通信機能について簡単にまとめると以下のようになります。&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;center&#34;&gt;&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;通信先&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;その他の特徴&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;無線通信&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;micro:bitのみ&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;通信するための設定が簡単&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;BLE&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;PC、スマートフォンなどのBluetooth対応デバイス&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;特殊な命令を送信できる&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;ということで、今回は2台のmicro:bit間のみでの通信を想定しているため、&lt;strong&gt;無線通信を採用&lt;/strong&gt;します！&lt;/p&gt;

&lt;h2 id=&#34;制作&#34;&gt;制作&lt;/h2&gt;

&lt;p&gt;今回はブロックコーディングを利用してプログラムを作成します。ブロックコーディングでは、様々な役割を持ったブロックをドラッグ＆ドロップで配置し、プログラムを作成していきます。&lt;/p&gt;

&lt;h3 id=&#34;javascriptブロックコーディング&#34;&gt;JavaScriptブロックコーディング&lt;/h3&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/8.png&#34; alt=&#34;8&#34;&gt;

&lt;/center&gt;

今回は、送信側の揺れ方（腕の振り方）によって受信側のアイコン表示を変更したいので、右に傾いたときは大きなハートを表示して、左に傾いたときには小さなハートを表示するようなプログラムを作成します。&lt;/p&gt;

&lt;p&gt;それでは送信側と受信側、それぞれのコードを&lt;a href=&#34;https://makecode.microbit.org/#&#34;&gt;JavaScriptブロックエディタ&lt;/a&gt;で作っていきましょう！&lt;/p&gt;

&lt;h3 id=&#34;送信側を右に傾けたときのコード&#34;&gt;送信側を右に傾けたときのコード&lt;/h3&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/9.png&#34; alt=&#34;9&#34;&gt;

&lt;/center&gt;


&lt;p&gt;送信側のmicro:bitは、本体が右に傾いているか、左に傾いているかを検知して、それに応じた信号を無線通信によって送信します。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/10.png&#34; alt=&#34;10&#34;&gt;

&lt;/center&gt;

初めに無線のグループ設定をします。「入力」タブから&lt;code&gt;最初だけ&lt;/code&gt;ブロックを配置し、「無線」タブより&lt;code&gt;無線のグループを設定&lt;/code&gt;ブロックを&lt;code&gt;最初だけ&lt;/code&gt;の下に繋げるようにドラッグ&amp;amp;ドロップして配置します。これにより、同じグループに登録されたmicro:bitと通信を行うことができるようになります。&lt;/p&gt;

&lt;p&gt;続いて、送信側のプログラムでは右に揺れた場合と左に揺れた場合で異なる信号を送信する必要があるので、&lt;code&gt;右に傾けたとき&lt;/code&gt;と&lt;code&gt;左に傾けたとき&lt;/code&gt;のブロックをそれぞれ配置し、送信する信号について考えます。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/11.png&#34; alt=&#34;11&#34;&gt;

&lt;/center&gt;

「入力」のタブより&lt;code&gt;ゆさぶられたとき&lt;/code&gt;ブロックを取り出し、『ゆさぶられた』ボタンをクリックして、&lt;code&gt;右に傾けたとき&lt;/code&gt;に変更します。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/12.png&#34; alt=&#34;12&#34;&gt;

&lt;/center&gt;

「無線」タブより&lt;code&gt;無線で文字列を送信&lt;/code&gt;ブロックを繋げます。このブロックでは、送信したい文字列を右側のフォームに直接入力することができます。信号を受信したとき、送信側のmicro:bitが右に傾いたことがわかればよいので、送信する文字列は&amp;rdquo;right&amp;rdquo;とします。&lt;/p&gt;

&lt;p&gt;また、きちんと右に傾いたことを検知し、文字列の送信が行われたかどうかを確認する必要があるので、信号の送信後100ミリ秒だけチェックマークを表示するよう設定します。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/13.png&#34; alt=&#34;13&#34;&gt;

&lt;/center&gt;

「基本」タブより&lt;code&gt;アイコンを表示&lt;/code&gt;、&lt;code&gt;一時停止（ミリ秒）&lt;/code&gt;、&lt;code&gt;表示を消す&lt;/code&gt;の3ブロックを取り出し、順に配置します。アイコンを表示ブロックも右側のアイコン部分をクリックすることで光り方を変更することができます。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/14.png&#34; alt=&#34;14&#34;&gt;

&lt;/center&gt;

ということで右に傾けたときのプログラムが完成しました。&lt;/p&gt;

&lt;h3 id=&#34;送信側を左に傾けたときのコード&#34;&gt;送信側を左に傾けたときのコード&lt;/h3&gt;

&lt;p&gt;同じようにして左に傾けたときのプログラムも作る……と見せかけて、ブロックエディタでもコピー＆ペーストができるので利用します。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/15.png&#34; alt=&#34;15&#34;&gt;

&lt;/center&gt;

右クリック（Macなら二本指でトラックパッドをクリック）から「複製する」を選択しましょう。&lt;/p&gt;

&lt;p&gt;あとはこれまでやってきたことの復習です。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/16.png&#34; alt=&#34;16&#34;&gt;

&lt;/center&gt;

『右に傾けた』ボタンをクリックして&lt;code&gt;左に傾けたとき&lt;/code&gt;ブロックに変更、今度は左に傾けたときのプログラムなので、&lt;code&gt;無線で文字列を送信&lt;/code&gt;ブロックの文字列を&amp;rdquo;right&amp;rdquo;から&amp;rdquo;left&amp;rdquo;に書き換えます。&lt;/p&gt;

&lt;p&gt;これにて送信側のコードは完成です！&lt;/p&gt;

&lt;p&gt;あとは頑張って書いたコードをダウンロードしてmicro:bitに送りましょう！&lt;/p&gt;

&lt;h3 id=&#34;micro-bitに送信側のプログラムを書き込む&#34;&gt;micro:bitに送信側のプログラムを書き込む&lt;/h3&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/17.png&#34; alt=&#34;17&#34;&gt;

&lt;/center&gt;

エディタの左下にあるファイル名フォームに名前を入力しますが、ここで注意！　今回は送信側と受信側、2つのプログラムを作成するため、&lt;strong&gt;どちらが送信側及び受信側であるか判別できるように&lt;/strong&gt;名前をつける必要があります。&lt;/p&gt;

&lt;p&gt;「sender」など、わかりやすい名前をつけてダウンロードボタンをクリックします。&lt;/p&gt;

&lt;p&gt;続いてUSBケーブルでmicro:bitをコンピュータに接続します。接続が完了すると、Macであればファインダーに、Windowsであればエクスプローラに「MICROBIT」という名前でドライブとして表示されます。&lt;/p&gt;

&lt;p&gt;ダウンロードしたhexファイルを「MICROBIT」にドラッグ&amp;amp;ドロップすることで書き込みが始まり、背面のLEDが点滅します。点滅が終わったら書き込みが完了し、プログラムが実行状態になります。&lt;/p&gt;

&lt;p&gt;&lt;font size=&#34;2&#34;&gt;
注意：micro:bitは&lt;strong&gt;プログラムの保存機能を持たないため、一度書き込んだプログラムを取り出すことはできません&lt;/strong&gt;。
&lt;/font&gt;&lt;/p&gt;

&lt;h3 id=&#34;受信側のコード&#34;&gt;受信側のコード&lt;/h3&gt;

&lt;p&gt;さてさて、次は受信側です。受信側ではどのような機能を実装しなければならないか、今一度確認しましょう。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/18.png&#34; alt=&#34;18&#34;&gt;

&lt;/center&gt;

受け取った信号が右に傾けたことを示すものであった場合、大きなハートをLEDに表示して、左に傾けたことを示すものであった場合は小さなハートをLEDに表示します。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/19.png&#34; alt=&#34;19&#34;&gt;

&lt;/center&gt;

これまで配置したブロックを削除し、新しくプログラムを作成する際は、画面左上の「プロジェクト」より「新しいプロジェクト」を選択します。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/20.png&#34; alt=&#34;20&#34;&gt;

&lt;/center&gt;

というわけで、全てのブロックがリセットされました。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/21.png&#34; alt=&#34;21&#34;&gt;

&lt;/center&gt;

それでは、送信側と同じように無線のグループ設定を行います。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/22.png&#34; alt=&#34;22&#34;&gt;

&lt;/center&gt;

まずは「無線」タブより、&lt;code&gt;無線で受信したとき receivedString&lt;/code&gt;ブロックを配置します。このブロックは、「無線で信号が送られてきたとき、下に繋がっているブロックを実行する」という通常の働きのほかに、&lt;strong&gt;受信した信号の中身をreceivedStringという変数に入れる&lt;/strong&gt;、という働きをします。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/23.png&#34; alt=&#34;23&#34;&gt;

&lt;/center&gt;

次に「論理」タブから&lt;code&gt;もし　真　なら　でなければ&lt;/code&gt;ブロックを取り出します。このブロックは条件を設定し、場合によって分岐させるブロックです。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;もし「受信した文字列」が「&amp;rdquo;right&amp;rdquo;」&lt;/li&gt;
&lt;li&gt;なら「大きなハートを表示」&lt;/li&gt;
&lt;li&gt;でなければ「小さなハートを表示」&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;今回は、上記のような条件分岐を作成します。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/24.png&#34; alt=&#34;24&#34;&gt;

&lt;/center&gt;

条件式として&lt;code&gt;0 = 0&lt;/code&gt;ブロックを利用します。このブロックは左右に数字同士あるいは文字列同士を繋げることができ、その内容を比較します。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/25.png&#34; alt=&#34;25&#34;&gt;

&lt;/center&gt;

受信した文字列は&lt;code&gt;receivedString&lt;/code&gt;という変数の中に一時的に保存されているので、ここでは変数&lt;code&gt;receivedString&lt;/code&gt;と、&amp;rdquo;right&amp;rdquo;という文字列を比較します。&lt;/p&gt;

&lt;p&gt;&lt;code&gt;receivedString&lt;/code&gt;ブロックは「変数」タブの中から取り出しましょう。&amp;rdquo;right&amp;rdquo;は「高度なブロック」タブを開き、「文字列」タブの中から空白の文字列を取り出します。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/26.png&#34; alt=&#34;26&#34;&gt;

&lt;/center&gt;

「文字列」ブロックの中に&amp;rdquo;right&amp;rdquo;と入力して条件式に組み込みましょう。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/27.png&#34; alt=&#34;27&#34;&gt;

&lt;/center&gt;

続いてLEDの光り方の設定です。受信した信号が&amp;rdquo;right&amp;rdquo;のとき大きなハートを表示して、それ以外のときは小さなハートを表示するよう設定すればよいので、このようになります。&lt;/p&gt;

&lt;p&gt;これにて受信側のプログラムも完成です。送信側と同じように「receiver」など判別可能な名前をつけてダウンロードし、受信側のmicro:bitに取り込みましょう。&lt;/p&gt;

&lt;h2 id=&#34;ケースに入れてmicro-bitを保護&#34;&gt;ケースに入れてmicro:bitを保護&lt;/h2&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/28.png&#34; alt=&#34;28&#34;&gt;

&lt;/center&gt;

受信側のmicro:bitを直で帽子に貼り付けるとショートする可能性があるので、保護ケースとして&lt;a href=&#34;https://www.sengoku.co.jp/mod/sgk_cart/detail.php?code=EEHD-56JT&#34;&gt;MI:pro Case for micro:bit&lt;/a&gt;を使用します。&lt;/p&gt;

&lt;p&gt;組み立て方法については&lt;a href=&#34;https://www.youtube.com/watch?time_continue=128&amp;amp;v=HYfLv07PGrE&#34;&gt;公式動画&lt;/a&gt;がYouTubeにアップロードされているのでここでは割愛します。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/166/29.png&#34; alt=&#34;29&#34;&gt;

&lt;/center&gt;

送信側micro:bitも同じく損傷対策として一体型ケースの&lt;a href=&#34;https://www.sengoku.co.jp/mod/sgk_cart/detail.php?code=EEHD-57F3&#34;&gt;bat:bit&lt;/a&gt;を装着しました。こちらも&lt;a href=&#34;https://www.youtube.com/watch?v=hF2uFlwebSA&#34;&gt;公式の組み立て解説動画&lt;/a&gt;がYouTubeにアップロードされています。&lt;/p&gt;

&lt;p&gt;私の場合は一体型ケースを装着したmicro:bitをそのまま持って振りましたが、リストバンドに貼り付けるなどしてもよいかもしれません。&lt;/p&gt;

&lt;h2 id=&#34;実際に動かしてみる&#34;&gt;実際に動かしてみる&lt;/h2&gt;

&lt;p&gt;受信側micro:bitを帽子にクリップして送信側を左右に傾けてみます。
&lt;center&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/H3X1HQ2n8XE&#34; frameborder=&#34;0&#34; allow=&#34;autoplay; encrypted-media&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;/center&gt;
右に傾けると大きなハート、左に傾けると小さなハートを表示させることができました！&lt;/p&gt;

&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;

&lt;p&gt;非常にシンプルなプログラムではありましたが、radio通信の設定が非常に簡単で使いやすく、スムーズに通信できたのでmicro:bit愛が深まりました。次はBluetooth Low Energyによる通信を試して、micro:bitをより身近なものにしていきたいですね！&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>子供も大人もmicro:bit！基本の操作と初めてのプログラミング</title>
      <link>https://dotstud.io/blog/microbit-getting-started-pokio/</link>
      <pubDate>Mon, 14 May 2018 10:00:00 +0900</pubDate>
      
      <guid>https://dotstud.io/blog/microbit-getting-started-pokio/</guid>
      
      <description>

&lt;p&gt;こんにちは、ポキオ（&lt;a href=&#34;https://twitter.com/pokiiio&#34;&gt;@pokiiio&lt;/a&gt;）です。&lt;/p&gt;

&lt;p&gt;今回は巷で人気なマイコンボードの&lt;strong&gt;micro:bit&lt;/strong&gt;をプログラミングをしてみようと思います。&lt;/p&gt;

&lt;p&gt;「 &lt;strong&gt;&lt;em&gt;えっ、プログラミングって難しいんでしょ？&lt;/em&gt;&lt;/strong&gt; 」って思われるかも知れません。&lt;/p&gt;

&lt;p&gt;プログラミングと聞くと、&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;必要なソフトのダウンロードが面倒&lt;/li&gt;
&lt;li&gt;ソフトやドライバーのインストールが面倒&lt;/li&gt;
&lt;li&gt;プログラミングの知識が必要そう&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;と想像してしまいがちですが、&lt;u&gt;micro:bitなら簡単にできてしまうんです！&lt;/u&gt;&lt;/p&gt;

&lt;p&gt;micro:bitの故郷であるイギリスでは、11歳・12歳の小学生に教育目的で無償で配布されていて、プログラミングの知識がなくても簡単に始められるマイコンボードになっています。&lt;/p&gt;

&lt;p&gt;小学生だけでなく、普段プログラミングをしない&lt;strong&gt;大人でもハマること間違い無しのmicro:bit&lt;/strong&gt;を、サクッと触ってみましょう！&lt;/p&gt;

&lt;h2 id=&#34;micro-bitとは&#34;&gt;micro:bitとは？&lt;/h2&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/165/microbit.png&#34; alt=&#34;microbit&#34;&gt;

&lt;/center&gt;

micro:bitはBBC（英国放送協会）が開発したシングルボードコンピュータで、日本国内でも2000円前後で購入可能です。&lt;strong&gt;&lt;em&gt;お父さんのお小遣いでも買えそうですね！&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;教育目的と謳っていますが、侮ることなかれ。思った以上に高性能です。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;CPU：ARM Cortex-M0&lt;/li&gt;
&lt;li&gt;インターフェイス：Bluetooth Low Energy（BLE）、USB&lt;/li&gt;
&lt;li&gt;入出力：3つのI/Oリング、20ピンのエッジコネクター、25個の赤色LED、2個のボタン&lt;/li&gt;
&lt;li&gt;センサー：光、温度、加速度、磁力&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;スマホなどにも採用されている、低消費電力な通信方式であるBLEに最初から対応しているので、スマホと通信したり、micro:bit同士で通信を行ったりということも可能です。&lt;/p&gt;

&lt;p&gt;また、端子（I/Oリング）はミノムシクリップを挟んで通電できるようになっているので、半田ごて不要で電子工作が楽しめます。また、LEDはマトリックス上に配置されていて、それをつかって文字やマークを表示させることも可能です。&lt;/p&gt;

&lt;p&gt;入出力も豊富で拡張性が高い上に、各種センサー類も最初からついているので、micro:bitを買えば色々楽しめてしまうのです！&lt;/p&gt;

&lt;h2 id=&#34;micro-bitを触ってみよう&#34;&gt;micro:bitを触ってみよう！&lt;/h2&gt;

&lt;p&gt;micro:bitにはデフォルトでサンプルプログラムが入っています。まずはそれを実行してみましょう！&lt;/p&gt;

&lt;p&gt;&lt;font size=&#34;2&#34;&gt;
（モバイルバッテリーをUSB接続をしたり、別売りのバッテリーモジュールを使って給電をしたりする方法がありますが、今回は&lt;strong&gt;PCとUSB接続することでPCから給電&lt;/strong&gt;してみます。）
&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/165/setup.png&#34; alt=&#34;setup&#34;&gt;

&lt;/center&gt;

サンプルプログラムでは、下記のように、ボタンを使ったり、マトリックスLEDを光らせたり、micro:bitを傾けたり、micro:bitの主な機能を試すことが出来ます。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;マトリックスLEDが点滅した後「HELLO」と表示される&lt;/li&gt;
&lt;li&gt;Aボタンを押すように促されるので、Aボタンを押す&lt;/li&gt;
&lt;li&gt;Bボタンも押すように促されるので、Bボタンを押す&lt;/li&gt;
&lt;li&gt;「SHAKE!」micro:bitを振る&lt;/li&gt;
&lt;li&gt;「CHASE THE DOT!」micro:bitを傾けて点滅するドットを追う&lt;/li&gt;
&lt;li&gt;「NOW GET CODING!」と表示されてチュートリアル終了&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;このサンプルプログラムですが、&lt;a href=&#34;https://support.microbit.org/support/solutions/articles/19000021613-reset-the-micro-bit-to-factory-defaults&#34;&gt;このページ&lt;/a&gt;からダウンロード可能なので、いつでもMiro:bitを初期化することができます。&lt;/p&gt;

&lt;h2 id=&#34;micro-bitのプログラミングをしてみよう&#34;&gt;micro:bitのプログラミングをしてみよう！&lt;/h2&gt;

&lt;p&gt;次に、実際にプログラミングして、micro:bitを動かしてみます！&lt;/p&gt;

&lt;p&gt;micro:bitのプログラミング方法は主に3つです。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;JavaScript Block Editor&lt;/li&gt;
&lt;li&gt;Python Editor&lt;/li&gt;
&lt;li&gt;スマホアプリ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;今回は、環境構築不要で、ブラウザだけで簡単にプログラミングができる、&lt;strong&gt;JavaScript Block Editor&lt;/strong&gt; を使ってみようと思います。&lt;/p&gt;

&lt;h3 id=&#34;エディターを開いてみる&#34;&gt;エディターを開いてみる&lt;/h3&gt;

&lt;p&gt;一般的なエディターは、ソフトをダウンロードして必要なものをインストールするなど、準備に時間がかかることがありますが、 &lt;strong&gt;JavaScript Block Editor&lt;/strong&gt; はウェブブラウザでサイトにアクセスするだけでプログラミングが開始できます！&lt;/p&gt;

&lt;p&gt;実際にアクセスして、エディターを開いてみましょう。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/165/top.png&#34; alt=&#34;top&#34;&gt;

&lt;/center&gt;

&lt;a href=&#34;https://makecode.microbit.org/#lang=ja&#34;&gt;このサイト&lt;/a&gt;にアクセスすると、すぐに準備が完了します。&lt;/p&gt;

&lt;p&gt;エディターは大きく3つのパートに分かれています。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/165/emulator.png&#34; alt=&#34;emulator&#34;&gt;

&lt;/center&gt;

まず、一番左側にあるのがエミュレーターです。エディターでプログラミングをすると、このエミュレーターで自動的にプログラムが実行され、プログラムの動作イメージを確認することができます。&lt;/p&gt;

&lt;p&gt;LEDの光らせ方の確認はもちろん、マウスでエミュレーターをドラッグすると傾きを変えられたり、音を出すプログラムを書いたときは、その音の確認もエディター上で可能です。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/165/menu.png&#34; alt=&#34;menu&#34;&gt;

&lt;/center&gt;

次に、エディター中央にあるのがブロックの一覧です。誰でもプログラミングができるように、Micro:bitに命令ができる処理の塊が、ブロックという単位で表現されています。これらのブロックをつなげることで、シンプルなものから複雑なものまで、知識不要でプログラミングができるエディターなのです。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/165/editor.png&#34; alt=&#34;editor&#34;&gt;

&lt;/center&gt;

エディターの右側にあるエリアは、そのブロックを配置してプログラミングする場所です。初めから存在する &lt;strong&gt;「最初だけ」&lt;/strong&gt; と &lt;strong&gt;「ずっと」&lt;/strong&gt; というブロックに、他のブロックをつなげていくことでプログラミングができます。&lt;/p&gt;

&lt;p&gt;この &lt;strong&gt;「最初だけ」&lt;/strong&gt; は、一度だけ実行させたいブロックをつなげていき、 &lt;strong&gt;「ずっと」&lt;/strong&gt; は繰り返し実行させたいブロックをつなげます。&lt;/p&gt;

&lt;h3 id=&#34;エディターでプログラミングしてみよう&#34;&gt;エディターでプログラミングしてみよう&lt;/h3&gt;

&lt;p&gt;それでは、簡単なプログラミングをしてみましょう。micro:bitのLEDにハートマークを表示させてみましょう。&lt;/p&gt;

&lt;p&gt;まずエディターのメニューの[基本]から[アイコンを表示]というブロックを探します。&lt;/p&gt;

&lt;p&gt;このブロックをプログラミングエリアの &lt;strong&gt;「最初だけ」&lt;/strong&gt; のブロックにドラッグ・アンド・ドロップして、ブロックとブロックをつなげます。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/165/heart1.png&#34; alt=&#34;heart1&#34;&gt;

&lt;/center&gt;

アイコンを表示するという処理を、micro:bit起動時に一度だけ実行します。これにより、好きなアイコンをmicro:bitで表示できます。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/165/heart2.png&#34; alt=&#34;heart2&#34;&gt;

&lt;/center&gt;

ブロック同士が正しくつながると、エミュレーター上でハートマークが表示されているはずです。&lt;/p&gt;

&lt;p&gt;デフォルトのアイコンはハートマークになっていますが、[アイコンを表示]のブロックのプルダウンメニューを開くと様々なアイコンを選択でき、それを表示することもできます。&lt;/p&gt;

&lt;p&gt;プログラミングはこれで終了です。&lt;/p&gt;

&lt;h3 id=&#34;作成したプログラムをmicro-bitで動かしてみよう&#34;&gt;作成したプログラムをmicro:bitで動かしてみよう&lt;/h3&gt;

&lt;p&gt;エディター下部の &lt;strong&gt;「題名未設定」&lt;/strong&gt; と書かれているところに、プログラム名を自由に入力し、[ダウンロード]をクリックします。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/165/heart3.png&#34; alt=&#34;heart3&#34;&gt;

&lt;/center&gt;

すると、拡張子が.hexなファイルが自動でダウンロードされます。ファイル名には、さきほどのプログラム名が含まれます。このファイルをmicro:bitに転送します。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/165/heart4.png&#34; alt=&#34;heart4&#34;&gt;

&lt;/center&gt;

micro:bitをパソコンとUSB接続すると、 &lt;strong&gt;MICROBIT&lt;/strong&gt; というドライブとして認識されます。ダウンロードしてきた.hexファイルを、このドライブ直下にコピーすることでプログラムの書き込みが行えます。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/165/heart5.png&#34; alt=&#34;heart5&#34;&gt;

&lt;/center&gt;

書き込みが完了すると、自動でmicro:bitが再起動します。すると、ハートマークを表示するプログラムが実行されます。&lt;/p&gt;

&lt;p&gt;今回紹介したのはブロックを積み重ねることによってプログラムする方法でしたが、それを&lt;strong&gt;JavaScriptコードと相互変換&lt;/strong&gt;したり、&lt;strong&gt;最初からJavaScriptやPythonを使ってプログラミング&lt;/strong&gt;することも可能です。&lt;/p&gt;

&lt;p&gt;&lt;u&gt;自分のレベルに応じたプログラミング方法も選べるのも、micro:bitの魅力の一つ&lt;/u&gt;です。&lt;/p&gt;

&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;

&lt;p&gt;今回は、簡単なプログラムの作成と実行をしてみました。&lt;/p&gt;

&lt;p&gt;micro:bitには、LED以外にボタンや種々のセンサー、またGPIOもあります。それらを使えば、「&lt;strong&gt;ボタンを押すとLEDで表示させているマークを変える&lt;/strong&gt;」「&lt;strong&gt;micro:bitを振ったら文字を表示する&lt;/strong&gt;」などの、すこし凝ったプログラミングも可能です。&lt;/p&gt;

&lt;p&gt;また、スピーカーを端子に接続して音を鳴らしたり、モーターとモータードライバーを接続してラジコンを作ることだって可能で、無限の楽しみ方ができます。&lt;/p&gt;

&lt;p&gt;次回はmicro:bitにスピーカーを接続して、音を鳴らしてみましょう！&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>非接触ICタグで遊ぼう！ArduinoでRFIDリーダRC522を使う方法</title>
      <link>https://dotstud.io/blog/arduino-use-rfid-reader/</link>
      <pubDate>Wed, 09 May 2018 08:30:26 +0900</pubDate>
      
      <guid>https://dotstud.io/blog/arduino-use-rfid-reader/</guid>
      
      <description>

&lt;p&gt;こんにちは、ちゃんとくです。&lt;/p&gt;

&lt;p&gt;みなさんは「&lt;strong&gt;認証機能&lt;/strong&gt;」というとどんなイメージを持つでしょうか？&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/auth.png&#34; alt=&#34;auth&#34;&gt;

&lt;/center&gt;


&lt;p&gt;Webページを開いて、IDとパスワードを入力して、ログインして……。「&lt;strong&gt;めんどくさい！もっと簡単に認証したい！&lt;/strong&gt;」ということもありますよね。&lt;/p&gt;

&lt;p&gt;そんなときは&lt;strong&gt;非接触ICタグ&lt;/strong&gt;を使って、&lt;strong&gt;ピッとして認証できる装置&lt;/strong&gt;を作ってみましょう！&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/touch.png&#34; alt=&#34;touch&#34;&gt;

&lt;/center&gt;

今回はArduinoとRFIDリーダを使って、非接触ICタグをかざすと登録されたユーザかどうか判定するデバイスを作ってみます！&lt;/p&gt;

&lt;p&gt;※ただし今回の実装は&lt;strong&gt;セキュリティ対策を施していない&lt;/strong&gt;ので、ご家庭内や趣味の範囲でお試しください。&lt;/p&gt;

&lt;h2 id=&#34;rfid-nfc-非接触ic&#34;&gt;RFID？NFC？非接触IC？&lt;/h2&gt;

&lt;p&gt;「&lt;strong&gt;RFID&lt;/strong&gt;」とは、電磁界や電波を用いて情報を埋め込んだRFタグとやりとりする無線通信技術です。「&lt;strong&gt;NFC&lt;/strong&gt;」はRFタグの規格の一つで、正式名称は&lt;strong&gt;Near Field Communication&lt;/strong&gt;（近距離無線通信）と言います。&lt;/p&gt;

&lt;p&gt;非接触ICは、&lt;strong&gt;読み取り端末にかざすことで通信ができる電池レスのIC&lt;/strong&gt;です（電池内臓の場合もあります）。&lt;/p&gt;

&lt;p&gt;世界で利用されているMifare（マイフェア）カードやTaspoでは「ISO/IEC 14443 Type A」というNFCの規格、日本で利用されている交通系ICカードでは「FeliCa」という規格が主に利用されています。&lt;/p&gt;

&lt;p&gt;今回利用するRFIDリーダライタのRFID-RC522では、&lt;strong&gt;FeliCa規格のICは読み取ることができません&lt;/strong&gt;。FeliCaを利用したい場合はSony製の&lt;a href=&#34;https://www.sony.co.jp/Products/felica/consumer/index.html&#34;&gt;PaSoRi&lt;/a&gt;やFeliCaリーダライタ&lt;a href=&#34;https://www.switch-science.com/catalog/353/&#34;&gt;RC-S620S&lt;/a&gt;などを使ってみてください。&lt;/p&gt;

&lt;h2 id=&#34;今回使うもの&#34;&gt;今回使うもの&lt;/h2&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/use.png&#34; alt=&#34;use&#34;&gt;

&lt;/center&gt;

今回はArduinoまたは互換ボード（写真はGenuino 101）、RFIDリーダライタRC522、その他に判定用のLEDやブレッドボード、ジャンパワイヤを利用します。&lt;/p&gt;

&lt;h3 id=&#34;arduino-互換ボード&#34;&gt;Arduino/互換ボード&lt;/h3&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/genuino.png&#34; alt=&#34;genuino&#34;&gt;

&lt;/center&gt;

Arduinoや互換ボードを利用すると、RC522ライブラリをそのまま使えて簡単です。写真ではGenuino 101（※）を使っていますが、今回使うピンの配置はArduino Unoと全く同じです。&lt;/p&gt;

&lt;p&gt;Arduino Mega、Nano v3、Microなども利用できますが、ピンの接続箇所が変わるので今回利用する&lt;a href=&#34;https://github.com/miguelbalboa/rfid&#34;&gt;&lt;strong&gt;MFRC522ライブラリ&lt;/strong&gt;&lt;/a&gt;の&lt;a href=&#34;https://github.com/miguelbalboa/rfid#pin-layout&#34;&gt;Pin Layout&lt;/a&gt;を参考に配線してください。&lt;/p&gt;

&lt;p&gt;&lt;font size=&#34;2&#34;&gt;※Genuino 101はBluetooth搭載のIntel製ボードで、色が好きなので多用しています。ディスコンになってしまったけど……。&lt;/font&gt;&lt;/p&gt;

&lt;h3 id=&#34;rfid-rc522&#34;&gt;RFID-RC522&lt;/h3&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/rc522set.png&#34; alt=&#34;rc522set&#34;&gt;

&lt;/center&gt;

安価で入手しやすいRFIDリーダライタです。&lt;a href=&#34;https://github.com/miguelbalboa/rfid&#34;&gt;ライブラリ&lt;/a&gt;側でドキュメントとサンプルコードが用意されていて、Arduinoで扱いやすいです。過出力や電波の不要輻射を防ぐため、3.3Vで利用します。&lt;/p&gt;

&lt;p&gt;※RFID-RC522では、&lt;strong&gt;FeliCa規格のICは読み取ることができません&lt;/strong&gt;。FeliCaを利用したい場合はSony製の&lt;a href=&#34;https://www.sony.co.jp/Products/felica/consumer/index.html&#34;&gt;PaSoRi&lt;/a&gt;やFeliCaリーダライタ&lt;a href=&#34;https://www.switch-science.com/catalog/353/&#34;&gt;RC-S620S&lt;/a&gt;などを使ってみてください。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/rc522.png&#34; alt=&#34;rc522&#34;&gt;

&lt;/center&gt;

例えばAmazonで「&lt;strong&gt;RC522&lt;/strong&gt;」を検索すると、&lt;u&gt;価格帯の違うものがたくさんでてきます&lt;/u&gt;。&lt;strong&gt;お届け時期&lt;/strong&gt;や&lt;strong&gt;発送元&lt;/strong&gt;（Amazon.co.jpからだと安心かも）、&lt;strong&gt;送料&lt;/strong&gt;、&lt;strong&gt;レビュー&lt;/strong&gt; などに注意して購入しましょう！&lt;/p&gt;

&lt;p&gt;ちゃんとくは急いでいたので、Amazon.co.jpが発送する翌日受け取りできるものを購入しました。&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/solder.png&#34; alt=&#34;solder&#34;&gt;

&lt;/center&gt;


&lt;p&gt;ピンヘッダは未実装の状態で届くので、好きな角度の方をはんだづけしておきます（かっこいい！と思ってくの字型のピンヘッダを使いましたが、タグによってはジャンパが邪魔してタッチしづらいです……）。&lt;/p&gt;

&lt;h3 id=&#34;rfid-nfcタグ&#34;&gt;RFID/NFCタグ&lt;/h3&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/nfc.png&#34; alt=&#34;nfc&#34;&gt;

&lt;/center&gt;

こちらもAmazonで「&lt;strong&gt;NFCタグ&lt;/strong&gt;」などと検索してみると、かなり安価で手に入ることがわかります。ステッカーを使えば、手持ちのキーホルダーなどを簡単にキーにすることができますね！&lt;/p&gt;

&lt;p&gt;RC522のセットを購入した場合はカードとキーホルダーがついてきますし、「&lt;strong&gt;とりあえず試したいだけ&lt;/strong&gt;」「&lt;strong&gt;認識させたいICタグが既にある&lt;/strong&gt;」という場合は購入しなくて大丈夫です。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/shiokara.png&#34; alt=&#34;shiokara&#34;&gt;

&lt;/center&gt;

ちゃんとくは、&lt;strong&gt;シオカラーズの2人（Splatoon）&lt;/strong&gt;に協力してもらおうと思います！！&lt;/p&gt;

&lt;p&gt;これは任天堂のamiiboというフィギュアなんですが、&lt;strong&gt;ゲーム用のNFCを搭載&lt;/strong&gt;していてRFIDリーダで情報を読み取ることができます。&lt;/p&gt;

&lt;h2 id=&#34;識別子を取得する&#34;&gt;識別子を取得する&lt;/h2&gt;

&lt;h3 id=&#34;配線&#34;&gt;配線&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/miguelbalboa/rfid&#34;&gt;MFRC522ライブラリ&lt;/a&gt;の&lt;a href=&#34;https://github.com/miguelbalboa/rfid#pin-layout&#34;&gt;&lt;strong&gt;Pin Layout&lt;/strong&gt;&lt;/a&gt;を参考に、ArduinoとRC522を接続していきます。Arduino Mega、Nano v3、Microなども利用できますが、ピンの接続箇所が変わるのでライブラリのREADMEを参照してください。&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;Signal&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;MFRC522 Reader/PCD Pin&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Arduino Uno Pin&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;RST/Reset&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;RST&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;9&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;SPI SS&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;SDA(SS)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;10&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;SPI MOSI&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;MOSI&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;11 / ICSP-4&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;SPI MISO&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;MISO&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;12 / ICSP-1&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;SPI SCK&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;SCK&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;13/ICSP-3&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;上記の表の通り、RC522のSignalの名前の部分を見て、対応するArduino Unoのピンに接続します。&lt;/p&gt;

&lt;p&gt;その他、RC522の「GND」はArduinoの「GND」へ、RC522の「3.3V」はArduinoの「3.3V」へ接続します。&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/circuit1.png&#34; alt=&#34;circuit1&#34;&gt;

&lt;/center&gt;


&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/map.png&#34; alt=&#34;map&#34;&gt;

&lt;/center&gt;

慣習的に3.3Vを赤、GNDを黒、その他はそれぞれ違う色のジャンパで繋ぐと見やすいです。書いてある通りに繋ぐだけなので、落ち着いて接続しましょう！（IRQというピンは今回は使用しません）&lt;/p&gt;

&lt;p&gt;ブレッドボードの使い方がよくわからない、という方は、ドキュメントの「&lt;a href=&#34;https://dotstud.io/docs/breadboard/&#34;&gt;&lt;strong&gt;ブレッドボード&lt;/strong&gt;&lt;/a&gt;」を参照してください。&lt;/p&gt;

&lt;h3 id=&#34;プログラム&#34;&gt;プログラム&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://www.arduino.cc/en/main/software&#34;&gt;Arduino IDE&lt;/a&gt;というソフトを使い、Arduinoにプログラムを書き込みます。インストール方法は、ドキュメントの「&lt;a href=&#34;https://dotstud.io/docs/arduinoide-setup/&#34;&gt;&lt;strong&gt;Arduino IDEをPCにインストール&lt;/strong&gt;&lt;/a&gt;」を参照してください。&lt;/p&gt;

&lt;p&gt;まずArduino IDEに、今回利用する&lt;a href=&#34;https://github.com/miguelbalboa/rfid&#34;&gt;&lt;strong&gt;MFRC522ライブラリ&lt;/strong&gt;&lt;/a&gt;をインストールします。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/step1.png&#34; alt=&#34;step1&#34;&gt;

  ─ ライブラリマネージャを開く

&lt;/center&gt;

[スケッチ] &amp;gt; [ライブラリをインクルード] &amp;gt; [ライブラリを管理]を選択します。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/step2.png&#34; alt=&#34;step2&#34;&gt;

  ─ MFRC522ライブラリをインストール

&lt;/center&gt;

「MFRC」と検索し、MFRC522ライブラリをインストールします。&lt;/p&gt;

&lt;p&gt;エディタには下記のプログラムを貼り付けます。ライブラリの&lt;a href=&#34;https://github.com/miguelbalboa/rfid/blob/master/examples/DumpInfo/DumpInfo.ino&#34;&gt;DumpInfoのサンプルコード&lt;/a&gt;をそのまま利用しています。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#include &amp;lt;SPI.h&amp;gt;
#include &amp;lt;MFRC522.h&amp;gt;

constexpr uint8_t RST_PIN = 9;          // Configurable, see typical pin layout above
constexpr uint8_t SS_PIN = 10;         // Configurable, see typical pin layout above

MFRC522 mfrc522(SS_PIN, RST_PIN);  // Create MFRC522 instance

void setup() {
		Serial.begin(9600);		// Initialize serial communications with the PC
		while (!Serial);		// Do nothing if no serial port is opened (added for Arduinos based on ATMEGA32U4)
		SPI.begin();			// Init SPI bus
		mfrc522.PCD_Init();		// Init MFRC522
		mfrc522.PCD_DumpVersionToSerial();	// Show details of PCD - MFRC522 Card Reader details
		Serial.println(F(&amp;quot;Scan PICC to see UID, SAK, type, and data blocks...&amp;quot;));
}

void loop() {
	// Look for new cards
	if ( ! mfrc522.PICC_IsNewCardPresent()) {
			return;
	}

	// Select one of the cards
	if ( ! mfrc522.PICC_ReadCardSerial()) {
			return;
	}

	// Dump debug info about the card; PICC_HaltA() is automatically called
	mfrc522.PICC_DumpToSerial(&amp;amp;(mfrc522.uid));
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/step3.png&#34; alt=&#34;step3&#34;&gt;

&lt;/center&gt;

[ツール] &amp;gt; [ボード]は「&lt;strong&gt;Arduino/Genuino 101&lt;/strong&gt;」、[シリアルポート]は&lt;strong&gt;Arduinoを接続したUSBポート&lt;/strong&gt;を選択します（Windowsの方はCOMポート番号）。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/step4.png&#34; alt=&#34;step4&#34;&gt;

&lt;/center&gt;

左上の「➡︎」をクリックしてプログラムを書き込みます。&lt;/p&gt;

&lt;h3 id=&#34;確認&#34;&gt;確認&lt;/h3&gt;

&lt;p&gt;プログラムを書き込めたら、タグの情報を確認します。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/monitor.png&#34; alt=&#34;monitor&#34;&gt;

&lt;/center&gt;

[ツール] &amp;gt; [シリアルモニタ]を開きます。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/step5.png&#34; alt=&#34;step5&#34;&gt;

&lt;/center&gt;

シリアルモニタを開いた状態でRFIDリーダにタグをかざすと、タグの情報が表示されます。&lt;/p&gt;

&lt;p&gt;登録したいタグをかざし、「&lt;strong&gt;Card UID:&lt;/strong&gt;」以降の部分（画像では消してある部分）をコピーしておきましょう。&lt;/p&gt;

&lt;h2 id=&#34;識別子を元に動作を変える&#34;&gt;識別子を元に動作を変える&lt;/h2&gt;

&lt;p&gt;識別子を取得したNFCタグを「&lt;strong&gt;認証するユーザ&lt;/strong&gt;」、それ以外のタグを「&lt;strong&gt;認証しないユーザ&lt;/strong&gt;」として、Arduino側の動作を変えてみます。&lt;/p&gt;

&lt;p&gt;



&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/goal.png&#34; alt=&#34;goal&#34;&gt;

&lt;/center&gt;

認証するユーザの場合はLEDを青に、認証しないユーザの場合はLEDを赤に光らせるプログラムを作ってみます。&lt;/p&gt;

&lt;h3 id=&#34;配線-1&#34;&gt;配線&lt;/h3&gt;

&lt;p&gt;回路に、青と赤のLEDを追加します。配線するときは、一旦Arduinoを電源から外します。




&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/circuit2.png&#34; alt=&#34;circuit2&#34;&gt;

&lt;/center&gt;
&lt;/p&gt;

&lt;p&gt;青いLEDのアノード（＋側・脚が長い方）を8番ピンに、赤いLEDのアノードをアナログの3番ピンに繋ぎ、カソード（ー側）をそれぞれGNDに接続します。&lt;/p&gt;





&lt;center style=&#34;color: #585858; font-size: 95%; padding-bottom: 10px;&#34;&gt;
&lt;img src=&#34;https://dotstud.io/img/blog/162/map2.png&#34; alt=&#34;map2&#34;&gt;

  ─ 配線した状態（上の図とLEDの向きが逆になっています）

&lt;/center&gt;


&lt;h3 id=&#34;プログラム-1&#34;&gt;プログラム&lt;/h3&gt;

&lt;p&gt;先ほど取得した&lt;strong&gt;タグの識別子とマッチしたら青いLED、それ以外は赤いLEDを光らせるプログラム&lt;/strong&gt;を作成します。&lt;/p&gt;

&lt;p&gt;&lt;code&gt;#defin UID&lt;/code&gt;の部分は、ご自身が取得したタグの識別子に置き換えてください。また、今回赤いLEDはアナログ出力に接続しているので、&lt;code&gt;AnalogWrite()&lt;/code&gt;を利用して光量を0〜255で指定します。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#include &amp;lt;SPI.h&amp;gt;
#include &amp;lt;MFRC522.h&amp;gt;

constexpr uint8_t RST_PIN = 9;
constexpr uint8_t SS_PIN = 10;

#define UID &amp;quot;xx xx xx xx xx xx xx&amp;quot; // 取得した識別子を記述

int led_blue = 8;
int led_red = 3;

MFRC522 mfrc522(SS_PIN, RST_PIN);
MFRC522::MIFARE_Key key;

void setup() {
	  Serial.begin(9600);
	  pinMode(led_blue, OUTPUT);
	  pinMode(led_red, OUTPUT);
	  while (!Serial);
	  SPI.begin();
	  mfrc522.PCD_Init();
	  mfrc522.PCD_DumpVersionToSerial();
	  Serial.println(F(&amp;quot;Scan PICC to see UID, SAK, type, and data blocks...&amp;quot;));

	  dump_byte_array(key.keyByte, MFRC522::MF_KEY_SIZE);
}

void loop() {
    if ( ! mfrc522.PICC_IsNewCardPresent()) {
      	return;
    }
    if ( ! mfrc522.PICC_ReadCardSerial()) {
      	return;
    }

    String strBuf[mfrc522.uid.size];
    for (byte i = 0; i &amp;lt; mfrc522.uid.size; i++) {
      	strBuf[i] =  String(mfrc522.uid.uidByte[i], HEX);
      	if(strBuf[i].length() == 1){
        	strBuf[i] = &amp;quot;0&amp;quot; + strBuf[i];
      	}
    }

    String strUID = strBuf[0] + &amp;quot; &amp;quot; + strBuf[1] + &amp;quot; &amp;quot; + strBuf[2] + &amp;quot; &amp;quot; + strBuf[3] + &amp;quot; &amp;quot; + strBuf[4] + &amp;quot; &amp;quot; + strBuf[5] + &amp;quot; &amp;quot; + strBuf[6];
    if ( strUID.equalsIgnoreCase(UID) ){
	      Serial.println(&amp;quot;chantoku&amp;quot;);
	      digitalWrite(led_blue, HIGH); // 青いLEDを光らせる
	      delay(1000); // 1秒待つ
	      digitalWrite(led_blue, LOW); // 青いLEDを消す
    } else {
	      Serial.println(&amp;quot;error!&amp;quot;);
	      analogWrite(led_red, 180); // 赤いLEDを光らせる
	      delay(1000); // 1秒待つ
	      analogWrite(led_red, 0); // 赤いLEDを消す
    }
}

void dump_byte_array(byte *buffer, byte bufferSize) {
    for (byte i = 0; i &amp;lt; bufferSize; i++) {
        Serial.print(buffer[i] &amp;lt; 0x10 ? &amp;quot; 0&amp;quot; : &amp;quot; &amp;quot;);
        Serial.print(buffer[i], HEX);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;先ほどと同様の手順でArduinoにプログラムを書き込みます。これで完成です！&lt;/p&gt;

&lt;h2 id=&#34;試してみる&#34;&gt;試してみる&lt;/h2&gt;

&lt;p&gt;さっそく登録したタグを識別できるか試してみましょう。&lt;/p&gt;

&lt;p&gt;アオリちゃん（ピンクの子）が登録したタグ、ホタルちゃん（緑の子）は登録していないタグです。
&lt;a href=&#34;https://gyazo.com/2a2e957605e230f3d539f331c718f9b4&#34;&gt;&lt;img src=&#34;https://i.gyazo.com/2a2e957605e230f3d539f331c718f9b4.gif&#34; alt=&#34;https://gyazo.com/2a2e957605e230f3d539f331c718f9b4&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;登録したアオリちゃんをタッチした時は青、登録していないホタルちゃんをタッチした時は赤を光らせることができました！&lt;/p&gt;

&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;

&lt;p&gt;非接触通信、無線通信というと難しいイメージがありますが、かなり簡単に実装することができました！この機能を使ってタッチした時間を記録したり、タグの識別を利用して電気をつける場所を変えたりと、いろいろなことに活用できそうです。&lt;/p&gt;

&lt;p&gt;次回は&lt;strong&gt;Wi-Fiに接続してタッチした時間を記録するデバイスの実装方法&lt;/strong&gt;を紹介してみたいと思います。&lt;/p&gt;

&lt;p&gt;それではまた！&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>