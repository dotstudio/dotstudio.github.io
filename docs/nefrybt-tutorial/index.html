<!doctype html><html lang=ja><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Nefry BTのチュートリアル"><meta name=author content="dotstudio Inc."><meta content=https://dotstud.io/img/docs/%!s(&lt;nil&gt;)/00_eyecatch.png><meta itemprop=name content="チュートリアル | dotstudio"><meta itemprop=image content=https://dotstud.io/img/docs/%!s(&lt;nil&gt;)/00_eyecatch.png><meta property=og:title content="チュートリアル | dotstudio"><meta property=og:locale content=ja_JP><meta property=og:type content=article><meta property=og:url content=https://dotstud.io/docs/nefrybt-tutorial/><meta property=og:site_name content=dotstudio（ドットスタジオ）><meta property=og:image content=https://dotstud.io/img/docs/%!s(&lt;nil&gt;)/00_eyecatch.png><meta property=og:image:secure_url content=https://dotstud.io/img/docs/%!s(&lt;nil&gt;)/00_eyecatch.png><meta property=og:description content="Nefry BTのチュートリアル"><meta property=article:author content=https://www.facebook.com/dotstud10/><meta property=fb:app_id content=296336307370435><meta property=fb:pages content=1013196712108753><meta name=twitter:card content=summary_large_image><meta name=twitter:image:src content=https://dotstud.io/img/docs/%!s(&lt;nil&gt;)/00_eyecatch.png><meta name=twitter:site content=@dotstud_io><meta name=twitter:url content=https://dotstud.io/docs/nefrybt-tutorial/><meta name=twitter:description content="Nefry BTのチュートリアル"><meta name=twitter:title content="チュートリアル | dotstudio"><meta name=twitter:creator content=@dotstud_io><meta name=google-site-verification content=oW2fcSG1fFnkDoRCGFJ0IGGebtBr8FjV2twoFMd7Skc><title>チュートリアル | dotstudio</title><link rel=stylesheet href=/css/loader.css><link rel=stylesheet href=/css/master.css><link rel=stylesheet href=/css/icon-font.css><link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel=stylesheet><link rel="shortcut icon" type=image/png href=/img/resources/favicon.png><link href=//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css rel=preload as=style onload="this.rel='stylesheet'"><link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel=preload as=style onload="this.rel='stylesheet'"><link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel=preload as=style onload="this.rel='stylesheet'"><link href=/css/lib/hljs.css rel=preload as=style onload="this.rel='stylesheet'"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-K5TRM9Q');</script><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-5922216421588455",enable_page_level_ads:true});</script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K5TRM9Q" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><div id=fb-root></div><script>(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="//connect.facebook.net/ja_JP/sdk.js#xfbml=1&version=v2.8";fjs.parentNode.insertBefore(js,fjs);}(document,'script','facebook-jssdk'));</script><header><svg style="position:absolute;width:0;height:0;overflow:hidden" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><symbol id="icon-arrow-right" viewBox="0 0 32 32"><title>arrow-right</title><path class="path1" fill="none" stroke="#000" stroke-width="4.5714" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="miter" d="M5.143 5.143l10.349 10.349"/><path class="path2" fill="none" stroke="#000" stroke-width="4.5714" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="miter" d="M5.143 26.857l10.349-10.349"/><path class="path3" fill="none" stroke="#000" stroke-width="4.5714" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="miter" d="M16.571 26.857 26.92 16.508"/><path class="path4" fill="none" stroke="#000" stroke-width="4.5714" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="miter" d="M16.571 5.143 26.92 15.492"/></symbol><symbol id="icon-hamburger" viewBox="0 0 60 32"><title>hamburger</title><path class="path1" fill="none" stroke="gray" stroke-width="7.1111" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="miter" d="M3.556 3.556h53.333"/><path class="path2" fill="none" stroke="gray" stroke-width="7.1111" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="miter" d="M3.556 28.444h53.333"/></symbol><symbol id="icon-logo-mark" viewBox="0 0 32 32"><title>logo-mark</title><path class="path1" d="M19.731 28.8H0v-19.699h19.731zM1.53 27.302h16.672v-16.672h-16.672z"/><path class="path2" d="M32 22.899h-19.731v-19.699H32zM13.798 21.37H30.47V4.698h-16.672z"/></symbol><symbol id="icon-social-facebook" viewBox="0 0 32 32"><title>social-facebook</title><path class="path1" d="M30.1.12h-28.46c-.974.011-1.76.804-1.76 1.78.0.0.0.0.0.0v28.46c0 .983.797 1.78 1.78 1.78h15.32v-12.4h-4.16v-4.82h4.16v-3.58c-.02-.179-.031-.386-.031-.596.0-3.203 2.597-5.8 5.8-5.8.152.0.302.006.45.017-.016-.001-.013-.001-.009-.001 1.3.0 2.582.073 3.844.214l-.155 4.286h-2.54c-2 0-2.36.96-2.36 2.36v3.1h4.76l-.62 4.8h-4.12v12.4h8.12c.983.0 1.78-.797 1.78-1.78v-28.44c0-.983-.797-1.78-1.78-1.78z"/></symbol><symbol id="icon-social-github" viewBox="0 0 32 32"><title>social-github</title><path class="path1" d="M16 .4c-.001.0-.002.0-.004.0-8.837.0-16 7.163-16 16 0 7.028 4.531 12.997 10.831 15.147.913.173 1.213-.307 1.213-.747s-.04-1.38-.04-2.8c-4.44 1.06-5.38-2-5.38-2-.308-.987-.937-1.798-1.763-2.33-1.477-1.01.103-.99.103-.99 1.055.144 1.941.76 2.451 1.624.607 1.039 1.701 1.715 2.953 1.715.6.0 1.164-.155 1.653-.428.062-.836.437-1.58 1.002-2.13-3.559-.401-7.279-1.781-7.279-8.001-.001-.032-.001-.069-.001-.106.0-1.621.624-3.096 1.645-4.198-.181-.526-.283-1.135-.283-1.769.0-.85.184-1.657.514-2.383s1.325-.404 4.385 1.676c1.199-.341 2.577-.537 4-.537s2.801.196 4.107.562c2.953-2.026 4.293-1.666 4.293-1.666.31.683.49 1.481.49 2.321.0.688-.121 1.348-.343 1.959 1.03 1.058 1.654 2.533 1.654 4.154.0.037.0.075-.001.112.0 6.134-3.74 7.494-7.3 7.894.685.69 1.108 1.641 1.108 2.69.0.088-.003.175-.009.261.001 2.128.001 3.848.001 4.368s.28.92 1.1.78c6.413-2.183 10.944-8.152 10.944-15.18.0-8.837-7.163-16-16-16-.015.0-.031.0-.046.0z"/></symbol><symbol id="icon-social-twitter" viewBox="0 0 32 32"><title>social-twitter</title><path class="path1" d="M10 29c.036.0.078.0.12.0 10.25.0 18.56-8.31 18.56-18.56.0-.042.0-.085.0-.127.0-.274.0-.554.0-.834 1.312-.959 2.414-2.113 3.289-3.431-1.07.454-2.347.82-3.686.984 1.293-.819 2.312-2.084 2.804-3.587-1.184.679-2.577 1.234-4.062 1.539-1.286-1.244-2.976-2.027-4.849-2.027-3.634.0-6.58 2.946-6.58 6.58.0.518.06 1.022.173 1.506-5.473-.309-10.286-2.887-13.523-6.813-.587.917-.919 2.059-.919 3.278.0 2.258 1.137 4.25 2.871 5.435-1.063-.025-2.07-.325-2.95-.822l.032.017c0 .027-.001.058-.001.09.0 3.163 2.239 5.803 5.218 6.423-.479.156-1.078.242-1.696.242-.432.0-.854-.042-1.263-.121.908 2.637 3.319 4.512 6.175 4.567-2.208 1.746-5.039 2.8-8.116 2.8-.013.0-.027.0-.04.0-.566-.018-1.104-.068-1.633-.149 2.897 1.868 6.353 2.984 10.068 3.009z"/></symbol></defs></svg><div class=header><span class=logo><a href=/><svg id="icon-logo"><use xlink:href="#icon-logo-mark"/></a></span><div class=menu><input type=checkbox id=menu-toggle>
<label for=menu-toggle class=label-toggle><svg class="icon-hamburger"><use xlink:href="#icon-hamburger"/></label></input><ul><li class=menu-item><a href=/blog>Blog</a></li><li class=menu-item><a href=/docs>Docs</a></li><li class=menu-item><a href=/shop>Shop</a></li><li class=menu-item><a href=/members>Members</a></li><li class=menu-item><a href=/service>Service</a></li><li class=menu-item><a href=/about>About</a></li></ul></div></div></header><article class=docs-single><div class=side><div class=nav>　　<ul><li><a href=https://dotstud.io/docs/nefrybt/>Nefry BTとは</a></li><li><a href=https://dotstud.io/docs/nefrybt-getting-started/>Nefry BTの始め方</a></li><li><a href=https://dotstud.io/docs/nefrybt-link/>関連リンク（情報の調べ方）</a></li><li style=padding-top:10px;font-size:110%>--- セットアップ ---</li><li><a href=https://dotstud.io/docs/nefrybt-setup-wifi/>Wi-Fi情報を設定</a></li><li><a href=https://dotstud.io/docs/nefrybt-setup-ip-address/>IPアドレスを確認</a></li><li><a href=https://dotstud.io/docs/nefrybt-setup-display/>ディスプレイの取り付け</a></li><li><a href=https://dotstud.io/docs/nefrybt-setup-revision/>リビジョンを確認</a></li><li><a href=https://dotstud.io/docs/nefrybt-setup-arduino-ide/>環境構築（Arduino IDE）</a></li><li style=padding-top:10px;font-size:110%>--- 基本機能 ---</li><li><a href=https://dotstud.io/docs/nefrybt-basic-portal/>Nefryポータル</a></li><li><a href=https://dotstud.io/docs/nefrybt-basic-led/>内蔵LEDを光らせる</a></li><li><a href=https://dotstud.io/docs/nefrybt-basic-switch/>内蔵スイッチを使う</a></li><li class=wip>ディスプレイに表示する <span>[WIP]</span></li><li style=padding-top:10px;font-size:110%>--- 初期プログラム ---</li><li><a href=https://dotstud.io/docs/nefrybt-default/>初期プログラム（初期化方法）</a></li><li><a href=https://dotstud.io/docs/nefrybt-default-line-notify/>ノンプログラミングでLINE連携</a></li><li><a href=https://dotstud.io/docs/nefrybt-default-ifttt/>ノンプログラミングでIFTTT連携</a></li><li style=padding-top:10px;font-size:110%>--- プログラムの書き込み ---</li><li><a href=https://dotstud.io/docs/nefrybt-program-serial/>シリアル通信で書き込む</a></li><li><a href=https://dotstud.io/docs/nefrybt-program-zip/>Wi-Fi経由で書き込む</a></li><li style=padding-top:10px;font-size:110%>--- 入門向け ---</li><li><a href=https://dotstud.io/docs/nefrybt-beginner-led/>LEDを点滅させる</a></li><li class=wip>LEDをゆらゆら点滅させる <span>[WIP]</span></li><li class=wip>サーボモータを動かす <span>[WIP]</span></li><li style=padding-top:10px;font-size:110%>--- ライブラリ ---</li><li><a href=https://dotstud.io/docs/nefrybt-library/>Nefryライブラリについて</a></li><li><a href=https://dotstud.io/docs/nefrybt-library-version/>ライブラリのバージョニング</a></li><li><a href=https://dotstud.io/docs/nefrybt-library-wifi/>Wi-Fi関連の関数</a></li><li><a href=https://dotstud.io/docs/nefrybt-library-datastore/>DataStore関連の関数</a></li><li><a href=https://dotstud.io/docs/nefrybt-library-hardware/>ハードウェア関連の関数</a></li><li><a href=https://dotstud.io/docs/nefrybt-library-console/>Console関連の関数</a></li><li><a href=https://dotstud.io/docs/nefrybt-library-others/>その他の便利な関数</a></li><li class=wip>外部ライブラリ <span>[WIP]</span></li><li style=padding-top:10px;font-size:110%>--- 各種通信 ---</li><li><a href=https://dotstud.io/docs/nefrybt-network-http-post/>HTTP通信でリクエストを投げる</a></li><li class=wip>HTTP通信でNefryのデータを取得する <span>[WIP]</span></li><li><a href=https://dotstud.io/docs/nefrybt-network-mqtt/>MQTT通信</a></li><li><a href=https://dotstud.io/docs/nefrybt-bluetooth/>Bluetooth / BLE通信</a></li><li style=padding-top:10px;font-size:110%>--- Groveモジュール ---</li><li class=wip>ボタン（デジタル入力） <span>[WIP]</span></li><li class=wip>LED（デジタル出力） <span>[WIP]</span></li><li class=wip>ブザー <span>[WIP]</span></li><li class=wip>音センサ <span>[WIP]</span></li><li class=wip>温湿度センサ <span>[WIP]</span></li><li style=padding-top:10px;font-size:110%>--- サービス連携 ---</li><li class=wip>Ambient <span>[WIP]</span></li><li class=wip>Milkcocoa <span>[WIP]</span></li><li class=wip>Enebular <span>[WIP]</span></li><li><a href=https://dotstud.io/docs/nefrybt-service-firebase/>Firebase</a></li><li style=padding-top:10px;font-size:110%>--- 便利な機能 ---</li><li><a href=https://dotstud.io/docs/nefrybt-conv-change-ssid/>SSIDを変更する</a></li><li class=wip>Nefry BTで環境変数を使う <span>[WIP]</span></li><li style=padding-top:10px;font-size:110%>--- エラーが起きたとき ---</li><li><a href=https://dotstud.io/docs/nefrybt-error-handling-1/>ライブラリアップデート後の書き込みエラー</a></li><li><a href=https://dotstud.io/docs/nefrybt-error-handling-2/>コンパイルは成功するのに書き込みが失敗する</a></li><li><a href=https://dotstud.io/docs/nefrybt-error-faq/>困ったときは</a></li><li class=selected><a href=https://dotstud.io/docs/nefrybt-tutorial/>チュートリアル</a></li><li><a href=https://dotstud.io/docs/nefrybt-kit/>Nefry BTキット</a></li></ul></div></div><div class=main><div class=title><h1 class=jp>チュートリアル</h1><div class=line></div><span class=en>Nefry BT tutorial</span></div><img class=eyecatch src alt><div class="content markdown"><p>NefryBTのハンズオンの記事になります。Arduinoも触ったことのないような初心者を対象としています。</p><p><a href=https://qiita.com/wamisnet/items/306ce54840ab2382d753>NefryBTでできること</a>は別の記事にまとまっています。</p><h2 id=nefrybtの開発環境を整えよう>NefryBTの開発環境を整えよう！</h2><h3 id=arduino-ideをインストールしよう>Arduino IDEをインストールしよう</h3><ul><li>Windows：<a href=http://nefry.studio/ArduinoIDE%E3%81%AE%E7%92%B0%E5%A2%83%E3%82%92%E6%95%B4%E3%81%88%E3%82%88%E3%81%86/>Nefryの環境を整えよう</a></li><li>Mac：<a href=https://dotstud.io/docs/arduinoide-setup/>Arduino IDEをPCにインストール</a></li></ul><h3 id=arduinoideにnefrybtの環境を構築しよう>ArduinoIDEにNefryBTの環境を構築しよう</h3><p>Nefry BTのライブラリバージョンは、 メジャーバージョン、マイナーバージョン、パッチバージョンに分かれています。</p><ul><li>メジャーバージョン - 大きな変更</li><li>マイナーバージョン - 機能追加などの更新</li><li>パッチバージョン - バグ修正など</li></ul><p>例えばv1.2.3の場合、最初の1がメジャーバージョン、次の2がマイナーバージョン、最後の3がパッチバージョンとしています。</p><p>また、 安定版と開発版を分けていて、マイナーバージョンが偶数か奇数かで分けています。安定版がv1.2系、開発版がv1.1系などとなります。その次は安定版が1.4系、開発版がv1.3系となり、以降も偶数と奇数でのアップデートとなります。</p><p>参考 : <a href=https://dotstud.io/docs/nefrybt-library/>NefryBTのライブラリ</a></p><p>基本的には偶数のものをインストールしてください。現在(2018/1/21)では1.2.0が最も最新です。</p><p>参考：<a href=https://dotstud.io/docs/nefrybt-arduino-ide-setup/>Nefry BT向けのArduino IDEセットアップ方法</a></p><h2 id=arduinoideでプログラムを書くために知っておくこと>ArduinoIDEでプログラムを書くために知っておくこと</h2><p>先ほどの手順でインストールしたArduinoIDEを使ってNefryBTの上で動くプログラムを作成します。</p><h3 id=arduinoのプログラムって>Arduinoのプログラムって？</h3><p>NefryBTのプログラムはArduinoのプログラムと同じようにかけます。</p><p>ArduinoIDEが起動するとプログラムを入力するところに初めからこのようなプログラムが書いてあります。</p><pre><code class=language-c++>void setup(){

}

void loop(){

}
</code></pre><p><img src=https://wamisnet.github.io/pic/ren/pic015.png alt></p><p>簡単に説明していきます。</p><pre><code class=language-c++>void setup()
</code></pre><p>ここの部分では起動時に一度だけ行われる処理を書きます。 例えば、入出力ピンの設定や温度センサなどセンサ類の初期設定などを入力します。</p><pre><code class=language-c++>void loop()
</code></pre><p>ここの部分では起動中ずっと繰り返し行われる処理を書きます。 例えば、LEDの点滅やセンサーデータの取得などを入力します。</p><p>NefryBTではこのsetupとloopをうまく活用してプログラムを書いていきます。</p><p><img src=https://wamisnet.github.io/pic/ren/pic025.png alt></p><p>参考 : <a href=http://nefry.studio/Nefry%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E6%9B%B8%E3%81%93%E3%81%86/>Nefryのプログラムを書こう</a></p><h2 id=ledを点滅させてみよう>LEDを点滅させてみよう！</h2><p>Arduinoの基礎を学んだところでLEDを点滅させるLチカと呼ばれるハードウエア入門してみましょう！</p><p>まずは一度だけLEDを点滅させてみましょう！
一度だけなので<code>void setup()</code>にLEDを点滅させるプログラムを書きます。
LEDの制御をするためには、<code>digitalWrite</code>という関数を呼び出し、制御します。
&gt;関数の詳細については<a href="http://www.musashinodenpa.com/arduino/ref/index.php?f=0&amp;pos=2025">こちら</a></p><p>関数の引数を確認すると、<code>digitalWrite(LED,LOW);</code>としたときに消灯、<code>digitalWrite(LED,HIGH);</code>としたときに点灯となります。
それをプログラムで表現してみます。</p><pre><code class=language-c++>#define LED D6
//LEDをD6につないでください
void setup() {
  pinMode(LED, OUTPUT);//あらかじめLEDを制御できるように出力モードにしておきます
  digitalWrite(LED,HIGH);
  delay(5000);//5秒待つ
  digitalWrite(LED,LOW);
  delay(5000);
}

void loop() {
}
</code></pre><p>一度だけLチカできたでしょうか？
見損ねた場合、リセットボタンを押すとプログラムを再度初めから行うことができます。</p><p>それでは次のステップとして、LEDを何度も点滅させてみましょう！
何度もなので、今度は<code>void loop()</code>の中で同じ処理を書いてみます。</p><pre><code class=language-c++>#define LED D6
//LEDをD6につないでください
void setup() {
  pinMode(LED, OUTPUT);//あらかじめLEDを制御できるように出力モードにしておきます
}

void loop() {
  digitalWrite(LED,HIGH);
  delay(5000);//5000ms//5秒待つ
  digitalWrite(LED,LOW);
  delay(5000);
}
</code></pre><p>Arduinoがどのようなものなのか少しでも理解できたでしょうか？
<code>void setup()</code>や<code>void loop()</code>をNefryBTのプログラムを作っていくので知っておいてください。
せっかくなのでdelayの秒数を変更してみたりして、あそんでみましょう。</p><p>余談なのですが、もっとLEDのON,OFFの間隔を狭くするとLEDの明るさをコントロールすることもできます。</p><pre><code class=language-c++>#define LED D6
//LEDをD6につないでください
void setup() {
  pinMode(LED, OUTPUT);
}

void loop() {
  digitalWrite(LED,HIGH);//あらかじめLEDを制御できるように出力モードにしておきます
  delayMicroseconds(100);//100us//10にも変更してみましょう
  digitalWrite(LED,LOW);
  delayMicroseconds(100);
}
</code></pre><h2 id=nefrybtの設定をしてみよう>NefryBTの設定をしてみよう！</h2><p>NefryシリーズではWiFiの設定やモジュールの設定が簡単にできるようになっています。</p><ul><li>参考：WiFiの設定：<a href=https://dotstud.io/docs/nefrybt-wifi-setup/>Nefry BTのWi-Fiセットアップ</a></li><li>参考：モジュール設定の話：<a href=https://dotstud.io/docs/nefrybt-change-ssid/>Nefry BTのSSIDを変更する</a></li><li>参考：データストアの設定：<a href=https://sekaiokaeru.com/tips/nefrybt-variables>Nefry BTで変数を使う</a></li></ul><h2 id=nefryクラウドを使ってネットワークからnefrybtを動かしてみる>Nefryクラウドを使ってネットワークからNefryBTを動かしてみる</h2><p>NefryBTではNefryクラウドを使うことで外部からの信号をきっかけにNefryBTを動かすことができます。</p><p>参考：<a href=https://qiita.com/wamisnet/items/38d6a5ac8332b090d0c2>Nefryクラウド(仮)をつくってみた</a></p><p>上の記事を参考に登録して、ユーザ名とAPIKeyを取得します。取得出来たものを下のプログラムのユーザ名とAPIKeyにそれぞれ入力してNefryBTに書き込みましょう！</p><pre><code class=language-c++:NefryCloud.ino>#include &lt;Nefry.h&gt;
#include &lt;NefryCloud.h&gt;

NefryCloud nefryCloud;

void onpush(String message);

void setup() {
  nefryCloud.begin(&quot;user&quot;,&quot;apikey&quot;);//サイトで登録したuser,メールで受け取ったapikeyを入力してください
  nefryCloud.on(onpush);
  pinMode(LED, OUTPUT);//あらかじめLEDを制御できるように出力モードにしておきます
}

void loop() {
  nefryCloud.loop();
}

void onpush(String message) {//Nefryクラウド(仮)から通知が来ます
  Nefry.print(&quot;onpush : &quot;);
  Nefry.println(message);
  if(message.equals(&quot;on&quot;)){
    //onという文字列がきたときに処理をする
    digitalWrite(LED,HIGH);
    delay(5000);//5秒待つ
    digitalWrite(LED,LOW);
    delay(5000);
  }
}
</code></pre><p>無事に書き込めたら、URLをブラウザから叩いてみましょう！
ユーザ名とサイトで取得したAPIKeyを置き換えて下のURLを叩いてください。
今回のプログラムではONという文字を受け取ったときにLEDを光るようにしているので<code>data=on</code>といった形でデータを合わせて送ります。</p><p>GETメソッド <code>http://cloud.nefry.studio:1880/nefrysetting/setdata?user=ユーザ名&amp;key=サイトで取得したAPIKey&amp;data=on</code></p><p>具体例としてWebページを作成してそこのページでボタンを押したら動かすこともできます。　</p><p>参考：<a href=https://qiita.com/n0bisuke/items/ff0d1ddf41eaa13fd72a>Nefry BTのLEDをWebから制御する #nefry</a></p><h2 id=iftttと連携してnefrybtからスマートフォンやtwitterに通知を飛ばしてみよう>IFTTTと連携してNefryBTからスマートフォンやTwitterに通知を飛ばしてみよう</h2><p>こちらの記事を参考に進めていきます。</p><p>参考：<a href=https://dotstud.io/docs/nefrybt-ifttt/>Nefry BTとIFTTTを連携する</a></p><h2 id=groveセンサとつないでiftttにセンサの値をおくってみよう>GroveセンサとつないでIFTTTにセンサの値をおくってみよう！</h2><p>こちらの記事を参考に進めていきます。</p><p>参考：<a href=https://qiita.com/tokutoku393/items/d4c91a28485bf568828c>Nefry BTでほぼノンプログラムな湿度管理したい</a></p></div><div class=information><span>Last edited on 2018.01.23 by</span>
<a href=/members/wami><img src=/img/members/wami/author.png alt><span>わみ</span></a></div><div id=fb-root></div><script>(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src='https://connect.facebook.net/ja_JP/sdk.js#xfbml=1&version=v3.1&appId=172686636611828&autoLogAppEvents=1';fjs.parentNode.insertBefore(js,fjs);}(document,'script','facebook-jssdk'));</script><div class=share><a href=https://twitter.com/share class=twitter-share-button data-size=large data-show-count=true data-hashtags=dotstudio>Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','twitter-wjs');</script>&nbsp;<div class=fb-share-button data-href=https://dotstud.io/docs/nefrybt-tutorial/ data-layout=button_count data-size=large data-mobile-iframe=true><a target=_blank href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdotstud.io%2Fblog%2Fmftokyo-2018-chantoku-report%2F&amp;src=sdkpreparse" class=fb-xfbml-parse-ignore>シェア</a></div>&nbsp;
<a href=https://dotstud.io/docs/nefrybt-tutorial/ class=hatena-bookmark-button data-hatena-bookmark-layout=basic-counter data-hatena-bookmark-height=30 title=このエントリーをはてなブックマークに追加><img src=https://b.st-hatena.com/images/entry-button/button-only@2x.png alt=このエントリーをはてなブックマークに追加 width=20 height=20 style=border:none></a><script type=text/javascript src=https://b.st-hatena.com/js/bookmark_button.js async></script>
&nbsp;<div class=line-it-button data-lang=ja data-type=share-c data-url=https://dotstud.io/docs/nefrybt-tutorial/ style=display:none></div><script src=https://d.line-scdn.net/r/web/social-plugin/js/thirdparty/loader.min.js async defer></script></div></div></article><div class=sp-docs-single><div class=main><div class=title><h1 class=jp>チュートリアル</h1><div class=line></div><span class=en>Nefry BT tutorial</span></div><img class=eyecatch src alt><div class="content markdown"><p>NefryBTのハンズオンの記事になります。Arduinoも触ったことのないような初心者を対象としています。</p><p><a href=https://qiita.com/wamisnet/items/306ce54840ab2382d753>NefryBTでできること</a>は別の記事にまとまっています。</p><h2 id=nefrybtの開発環境を整えよう>NefryBTの開発環境を整えよう！</h2><h3 id=arduino-ideをインストールしよう>Arduino IDEをインストールしよう</h3><ul><li>Windows：<a href=http://nefry.studio/ArduinoIDE%E3%81%AE%E7%92%B0%E5%A2%83%E3%82%92%E6%95%B4%E3%81%88%E3%82%88%E3%81%86/>Nefryの環境を整えよう</a></li><li>Mac：<a href=https://dotstud.io/docs/arduinoide-setup/>Arduino IDEをPCにインストール</a></li></ul><h3 id=arduinoideにnefrybtの環境を構築しよう>ArduinoIDEにNefryBTの環境を構築しよう</h3><p>Nefry BTのライブラリバージョンは、 メジャーバージョン、マイナーバージョン、パッチバージョンに分かれています。</p><ul><li>メジャーバージョン - 大きな変更</li><li>マイナーバージョン - 機能追加などの更新</li><li>パッチバージョン - バグ修正など</li></ul><p>例えばv1.2.3の場合、最初の1がメジャーバージョン、次の2がマイナーバージョン、最後の3がパッチバージョンとしています。</p><p>また、 安定版と開発版を分けていて、マイナーバージョンが偶数か奇数かで分けています。安定版がv1.2系、開発版がv1.1系などとなります。その次は安定版が1.4系、開発版がv1.3系となり、以降も偶数と奇数でのアップデートとなります。</p><p>参考 : <a href=https://dotstud.io/docs/nefrybt-library/>NefryBTのライブラリ</a></p><p>基本的には偶数のものをインストールしてください。現在(2018/1/21)では1.2.0が最も最新です。</p><p>参考：<a href=https://dotstud.io/docs/nefrybt-arduino-ide-setup/>Nefry BT向けのArduino IDEセットアップ方法</a></p><h2 id=arduinoideでプログラムを書くために知っておくこと>ArduinoIDEでプログラムを書くために知っておくこと</h2><p>先ほどの手順でインストールしたArduinoIDEを使ってNefryBTの上で動くプログラムを作成します。</p><h3 id=arduinoのプログラムって>Arduinoのプログラムって？</h3><p>NefryBTのプログラムはArduinoのプログラムと同じようにかけます。</p><p>ArduinoIDEが起動するとプログラムを入力するところに初めからこのようなプログラムが書いてあります。</p><pre><code class=language-c++>void setup(){

}

void loop(){

}
</code></pre><p><img src=https://wamisnet.github.io/pic/ren/pic015.png alt></p><p>簡単に説明していきます。</p><pre><code class=language-c++>void setup()
</code></pre><p>ここの部分では起動時に一度だけ行われる処理を書きます。 例えば、入出力ピンの設定や温度センサなどセンサ類の初期設定などを入力します。</p><pre><code class=language-c++>void loop()
</code></pre><p>ここの部分では起動中ずっと繰り返し行われる処理を書きます。 例えば、LEDの点滅やセンサーデータの取得などを入力します。</p><p>NefryBTではこのsetupとloopをうまく活用してプログラムを書いていきます。</p><p><img src=https://wamisnet.github.io/pic/ren/pic025.png alt></p><p>参考 : <a href=http://nefry.studio/Nefry%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E6%9B%B8%E3%81%93%E3%81%86/>Nefryのプログラムを書こう</a></p><h2 id=ledを点滅させてみよう>LEDを点滅させてみよう！</h2><p>Arduinoの基礎を学んだところでLEDを点滅させるLチカと呼ばれるハードウエア入門してみましょう！</p><p>まずは一度だけLEDを点滅させてみましょう！
一度だけなので<code>void setup()</code>にLEDを点滅させるプログラムを書きます。
LEDの制御をするためには、<code>digitalWrite</code>という関数を呼び出し、制御します。
&gt;関数の詳細については<a href="http://www.musashinodenpa.com/arduino/ref/index.php?f=0&amp;pos=2025">こちら</a></p><p>関数の引数を確認すると、<code>digitalWrite(LED,LOW);</code>としたときに消灯、<code>digitalWrite(LED,HIGH);</code>としたときに点灯となります。
それをプログラムで表現してみます。</p><pre><code class=language-c++>#define LED D6
//LEDをD6につないでください
void setup() {
  pinMode(LED, OUTPUT);//あらかじめLEDを制御できるように出力モードにしておきます
  digitalWrite(LED,HIGH);
  delay(5000);//5秒待つ
  digitalWrite(LED,LOW);
  delay(5000);
}

void loop() {
}
</code></pre><p>一度だけLチカできたでしょうか？
見損ねた場合、リセットボタンを押すとプログラムを再度初めから行うことができます。</p><p>それでは次のステップとして、LEDを何度も点滅させてみましょう！
何度もなので、今度は<code>void loop()</code>の中で同じ処理を書いてみます。</p><pre><code class=language-c++>#define LED D6
//LEDをD6につないでください
void setup() {
  pinMode(LED, OUTPUT);//あらかじめLEDを制御できるように出力モードにしておきます
}

void loop() {
  digitalWrite(LED,HIGH);
  delay(5000);//5000ms//5秒待つ
  digitalWrite(LED,LOW);
  delay(5000);
}
</code></pre><p>Arduinoがどのようなものなのか少しでも理解できたでしょうか？
<code>void setup()</code>や<code>void loop()</code>をNefryBTのプログラムを作っていくので知っておいてください。
せっかくなのでdelayの秒数を変更してみたりして、あそんでみましょう。</p><p>余談なのですが、もっとLEDのON,OFFの間隔を狭くするとLEDの明るさをコントロールすることもできます。</p><pre><code class=language-c++>#define LED D6
//LEDをD6につないでください
void setup() {
  pinMode(LED, OUTPUT);
}

void loop() {
  digitalWrite(LED,HIGH);//あらかじめLEDを制御できるように出力モードにしておきます
  delayMicroseconds(100);//100us//10にも変更してみましょう
  digitalWrite(LED,LOW);
  delayMicroseconds(100);
}
</code></pre><h2 id=nefrybtの設定をしてみよう>NefryBTの設定をしてみよう！</h2><p>NefryシリーズではWiFiの設定やモジュールの設定が簡単にできるようになっています。</p><ul><li>参考：WiFiの設定：<a href=https://dotstud.io/docs/nefrybt-wifi-setup/>Nefry BTのWi-Fiセットアップ</a></li><li>参考：モジュール設定の話：<a href=https://dotstud.io/docs/nefrybt-change-ssid/>Nefry BTのSSIDを変更する</a></li><li>参考：データストアの設定：<a href=https://sekaiokaeru.com/tips/nefrybt-variables>Nefry BTで変数を使う</a></li></ul><h2 id=nefryクラウドを使ってネットワークからnefrybtを動かしてみる>Nefryクラウドを使ってネットワークからNefryBTを動かしてみる</h2><p>NefryBTではNefryクラウドを使うことで外部からの信号をきっかけにNefryBTを動かすことができます。</p><p>参考：<a href=https://qiita.com/wamisnet/items/38d6a5ac8332b090d0c2>Nefryクラウド(仮)をつくってみた</a></p><p>上の記事を参考に登録して、ユーザ名とAPIKeyを取得します。取得出来たものを下のプログラムのユーザ名とAPIKeyにそれぞれ入力してNefryBTに書き込みましょう！</p><pre><code class=language-c++:NefryCloud.ino>#include &lt;Nefry.h&gt;
#include &lt;NefryCloud.h&gt;

NefryCloud nefryCloud;

void onpush(String message);

void setup() {
  nefryCloud.begin(&quot;user&quot;,&quot;apikey&quot;);//サイトで登録したuser,メールで受け取ったapikeyを入力してください
  nefryCloud.on(onpush);
  pinMode(LED, OUTPUT);//あらかじめLEDを制御できるように出力モードにしておきます
}

void loop() {
  nefryCloud.loop();
}

void onpush(String message) {//Nefryクラウド(仮)から通知が来ます
  Nefry.print(&quot;onpush : &quot;);
  Nefry.println(message);
  if(message.equals(&quot;on&quot;)){
    //onという文字列がきたときに処理をする
    digitalWrite(LED,HIGH);
    delay(5000);//5秒待つ
    digitalWrite(LED,LOW);
    delay(5000);
  }
}
</code></pre><p>無事に書き込めたら、URLをブラウザから叩いてみましょう！
ユーザ名とサイトで取得したAPIKeyを置き換えて下のURLを叩いてください。
今回のプログラムではONという文字を受け取ったときにLEDを光るようにしているので<code>data=on</code>といった形でデータを合わせて送ります。</p><p>GETメソッド <code>http://cloud.nefry.studio:1880/nefrysetting/setdata?user=ユーザ名&amp;key=サイトで取得したAPIKey&amp;data=on</code></p><p>具体例としてWebページを作成してそこのページでボタンを押したら動かすこともできます。　</p><p>参考：<a href=https://qiita.com/n0bisuke/items/ff0d1ddf41eaa13fd72a>Nefry BTのLEDをWebから制御する #nefry</a></p><h2 id=iftttと連携してnefrybtからスマートフォンやtwitterに通知を飛ばしてみよう>IFTTTと連携してNefryBTからスマートフォンやTwitterに通知を飛ばしてみよう</h2><p>こちらの記事を参考に進めていきます。</p><p>参考：<a href=https://dotstud.io/docs/nefrybt-ifttt/>Nefry BTとIFTTTを連携する</a></p><h2 id=groveセンサとつないでiftttにセンサの値をおくってみよう>GroveセンサとつないでIFTTTにセンサの値をおくってみよう！</h2><p>こちらの記事を参考に進めていきます。</p><p>参考：<a href=https://qiita.com/tokutoku393/items/d4c91a28485bf568828c>Nefry BTでほぼノンプログラムな湿度管理したい</a></p></div><div class=information><p>Last edited on 2018.01.23</p><a href=/members/wami><span>by</span>
<img src=/img/members/wami/author.png alt><span class=author>わみ</span></a></div><div id=fb-root></div><script>(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src='https://connect.facebook.net/ja_JP/sdk.js#xfbml=1&version=v3.1&appId=172686636611828&autoLogAppEvents=1';fjs.parentNode.insertBefore(js,fjs);}(document,'script','facebook-jssdk'));</script><div class=share><a href=https://twitter.com/share class=twitter-share-button data-size=large data-show-count=true data-hashtags=dotstudio>Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','twitter-wjs');</script>&nbsp;<div class=fb-share-button data-href=https://dotstud.io/docs/nefrybt-tutorial/ data-layout=button_count data-size=large data-mobile-iframe=true><a target=_blank href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdotstud.io%2Fblog%2Fmftokyo-2018-chantoku-report%2F&amp;src=sdkpreparse" class=fb-xfbml-parse-ignore>シェア</a></div>&nbsp;
<a href=https://dotstud.io/docs/nefrybt-tutorial/ class=hatena-bookmark-button data-hatena-bookmark-layout=basic-counter data-hatena-bookmark-height=30 title=このエントリーをはてなブックマークに追加><img src=https://b.st-hatena.com/images/entry-button/button-only@2x.png alt=このエントリーをはてなブックマークに追加 width=20 height=20 style=border:none></a><script type=text/javascript src=https://b.st-hatena.com/js/bookmark_button.js async></script>
&nbsp;<div class=line-it-button data-lang=ja data-type=share-c data-url=https://dotstud.io/docs/nefrybt-tutorial/ style=display:none></div><script src=https://d.line-scdn.net/r/web/social-plugin/js/thirdparty/loader.min.js async defer></script></div></div><div class=sp-under-index><p class=index><span class=index-title>Nefrybt</span>-index-</p><div class=nav>　　<ul><li><a href=https://dotstud.io/docs/nefrybt/>Nefry BTとは</a></li><li><a href=https://dotstud.io/docs/nefrybt-getting-started/>Nefry BTの始め方</a></li><li><a href=https://dotstud.io/docs/nefrybt-link/>関連リンク（情報の調べ方）</a></li><li style=padding-top:10px;font-size:110%>--- セットアップ ---</li><li><a href=https://dotstud.io/docs/nefrybt-setup-wifi/>Wi-Fi情報を設定</a></li><li><a href=https://dotstud.io/docs/nefrybt-setup-ip-address/>IPアドレスを確認</a></li><li><a href=https://dotstud.io/docs/nefrybt-setup-display/>ディスプレイの取り付け</a></li><li><a href=https://dotstud.io/docs/nefrybt-setup-revision/>リビジョンを確認</a></li><li><a href=https://dotstud.io/docs/nefrybt-setup-arduino-ide/>環境構築（Arduino IDE）</a></li><li style=padding-top:10px;font-size:110%>--- 基本機能 ---</li><li><a href=https://dotstud.io/docs/nefrybt-basic-portal/>Nefryポータル</a></li><li><a href=https://dotstud.io/docs/nefrybt-basic-led/>内蔵LEDを光らせる</a></li><li><a href=https://dotstud.io/docs/nefrybt-basic-switch/>内蔵スイッチを使う</a></li><li class=wip>ディスプレイに表示する <span>[WIP]</span></li><li style=padding-top:10px;font-size:110%>--- 初期プログラム ---</li><li><a href=https://dotstud.io/docs/nefrybt-default/>初期プログラム（初期化方法）</a></li><li><a href=https://dotstud.io/docs/nefrybt-default-line-notify/>ノンプログラミングでLINE連携</a></li><li><a href=https://dotstud.io/docs/nefrybt-default-ifttt/>ノンプログラミングでIFTTT連携</a></li><li style=padding-top:10px;font-size:110%>--- プログラムの書き込み ---</li><li><a href=https://dotstud.io/docs/nefrybt-program-serial/>シリアル通信で書き込む</a></li><li><a href=https://dotstud.io/docs/nefrybt-program-zip/>Wi-Fi経由で書き込む</a></li><li style=padding-top:10px;font-size:110%>--- 入門向け ---</li><li><a href=https://dotstud.io/docs/nefrybt-beginner-led/>LEDを点滅させる</a></li><li class=wip>LEDをゆらゆら点滅させる <span>[WIP]</span></li><li class=wip>サーボモータを動かす <span>[WIP]</span></li><li style=padding-top:10px;font-size:110%>--- ライブラリ ---</li><li><a href=https://dotstud.io/docs/nefrybt-library/>Nefryライブラリについて</a></li><li><a href=https://dotstud.io/docs/nefrybt-library-version/>ライブラリのバージョニング</a></li><li><a href=https://dotstud.io/docs/nefrybt-library-wifi/>Wi-Fi関連の関数</a></li><li><a href=https://dotstud.io/docs/nefrybt-library-datastore/>DataStore関連の関数</a></li><li><a href=https://dotstud.io/docs/nefrybt-library-hardware/>ハードウェア関連の関数</a></li><li><a href=https://dotstud.io/docs/nefrybt-library-console/>Console関連の関数</a></li><li><a href=https://dotstud.io/docs/nefrybt-library-others/>その他の便利な関数</a></li><li class=wip>外部ライブラリ <span>[WIP]</span></li><li style=padding-top:10px;font-size:110%>--- 各種通信 ---</li><li><a href=https://dotstud.io/docs/nefrybt-network-http-post/>HTTP通信でリクエストを投げる</a></li><li class=wip>HTTP通信でNefryのデータを取得する <span>[WIP]</span></li><li><a href=https://dotstud.io/docs/nefrybt-network-mqtt/>MQTT通信</a></li><li><a href=https://dotstud.io/docs/nefrybt-bluetooth/>Bluetooth / BLE通信</a></li><li style=padding-top:10px;font-size:110%>--- Groveモジュール ---</li><li class=wip>ボタン（デジタル入力） <span>[WIP]</span></li><li class=wip>LED（デジタル出力） <span>[WIP]</span></li><li class=wip>ブザー <span>[WIP]</span></li><li class=wip>音センサ <span>[WIP]</span></li><li class=wip>温湿度センサ <span>[WIP]</span></li><li style=padding-top:10px;font-size:110%>--- サービス連携 ---</li><li class=wip>Ambient <span>[WIP]</span></li><li class=wip>Milkcocoa <span>[WIP]</span></li><li class=wip>Enebular <span>[WIP]</span></li><li><a href=https://dotstud.io/docs/nefrybt-service-firebase/>Firebase</a></li><li style=padding-top:10px;font-size:110%>--- 便利な機能 ---</li><li><a href=https://dotstud.io/docs/nefrybt-conv-change-ssid/>SSIDを変更する</a></li><li class=wip>Nefry BTで環境変数を使う <span>[WIP]</span></li><li style=padding-top:10px;font-size:110%>--- エラーが起きたとき ---</li><li><a href=https://dotstud.io/docs/nefrybt-error-handling-1/>ライブラリアップデート後の書き込みエラー</a></li><li><a href=https://dotstud.io/docs/nefrybt-error-handling-2/>コンパイルは成功するのに書き込みが失敗する</a></li><li><a href=https://dotstud.io/docs/nefrybt-error-faq/>困ったときは</a></li><li class=selected><a href=https://dotstud.io/docs/nefrybt-tutorial/>チュートリアル</a></li><li><a href=https://dotstud.io/docs/nefrybt-kit/>Nefry BTキット</a></li></ul></div></div></div><footer class=footer><p class=footer-info><a class=footer-info--item href=/about>会社概要</a>
<a class=footer-info--item href=/members>メンバー</a>
<a class=footer-info--item href=/recruit>採用情報</a>
<a class=footer-info--item href=/legal#tos>利用規約</a>
<a class=footer-info--item href=/legal#sct>特定商取引</a>
<a class=footer-info--item href=/legal#pp>プライバシーポリシー</a></p><p class=footer-cr>© 2018 dotstudio inc.</p></footer><script src=/js/jquery.min.js></script><script src=/js/app.js></script><script src=/js/lib/hljs.js></script><script src=/js/lib/hljs-numbers.js></script><script>hljs.initHighlightingOnLoad();hljs.initLineNumbersOnLoad();</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-78080011-1','auto');ga('send','pageview');</script></body>